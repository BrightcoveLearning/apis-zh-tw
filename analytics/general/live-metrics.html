---
title: '分析 API：實時指標'
description: '本主題介紹了可用於直播流的分析指標。'
parent: 'General Information' 
grandparent: Analytics API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">介紹</h2>

    <p>播放器提供的實時流的播放指標<strong>Brightcove Live</strong>服務可以通過以下方式實時獲得<strong>Analytics API</strong>。該數據被捕獲用於 <em>直播</em> 只要;不包括 VOD 播放。</p>

    <p>API 通過 2 個端點提供實時流指標：</p>
    <ul>
      <li><code translate="No">/v1/timeseries</code></li>
      <li><code translate="No">/v1/events</code></li>
    </ul>
    <p>兩者都查詢相同的數據集，但匯總結果卻不同。本文檔描述了每個的用法和語法。</p>
  </section>

  <section class="bcls-section">
    <h2 id="metrics">指標</h2>

    <p>這些是通過 Live 端點可用的指標。查詢可能請求多個指標。</p>

    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>公制</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><code translate="No">alive_ss_ad_start</code></td>
          <td>服務器端廣告展示次數</td>
        </tr>
        <tr>
          <td><code translate="No">ccu</code></td>
          <td>獨特的 <em>會議</em>;不同的計數（<em>指紋</em>   +       <em>會議</em>）</td>
        </tr>
        <tr>
          <td><code translate="No">fingerprint_count</code></td>
          <td>獨特的 <em>設備</em>;不同的計數 <em>指紋</em> （見下文）</td>
        </tr>
        <tr>
          <td><code translate="No">video_impression</code></td>
          <td>視頻加載到播放器的次數</td>
        </tr>
        <tr>
          <td><code translate="No">video_seconds_viewed</code></td>
          <td>所有觀眾觀看的總秒數</td>
        </tr>
        <tr>
          <td><code translate="No">video_view</code></td>
          <td>流開始（不是唯一的）</td>
        </tr>
      </tbody>
    </table>

    <p>為了<strong>獨特的</strong>跟踪，我們分配一個 <em>指紋</em> 通過組合 ( <code translate="No">Remote IP</code> + <code translate="No">User-Agent</code> + <code translate="No">Player</code>）。請注意，我們並沒有使用設備本身的實際硬件ID-這會降低準確性，但會保持我們的隱私合規性。</p>
  </section>

  <section class="bcls-section">
    <h2 id="dimensions">方面</h2>

    <p>支持以下組合<code translate="No">dimensions</code>和<code translate="No">where</code>過濾鍵：</p>

    <ul>
      <li><code translate="No">video</code></li>
      <li><code translate="No">video, country</code></li>
      <li><code translate="No">video, device_type</code></li>
    </ul>
  </section>

  <section class="bcls-section">
  <h2 id="query-parameters">查詢參數</h2>

  <p>兩個Live端點共享一些通用參數，這些參數控制查詢的範圍和分組。</p>

  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>範圍</th>
        <th>句法</th>
        <th style="text-align: center">必要</th>
        <th style="text-align: center">默認</th>
        <th>描述</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td>方面</td>
        <td><code translate="No">&lt;dim1&gt;,&lt;dim2&gt;,...</code></td>
        <td style="text-align: center">是</td>
        <td style="text-align: center">--</td>
        <td>查詢維度（GROUP BY）</td>
      </tr>
      <tr>
        <td>指標</td>
        <td><code translate="No">&lt;metric1&gt;,&lt;metric2&gt;,...</code></td>
        <td style="text-align: center">是</td>
        <td style="text-align: center">--</td>
        <td>一個或多個要報告的指標</td>
      </tr>
      <tr>
        <td>在哪裡</td>
        <td><code translate="No">&lt;dim1&gt;==&lt;value1&gt;;...</code></td>
        <td style="text-align: center">是</td>
        <td style="text-align: center">--</td>
        <td>一個或多個查詢過濾器；必須包含至少1個視頻</td>
      </tr>
      <tr>
        <td>從</td>
        <td><code translate="No">&lt;epoch&gt;</code></td>
        <td style="text-align: center">ñ</td>
        <td style="text-align: center">從現在起32天</td>
        <td>時間範圍開始</td>
      </tr>
      <tr>
        <td>到</td>
        <td><code translate="No">&lt;epoch&gt;</code></td>
        <td style="text-align: center">ñ</td>
        <td style="text-align: center"><em>現在</em></td>
        <td>時間範圍結束</td>
      </tr>
    </tbody>
  </table>
</section>
<section class="bcls-section">
  <h2 id="time-series">時間序列</h2>

  <p>這<code translate="No">/v1/timeseries</code>端點返回時間軸上的點列表，以及每個時間點請求的度量值。要點是<strong>1分鐘</strong>桶默認情況下，但可以通過參數進行更改。</p>

  <p>在這種情況下，唯一指標（<code translate="No">ccu</code>，<code translate="No">fingerprint_count</code>）指出<strong>最大值</strong>在每個時段中的任何時候。所以一個查詢<code translate="No">bucket_duration=1d</code>將返回每天的最大並發數，而查詢<code translate="No">bucket_limit=1</code>將返回流中任何一點的最大並發。</p>

  <h3 id="uri">URI</h3>

  <p><code translate="No">/v1/timeseries/accounts/{account_id}</code></p>

  <h3 id="additional-parameters">附加參數</h3>

  <table class="bcls-table">
    <thead class="bcls-table__head">
      <tr>
        <th>範圍</th>
        <th>句法</th>
        <th style="text-align: center">必要</th>
        <th style="text-align: center">默認</th>
        <th>描述</th>
      </tr>
    </thead>
    <tbody class="bcls-table__body">
      <tr>
        <td>bucket_duration</td>
        <td><code translate="No">&lt;n&gt;m</code>&nbsp;（分鐘）<br><code translate="No">&lt;n&gt;h</code>（小時）<br><code translate="No">&lt;n&gt;d</code>（天）</td>
        <td style="text-align: center">ñ</td>
        <td style="text-align: center">1m</td>
        <td>每個點代表的持續時間。<code translate="No">1d</code>是24小時，而不是日曆日。</td>
      </tr>
      <tr>
        <td>bucket_limit</td>
        <td><code translate="No">&lt;n&gt;</code></td>
        <td style="text-align: center">ñ</td>
        <td style="text-align: center">--</td>
        <td>要返回的點數。使用任一<code translate="No">bucket_duration</code>或者<code translate="No">bucket_limit</code>，但不能同時使用。</td>
      </tr>
    </tbody>
  </table>

  <h3 id="response">回复</h3>

<pre class="line-numbers"><code class="language-json" translate="No">{
"&lt;metric1&gt;": {
"data": [
  {
    "dimensions": {
        "account": "&lt;account&gt;",
        "&lt;dim1&gt;": "&lt;key1&gt;",
        ...
        "&lt;dimN&gt;": "&lt;keyN&gt;"
      },
    "points": [
      {
        "timestamp": &lt;bucket1&gt;,
        "value": &lt;value1&gt;
      },
      ...,
      {
        "timestamp": &lt;bucketN&gt;,
        "value": &lt;valueN&gt;
      },
    ]
  }
]
},
"&lt;metric2&gt;": {
...
},
...
}
</code></pre>
</section>

<section class="bcls-section">
  <h2 id="events">大事記</h2>

  <p>這<code translate="No">/v1/events</code>端點返回全部或部分實時視頻流的指標總數。</p>

  <p>在這種情況下，唯一指標（<code translate="No">ccu</code>，<code translate="No">fingerprint_count</code>）代表<strong>總價值</strong>在查詢範圍內。例如，一個沒有<code translate="No">from</code> / <code translate="No">to</code>參數將返回總數 <em>獨特的</em> 整個流的會話 (ccu) 和/或設備 (fingerprint_count)。</p>

  <h3 id="uri-1">URI</h3>

  <p><code translate="No">/v1/events/accounts/{account_id}</code></p>

  <h3 id="additional-parameters-1">附加參數</h3>

  <p><em>沒有任何</em></p>

  <h3 id="response-1">回复</h3>

<pre class="line-numbers"><code class="language-json" translate="No">{
"data": [
{
  "dimensions": {
    "account": "&lt;account&gt;",
    "&lt;dim1&gt;": "&lt;key1&gt;",
    ...
    "&lt;dimN&gt;": "&lt;keyN&gt;"
  },
  "totals": {
    "&lt;metric1&gt;": &lt;value1&gt;,
    ...
    "&lt;metricN&gt;": &lt;valueN&gt;
  }
}
]
}
</code></pre>


  <h3 id="export">出口</h3>

  <p>Events 端點還提供可下載的報告：</p>

  <p><code translate="No">/v1/events/accounts/{account_id}/videos/{video_id}/export?format=xlsx</code></p>

  <p>響應是一個<strong>XLSX</strong>帶有 4 個工作表上的實時指標的文件：</p>
  <ul>
    <li>概括</li>
    <li>並髮用戶</li>
    <li>按設備類型查看</li>
    <li>地理視圖</li>
  </ul>
</section>

<section class="bcls-section">
  <h2 id="usage-examples">使用示例</h2>

  <p>對於所有這些示例，我們將使用<strong>帳戶1234</strong>，<strong>視頻5555</strong>，並假設當前時間為<strong>UTC下午12:00:00</strong>上<strong>2020年2月15日</strong>。</p>

  <hr>
  <h4 id="get-the-current-viewer-count-ccu-for-a-live-stream-or-channel">獲取實時流或頻道的當前查看器計數（CCU）</h4>

  <p>放 <em>從</em> 到至少 2 分鐘前（上午 11:58），並使用最後一個 <em>觀點</em> 在回應中。</p>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581767880000</code></p>

  <hr>
  <h4 id="get-ccu-graph-points-for-a-live-stream-over-the-past-24-hours">在過去24小時內獲取實時流的CCU圖形點</h4>

  <h5 id="zoom-in-1-minute-points">放大（1 分鐘分）</h5>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581681600000&amp;bucket_duration=1m</code></p>

  <h5 id="zoom-out-1-hour-points">縮小（1 小時點）</h5>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581681600000&amp;bucket_duration=1h</code></p>

  <hr>
  <h4 id="get-the-maximum-ccu-per-day-for-a-live-channel-over-the-past-7-days">取得過去7天內每天直播頻道的最高CCU</h4>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;from=1581206400000&amp;bucket_duration=7d</code></p>

  <hr>
  <h4 id="get-the-maximum-ccu-at-any-time-during-a-live-stream">在直播期間隨時獲取最高CCU</h4>

  <p><code translate="No">/v1/timeseries/accounts/1234?dimensions=video&amp;metrics=ccu&amp;where=video==5555&amp;bucket_limit=1</code></p>

  <hr>
  <h4 id="get-the-total-unique-viewers-and-seconds-viewed-for-multiple-live-streams">獲取多個直播流的唯一觀看者總數和觀看的秒數</h4>

  <p>視頻5555已完成；數字是最終的。視頻 5556 仍處於活動狀態；數字是運行總數。</p>

  <p><code translate="No">/v1/events/accounts/1234?dimensions=video&amp;metrics=fingerprint_count,video_seconds_viewed&amp;where=video==5555,5556</code></p>

  <hr>
  <h4 id="get-the-viewership-and-ad-totals-for-an-hour-long-program-on-a-live-channel">在直播頻道上獲取一個小時的節目的觀看次數和廣告總計&lt;</h4>

  <p>節目從10:00 AM到11:00 AM（UTC）播出</p>

  <p><code translate="No">/v1/events/accounts/1234?dimensions=video&amp;metrics=alive_ss_ad_start,video_view,fingerprint_count&amp;where=video==5555&amp;from=1581760800000&amp;to=1581764399999</code></p>

  <hr>
  <h4 id="get-viewership-by-country-for-the-duration-of-a-live-stream">在直播過程中按國家/地區獲取觀看次數</h4>

  <p><code translate="No">/v1/events/accounts/1234?dimensions=video,country&amp;metrics=video_view,fingerprint_count&amp;where=video==5555</code></p>
</section>

</article>