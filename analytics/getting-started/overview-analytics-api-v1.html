---
title: '概述：分析 API v1'
description: '在本主題中，您將大致了解 Analytics API。'
parent: Getting Started 
grandparent: Analytics API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <div class="training-video-player-ipx" data-experience="5a73630f7afd7a00101bc1b5" data-video-ids="5996554433001">&nbsp;</div>
  <script src="https://players.brightcove.net/20318290001/experience_5a73630f7afd7a00101bc1b5/live.js"></script>

  <section class="bcls-section">
  <h2 id="Introduction">介紹</h2>

  <p>這<span translate="No">分析 API</span>允許您直接獲取 Video Cloud 帳戶的分析數據。您還可以在 Video Cloud Studio 的分析模塊中查看內置的分析報告。以編程方式訪問數據為您提供了更多的靈活性。</p>

  <p>另請參閱<a href="/analytics/references/reference.html">API參考</a>。</p>
  </section>

  <section class="bcls-section">
  <h2 id="Typical_uses">典型用途</h2>

  <p>以下是API的一些典型用法：</p>

  <ul>
    <li>創建自定義圖表和顯示</li>
    <li>一起使用多個 API - 例如，使用<span translate="No">內容管理系統 API</span>對於上週觀看次數最多的視頻</li>
    <li>將您的視頻分析數據與其他站點分析數據相結合</li>
    <li>有關一些示例解決方案，請參見
    <ul>
      <li><a href="/analytics/code-samples/analyticscms-apis-sample-analytics-playlists.html">播放列表分析</a></li>
      <li><a href="/analytics/code-samples/analytics-api-sample-video-report-player-and-day.html">按國家和日期進行分析</a></li>
    </ul>
    </li>
  </ul>
  </section>

  <section class="bcls-section">
  <h2 id="Base_URL">基本網址</h2>

  <p>的基本 URL <span translate="No">分析 API</span>是：</p>

  <pre class="line-numbers" style="white-space:pre-wrap;padding-top:1em;padding-bottom:1em;">
  &lt;code class="language-http translate="No"&gt;https://analytics.api.brightcove.com/v1</code></pre>
  </section>

  <section class="bcls-section">
  <h2 id="Headers">標頭</h2>

  <h3>身份驗證（必填）</h3>

  <p>這<span translate="No">分析 API</span>使用 Brightcove <a href="/oauth/getting-started/overview-oauth-api-v4.html"> OAuth 服務</a>驗證呼叫。</p>

  <p>您首先需要獲取客戶端憑據（一個<code translate="No">client_id</code>和<code translate="No">client_secret</code>）。這是一種一次性操作，可以使用<a href="/general/managing-api-authentication-credentials.html">OAuth 憑據 UI</a> .您可以使用直接從 Brightcove OAuth 服務獲取客戶端憑據<a href="/oauth/guides/oauth-create-client-credentials-using-curl.html" translate="No">捲曲</a> , <a href="/oauth/guides/oauth-create-client-credentials-using-postman.html" translate="No">郵差</a>， 或者<a href="/general/use-insomnia-api-requests.html" translate="No">失眠</a> .</p>

  <p>您需要客戶端憑據的分析讀取和視頻讀取權限：</p>

  <figure class="bcls-figure"><img class="bcls-image" alt="Permissions for <span translate="No">分析 API</span>憑據" src="/assets/images/analytics/getting-started/analytics-permissions.png" /&gt;
  <figcaption class="bcls-caption--image">權限<span translate="No">分析 API</span>證書</figcaption>
  </figure>

  <p>如果您直接通過OAuth API創建憑據，則所需的權限為：</p>

  <pre class="line-numbers">
  <code class="language-json" translate="No">[
    "video-cloud/analytics/read"
    "video-cloud/video/read"
  ]</code></pre>

  <p>您還需要一個<code translate="No">access_token</code>，這是使用<code translate="No">client_id</code>和<code translate="No">client_secret</code>並在您的 API 請求中傳入 Authorization 標頭：</p>

  <pre class="line-numbers" style="white-space:pre-wrap;padding-top:1em;padding-bottom:1em;">
  <code class="language-http" translate="No">Authorization: Bearer <span class="bcls-input">{access_token}</span></code></pre>

  <p>這<code translate="No">access_token</code>五分鐘後過期，因此您必須為每個請求獲取一個，或者檢查以確保您的令牌仍然有效。看<a href="/oauth/guides/getting-access-tokens.html">獲取訪問令牌</a>有關如何獲取訪問令牌的詳細說明，包括代碼示例。</p>

  <h3 translate="No">接受編碼：gzip（可選）</h3>

  <p>傳遞此標頭將導致響應以壓縮形式返回。這可能會提高大型報表的性能。</p>
  </section>

  <section class="bcls-section">
  <h2 id="Caching">快取</h2>

  <p>出於性能方面的考慮，API響應會緩存大約5分鐘，儘管確切的時間可能會因多種因素而有所不同。對於任何<span translate="No">分析 API</span>查詢，您可以從響應頭中獲取有關緩存的信息：</p>

  <figure class="bcls-figure"><img class="bcls-image" alt="Cache Control Headers" src="/assets/images/analytiics/getting-started/aapi-cach-headers.png" />
  <figcaption class="bcls-caption--image">緩存控制頭</figcaption>
  </figure>

  <p>這<code translate="No">Cache-Control</code>告訴您結果將被緩存的最長時間（以秒為單位）（在上面的示例中為 24 秒）。這<code translate="No">Last-Modified</code>和<code translate="No">Expires</code>標頭告訴您當前緩存何時創建以及何時到期。</p>

  <p>在大多數情況下，這可能不是問題，但是如果分析數據的新鮮度至關重要，則應該知道查詢運行的時間越長，緩存的時間就越長，並且報告僅獲取實時（每小時未對帳）數據只要獲取已對帳數據的數據（僅實時數據或除實時數據外）就不會被緩存。找到<a href="https://studio.support.brightcove.com/analytics/faq-analytics-module.html#26">實時和核對數據的完整解釋</a>如果你喜歡;簡短的版本是<span translate="No">分析 API</span>依賴於兩個數據桶：</p>

  <ul>
    <li>實時或每小時未對帳數據，可立即使用並存儲32天</li>
    <li>對帳數據已永久存儲；對實時數據進行協調以提高準確性，並每24小時將其存儲在協調的數據存儲庫中</li>
  </ul>

  <p>您可以使用<a href="#reconciled">和解了</a>範圍。</p>

  <p>最小化緩存：</p>

  <ul>
    <li>使用<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html#reconciled"><code class="language-http" translate="No">reconciled=false</code></a>將結果限制為實時數據的參數</li>
    <li>使用小<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html#dateRanges">日期範圍</a>，並確保整個範圍都在過去 32 天內</li>
  </ul>
  </section>

  <section class="bcls-section">
  <h2 id="timeouts">超時</h2>

  <p>如果未完成，Analytics API會在8分鐘後請求超時。如果您看到少於8分鐘的超時，則原因是某些客戶端限制。</p>
  </section>

  <section class="bcls-section">
  <h2 id="maximum_items">您最多可以退回的物品</h2>

  <p>可退回的最大項目數為一百萬。在大多數情況下，您不太可能達到上限，但如果您要求提供有關<code translate="No">date</code>例如，可以在較大的時間跨度內進行尺寸標註。如果達到百萬個項目的限制，則需要修改請求以減少返回的項目數。通常，最直接的方法是縮小數據范圍（使用<code translate="No">from</code>和<code translate="No">to</code>參數將在後面討論）。</p>
  </section>

  <section class="bcls-section">
  <h2 id="concurrency">並發請求</h2>

  <p>一個帳戶一次只能有一個請求。多個並發請求將按順序執行。</p>

  <p>例如：</p>

  <ol>
    <li>啟動 API 請求“A”。</li>
    <li>為同一帳戶啟動 API 請求“B”。</li>
    <li>在“A"完成之前，請求“B"將不會完成。</li>
    <li>如果請求“A"花費的時間太長，則請求“A"將收到一條錯誤消息，指出“您的請求未決；請重試"。</li>
    <li>如果請求“A"花費的時間太長，則可能導致請求“B"收到相同的錯誤。請注意，如果完成A + B的時間大於我們的超時值，則請求“B"將收到錯誤消息。</li>
  </ol>

  <p>如果您發出多個並發請求，那麼將按照接收到的順序一次處理一個。</p>

  <p>最終返回“未決錯誤"的請求將完成並保存到我們的緩存中。這意味著未來對相同數據的請求將幾乎立即返回，但前提是該請求是在五分鐘緩存到期之前發出的。</p>

  <p>您的系統應該通過等待 2-4 分鐘並再次發出相同請求來處理未決錯誤。</p>
  </section>

  <section class="bcls-section">
  <h2 id="Best_practices">最佳實務</h2>

  <aside class="bcls-aside bcls-aside--tip">根據以上信息，我們推薦以下最佳實踐：
  <ol>
    <li>向<span translate="No">分析 API</span>如果您的應用程序中的其他操作可以在沒有數據的情況下繼續進行，則異步</li>
    <li>如果響應是自動重試請求<code translate="No">Processing query in background</code></li>
    <li>不要每隔5分鐘重複請求一次，因為無論如何您都將檢索緩存的數據</li>
    <li>如果您要同時或連續快速地發出多個請求，請嘗試最後發出運行時間較長的請求（那些將返回最多項目和數據的請求），以免延誤運行時間較短的請求</li>
  </ol>
  </aside>
  </section>

  <section class="bcls-section">
  <h2 id="requestTypes">請求類型</h2>

  <p>這<span translate="No">分析 API</span>接受三種請求類型</p>

  <dl>
    <dt>數據（也稱為報告）</dt>
    <dd>關於一個或多個的報告<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html" translate="No">方面</a> .報告請求的端點是：
    <pre class="line-numbers" style="white-space:pre-wrap;padding-top:1em;padding-bottom:1em;">
  <code class="language-http" translate="No">https://analytics.api.brightcove.com/v1/data?accounts={account_id(s)}&amp;dimensions={dimensions}</code></pre>
    </dd>
    <dt>參與度報告</dt>
    <dd>過去32天內可獲取的詳細參與度數據。看<a href="#engagement">參與部分</a>更多細節。</dd>
    <dt>視頻信息端點</dt>
    <dd>一條特定的分析數據以最小的延遲提供。看<a href="/analytics/getting-started/overview-video-data-endpoint.html">視頻數據端點</a>想要查詢更多的信息。</dd>
  </dl>

  <p><a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html#filterValues">哪裡過濾器</a>和<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html#dateRanges">日期範圍</a>可以應用於報表。報告請求中可以包含其他詳細信息<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html">這個文件</a>。</p>
  </section>

  <section class="bcls-section">
  <h2 id="metrics">尺寸和領域</h2>

  <p>現在，有關維度和字段的詳細信息位於單獨的文檔中：<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html">尺寸，字段和參數概述</a>。</p>
  </section>

  <section class="bcls-section">
  <h2 id="params">參數</h2>

  <p>有關參數的詳細信息現在位於單獨的文檔中：<a href="/analytics/getting-started/analytics-api-overview-dimensions-fields-and-parameters.html">尺寸，字段和參數概述</a>。</p>
  </section>

  <section class="bcls-section">
  <h2 id="engagement">參與度報告</h2>

  <p>在過去32天內，可以查看詳細的參與度報告，其中顯示了視頻的第100部分的觀看次數（或帳戶或播放器的所有視頻的平均值）。（對過去32天之外的日期範圍的請求將返回錯誤。）</p>

  <aside class="bcls-aside bcls-aside--warning">
  <p>對參與端點的請求有幾個限制：</p>

  <ul>
    <li>報告僅適用於單個帳戶，播放器或視頻</li>
    <li><code translate="No">where</code>不支持過濾器</li>
    <li>唯一支持的參數是<code translate="No">from</code>和<code translate="No">to</code></li>
    <li>如果您提供<code translate="No">from</code>和<code translate="No">to</code>日期格式（MM-DD-YYYY）的值，該報告將反映全天的值</li>
    <li>如果您需要每小時參與度數據，<code translate="No">from</code>和<code translate="No">to</code>值必須以紀元毫秒為單位，該值應在您要報告的小時內</li>
  </ul>
  </aside>

  <h3>帳戶參與度</h3>

  <p>要獲得觀看視頻參與度的平均值，請使用端點：</p>

  <pre class="line-numbers" style="white-space:pre-wrap;padding-top:1em;padding-bottom:1em;">
  <code class="language-http" translate="No">
      https://analytics.api.brightcove.com/v1/engagement/accounts/<em>:account_id</em>
  </code></pre>

  <h3>玩家參與度</h3>

  <p>要獲取在播放器中查看的所有視頻的平均值，請使用端點：</p>

  <pre class="line-numbers" style="white-space:pre-wrap;padding-top:1em;padding-bottom:1em;">
  <code class="language-http" translate="No">
      https://analytics.api.brightcove.com/v1/engagement/accounts/<em>:account_id</em>/players/<em>:player_id</em>
  </code></pre>

  <h3>視頻參與</h3>

  <p>要獲取特定視頻的參與度數據，請使用端點：</p>

  <pre class="line-numbers" style="white-space:pre-wrap;padding-top:1em;padding-bottom:1em;">
  <code class="language-http" translate="No">
      https://analytics.api.brightcove.com/v1/engagement/accounts/<em>:account_id</em>/videos/<em>:video_id</em>
  </code></pre>
  </section>

  <section class="bcls-section">
  <h2 id="live_analytics">實時分析</h2>

  <p>這<span translate="No">分析 API</span>提供兩個端點，用於按時間序列或按事件檢索 Brightcove Live 流的分析。見<a href="/analytics/references/reference.html#tag/Live-Analytics" translate="No">分析 API 參考</a>詳情。</p>
  </section>
  </article>