---
title: '實時 API：插入 ID3 定時元數據'
description: '本主題介紹瞭如何使用 Live API 將 ID3 定時元數據插入到您的直播流中。'
parent: Guides 
grandparent: Live API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
 <summary>{{ page.description }}</summary>
<section class="bcls-section">
<h2 id="Insert_ID3_timed_metadata">概述</h2>

<p>ID3定時元數據用於在特定時間點通過實時流發送數據。要為正在進行的作業插入 ID3 定時元數據，請創建一個<code translate="No">POST </code>請求：</p>

<pre class="line-numbers">
<code class="language-http" translate="No">https://api.bcovlive.io/v1/jobs/<span class="bcls-input">JOB_ID</span>/id3tag
</code></pre>

<h3>示例請求正文</h3>

<pre class="line-numbers">
<code class="language-json" translate="No">{
 "id3_tag": {
 "name": "cp1",
 "value": "Some information I want to send",
   "timecode": "15:50:49:16"
 }
}</code></pre>

<aside class="bcls-aside bcls-aside--warning">筆記：
<ul>
  <li>僅有的<code translate="No">id3_tag</code>對象可以在請求中提交</li>
	<li>如果您使用<code translate="No">timecode </code>屬性，作業僅存儲最新的插入請求</li>
	<li>如果您使用<code translate="No">timecode </code>屬性，編碼器必須通過OnFI發送存儲在tc屬性中的SMPTE格式（HH：MM：SS：FF）時間碼</li>
	<li>Wirecast 和 OBS 等軟件編碼器<strong>不要</strong>支持通過 RTMP 流中的 OnFI 數據包發送時間碼</li>
	<li>基本硬件編碼器<strong>做</strong>支持通過RTMP流中的OnFI數據包發送時間代碼</li>
	<li>ID3v2狀態標籤<code translate="No">name</code>最多4個字符。</li>
	<li><code translate="No">value</code>最多可達256KB。</li>
	<li><code translate="No">Timecode</code>是可選的-省略時，將立即插入。</li>
</ul>
</aside>

<ul>
</ul>

<h3>樣本響應</h3>

<pre class="line-numbers">
<code class="language-json" translate="No">{
"id": "JOB_ID",
"id3_tag": {
"tag_name": "BCOV",
"tag_value": "my value"
}
}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Do_SMPTE_timecodes_exist">輸入中是否存在SMPTE時間碼？</h2>

<p>並非所有編碼器都發送SMPTE時間碼。要檢查它們是否存在於您的輸入中，一種檢查方法是查看 VOD 塊列表中的標籤，例如<code class="language-html" translate="No">#VOD-TIMING:timecode=15:18:36:01,wallclock=1549047672441,tsvideo=25400,tsaudio=-1</code> .vod 塊列表 URL 應該在<code class="language-html" translate="No">output_media_files[0].playback_url_vod</code>當您檢索作業信息時。</p>

<h2 id="Do_SMPTE_timecodes_exist">分析實時播放列表以獲取時間碼</h2>

<p>創建 Brightcove Live 作業時，會返回默認主播放列表。例如：</p>

<pre>
<code class="language-html" translate="No">https://bcovlive-a.akamaihd.net/ade7a7b3aaea4a4d8107fb8bb262381e/eu-central-1/52725330351/playlist.m3u8</code></pre>

<p>我們將需要 VOD 主播放列表，我們需要在 URL 擴展的最後部分添加“_vod”作為<strong>playlist_vod.m3u8</strong></p>

<pre>
<code class="language-html" translate="No">https://bcovlive-a.akamaihd.net/ade7a7b3aaea4a4d8107fb8bb262381e/eu-central-1/52725330351/playlist_vod.m3u8</code></pre>

<p>播放列表將由&nbsp;多個播放/配置文件，如果您“捲曲”播放列表，您將能夠看到播放。例子：</p>

<pre class="line-numbers">
<code class="language-javascript" translate="No">
curl -i "https://bcovlive-a.akamaihd.net/ade7a7b3aaea4a4d8107fb8bb262381e/eu-central-1/52725330351/playlist_vod.m3u8"

#EXTM3U
#EXT-X-VERSION:3
#EXT-X-STREAM-INF:BANDWIDTH=4292608,CODECS="avc1.100.41,mp4a.40.2",RESOLUTION=1920x1080
profile_0/chunklist_vod.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=2654208,CODECS="avc1.100.41,mp4a.40.2",RESOLUTION=1280x720
profile_1/chunklist_vod.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1937408,CODECS="avc1.77.41,mp4a.40.2",RESOLUTION=960x540
profile_2/chunklist_vod.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=1118208,CODECS="avc1.77.31,mp4a.40.2",RESOLUTION=640x360
profile_3/chunklist_vod.m3u8</code></pre>

<p>完整的演繹/配置文件播放列表將&nbsp;看起來像這些“profile_0”和“profile_1”網址：</p>

<pre>
<code class="language-html" translate="No">https://bcovlive-a.akamaihd.net/ade7a7b3aaea4a4d8107fb8bb262381e/eu-central-1/52725330351/profile_0/chunklist_vod.m3u8</code></pre>

<pre>
<code class="language-html" translate="No">https://bcovlive-a.akamaihd.net/ade7a7b3aaea4a4d8107fb8bb262381e/eu-central-1/52725330351/profile_1/chunklist_vod.m3u8</code></pre>

</section>

<section class="bcls-section">
    <ol class="bcls-tasklist-restart">
<p>現在，有一些選項可以查看這些VOD播放列表以檢查時間碼：</p>



    <li>您可以執行“curl”命令。例子：</li>

<pre class="line-numbers">
<code class="language-javascript" translate="No">
curl -i "https://bcovlive-a.akamaihd.net/ade7a7b3aaea4a4d8107fb8bb262381e/eu-central-1/52725330351/profile_0/chunklist_vod.m3u8"
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-TARGETDURATION:8
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-DISCONTINUITY-SEQUENCE:0
#EXT-X-INDEPENDENT-SEGMENTS
#BCOV-RENDITION-DATA-X-STREAM-INF:BANDWIDTH=4292608,RESOLUTION=1920x1080,FRAME-RATE=25.000,CODECS="mp4a.40.2,avc1.100.41"
#VOD-STARTTIMESTAMP:1573207934483
#VOD-MANIFESTSTARTTIME:1573207934483
#VOD-TOTALDELETEDDURATION:0.0
#VOD-FRAMERATE:25.0
#VOD-TIMING:timecode=null,wallclock=1573207934483,tsvideo=3480040,tsaudio=3480007
#EXT-X-PROGRAM-DATE-TIME:2019-11-08T10:12:11.871+00:00
#EXTINF:7.2,
2etzot2c_66e2f8bc56774f4b9a2e26adee46c5b3_media_2.ts
#VOD-TIMING:timecode=null,wallclock=1573207941720,tsvideo=3487240,tsaudio=3487239
#EXT-X-PROGRAM-DATE-TIME:2019-11-08T10:12:19.071+00:00</code></pre>




	
    <li>如果您使用Safari &nbsp;在瀏覽器中，您可以播放主播放列表或塊列表之一。然後，打開開發者網絡選項卡並蒐索“chunklist”。選擇其中之一併查看預覽選項卡。</li>
    <figure class="bcls-figure"><img alt="" class="bcls-image--no-border" width="750" height="400" src="/assets/images/live-api/18758/0.png" /></figure>
	<li>如果您沒有Safari，則可以使用以下版本中的Akamai播放器在其他瀏覽器中應用相同的過程<code class="language-html" translate="No">http://players.akamai.com/hls/</code>。將播放列表加載到Akamai播放器中，然後打開瀏覽器的“網絡"標籤並蒐索“列表"。</li>
	<li>如果您具有代理服務器（例如“Charles"），則原理相同。在Safari或Akamai HLS播放器中播放VOD播放列表之一，然後在代理中過濾結果以查看返回的塊列表之一。</li>
</ol>
</section>
</article>