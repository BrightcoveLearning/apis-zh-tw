---
title: 'Brightcove 現場直播：最佳實踐'
description: '本主題提供了使用 Live API 創建直播流的最佳實踐指南。'
parent: Guides 
grandparent: Live API
---
 <h1>此頁面已移動 - 您將被定向到<a href="https://live.support.brightcove.com/get-started/live-module-guidelines-and-best-practices.html">新地點</a>在 3 秒內。請更新您的書籤！</h1> 
<script type="text/javascript">
var t = setTimeout(function() { window.location.href = 'https://live.support.brightcove.com/get-started/live-module-guidelines-and-best-practices.html'; } , 3000);
</script>

<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>Brightcove Live提供了用於創建實時流事件或24/7實時流的強大服務。本指南概述了優化直播的最佳做法</p>
</section>

<section class="bcls-section">
  <h2 id="Content_context">內容上下文</h2>
  <p>需要考慮流式傳輸的內容類型，因為它會影響保持輸入質量所需的設置。請注意，存在權衡取捨，使用盡可能高的設置可能會導致跳幀等問題。</p>
  <p>根據以下信息，我們建議您在現場活動之前測試不同設置組合的質量和性能。</p>
	<p>下表列出了關鍵的輸入參數：</p>
	<table class="bcls-table">
    <caption class="bcls-caption--table">直播的關鍵輸入參數</caption>
    <thead class="bcls-table__head">
        <tr>
            <th>範圍</th>
            <th>筆記</th>
        </tr>
    </thead>
    <tbody class="bcls-table__body">
        <tr>
            <td>輸入比特率</td>
            <td>編碼器發送的比特率。較高的速率更容易受到網絡損失的影響，因此應盡可能低。</td>
        </tr>
        <tr>
            <td>輸入分辨率</td>
            <td>這應該與源內容相匹配。將此值設置為大於原始源沒有任何好處，並且此值越高，支持它所需的比特率就越高。</td>
        </tr>
        <tr>
            <td>輸入比特率與頂級配置文件的比率</td>
            <td>
              輸入比特率應高於頂級配置文件的速率，但過高可能會導致丟幀或其他問題 - 例如，如果您的最高速率為 1080p 30fps，理想情況下輸入應為 4 MBPS 左右。請注意，這受配置文件的影響。
              <p>如果您需要高比特率的頂級輸出，則值得測試<code>複製視頻</code>設置將簡單地將您的輸入編碼複製到輸出。</p>
            </td>
        </tr>
        <tr>
          <td>個人資料</td>
          <td>
            不同的配置文件（基線、主要、高）按升序壓縮數據（基線：最低，高：最高）。更大的壓縮提高了傳輸速率，但也需要更多的 CPU 資源來解碼數據。除非編碼器在可用資源中受到高度限制，否則應避免使用基線配置文件。另一方面，由於需要增加解碼 CPU 資源，在高比特率下使用高配置更有可能導致跳幀。
            <p>另見<a href="#gop_structure">共和黨結構</a>以下。</p>
          </td>
        </tr>
        <tr>
          <td>影格速率</td>
          <td>
            這應該與來源相匹配。
            <p>更高的速率將需要成比例地更高的輸入比特率，例如對於動作體育內容，60fps 輸入流比 30fps 流攜帶更多的數據。</p>
            <p>60fps 等高速率更可能在高比特率的複雜內容上出現跳幀問題。</p>
          </td>
        </tr>
        <tr>
          <td>關鍵幀率</td>
          <td>
            對此最有效的設置是段持續時間 x 幀速率 - 例如，如果您有 6 秒段和 30fps，使關鍵幀速率 180 (6x30) 將導致最低的解碼器負載。
            <p>但是，為了解決任何波動，這被設置為幀速率的 2 倍 - 例如，對於 30 fps 的幀速率，設置為 60。</p>
          </td>
        </tr>
        <tr>
          <td>共和黨結構</td>
          <td>看<a href="#gop_structure">共和黨結構</a>以下。</td>
        </tr>
    </tbody>
</table>
</section>

<section class="bcls-section">
  <h2 id="Key_issues">流媒體的關鍵問題</h2>
  <p>通常會遇到幾個與從編碼器到 Brightcove 的流媒體體驗問題相關的問題：</p>
  <ol>
    <li>
      影響輸入的網絡不穩定：
      <ol>
        <li>雖然互聯網通常非常可靠，但它並非萬無一失，問題確實會發生。更高的比特率更容易引起問題。</li>
        <li>如果上傳視頻的時間比實時時間長，那麼這可能會導致輸入漂移（接收視頻的時間比發送視頻的時間要晚得多）</li>
      </ol>
    </li>
    <li>
      轉碼器過載導致跳幀：雖然我們盡一切努力確保我們的轉碼器有足夠的開銷，但有時內容複雜性、網絡故障/追趕或其他對我們的轉碼器的中斷的突然峰值都可能導致跳幀。輸入越複雜，遇到跳幀的可能性就越大。還存在一個已知問題，即在較長的持續時間內（例如超過 5 分鐘）從靜止圖像進行更改以及突然更改動作內容可能會導致過載。
    </li>
    <li>編碼器發送可變幀持續時間：幀速率應該是恆定的，並且應該允許關鍵幀間隔是恆定的。例如，對於諸如 29.97 aka 30000/1001 或 23.976 aka 24000/1001 之類的幀速率，不可能以固定間隔設置關鍵幀，因此應避免這樣做。</li>
    <li>編碼器發送持續時間不一致的關鍵幀，關鍵幀速率應至少為幀速率的 2 倍（以秒為單位）。例如，對於 30fps 的幀速率，關鍵幀間隔應為 60 幀，即 2 秒，並且每段的最大間隔應為一次 - 例如，如果您有 6 秒的段，則最大間隔為 180 幀30 幀/秒</li>
  </ol>
</section>

<section class="bcls-section">
  <h2 id="Content_types">內容類型</h2>
  <p>通常，更複雜的內容將需要使用這些設置中的較高值，因此更容易出現跳幀。下表按複雜程度顯示了一些示例。請注意，這些只是示例，因為幾乎每個編碼器設置都不同。應進行測試和驗證。</p>
  <table class="bcls-table">
    <caption class="bcls-caption--table">內容類型示例</caption>
    <thead class="bcls-table__head">
        <tr>
            <th>內容類型</th>
            <th>範例設定</th>
        </tr>
    </thead>
    <tbody class="bcls-table__body">
        <tr>
            <td>攝像頭</td>
            <td>
              <ul>
                <li>解析度：360p</li>
                <li>比特率：1兆每秒</li>
                <li>輪廓：基線</li>
              </ul>
            </td>
        </tr>
        <tr>
            <td>網絡會議</td>
            <td>
              <ul>
                <li>解析度：480p</li>
                <li>比特率：2.5 兆每秒</li>
                <li>輪廓：主要的</li>
              </ul>
            </td>
        </tr>
        <tr>
            <td>動畫片</td>
            <td>
              <ul>
                <li>解析度：720p</li>
                <li>比特率：2.5 兆每秒</li>
                <li>輪廓：主要的</li>
              </ul>
            </td>
        </tr>
        <tr>
            <td>說話的頭 / 新聞</td>
            <td>
              <ul>
                <li>解析度：720p</li>
                <li>比特率：4兆每秒</li>
                <li>輪廓：主要的</li>
              </ul>
            </td>
        </tr>
        <tr>
            <td>現場音樂會</td>
            <td>
              <ul>
                <li>解析度：1080p（或源）</li>
                <li>比特率：5兆每秒</li>
                <li>輪廓：高的</li>
              </ul>
            </td>
        </tr>
        <tr>
            <td>體育直播</td>
            <td>
              <ul>
                <li>解析度：1080p（或源）</li>
                <li>比特率：6兆每秒</li>
                <li>輪廓：高的</li>
              </ul>
            </td>
        </tr>
        <tr>
            <td>現場體育高 FPS</td>
            <td>
              <ul>
                <li>解析度：1080p（或源）</li>
                <li>比特率：10兆每秒</li>
                <li>輪廓：高的</li>
              </ul>
            </td>
        </tr>
    </tbody>
</table>
</section>

<section class="bcls-section">
  <h2 id="verification">驗證和測試</h2>
  <p>理想情況下，客戶應該從最複雜（變化最大的內容）的盡可能低的設置開始，然後通過增加各種設置來測試他們的內容，直到輸出可接受。這是因為通常設置越高，在網絡或轉碼中遇到問題的可能性就越大。</p>
</section>

<section class="bcls-section">
  <h2 id="gop_structure">共和黨結構</h2>
  <p>視頻的圖片組 (GOP) 結構首先取決於用作的配置文件：</p>
  <ol>
    <li><strong>基線</strong> profile 僅支持 I 和 P 幀和 CAVLC 熵編碼</li>
    <li><strong>主要的</strong>和<strong>高的</strong>支持 I、B、P 幀和 CABAC 熵編碼</li>
  </ol>
  <p>Main 和 High 配置文件通常會以更好的質量實現更好的壓縮，但也需要額外的計算來編碼和解碼，因此可能更容易受到跳幀的影響。此外，由於這些配置文件使用 B（雙向）幀，它們會在編碼過程中引起一些延遲。</p>
  <p>基線配置文件需要較少的 CPU 來編碼和解碼，但由於它提供的壓縮較少，因此需要更高的比特率來保持質量，因此更容易受到網絡問題的影響。</p>
  <h3>關於幀類型及其對性能的可能影響的說明：</h3>
  <ol>
    <li><strong>我幀</strong> : 使用最多的帶寬。最好為完整的場景更改或在片段邊界添加 - 即內容更改越多，您需要的越多（GOP 長度越短）</li>
    <li><strong>P幀</strong> : 是 I 幀之間的基本單位</li>
    <li><strong>B幀</strong> : 使用先前和未來的幀，添加的越多壓縮效果越好，但 CPU 和延遲越高</li>
  </ol>
  <p>指某東西的用途<strong>我幀</strong>理想情況下應僅限於片段的開始（如果使用直通則至關重要）或場景更改。應避免使用全部或大量 I 幀，因為這會導致負載過大導致跳幀。</p>
  <h3>補充說明：</h3>
  <ul>
    <li>使用防止關鍵幀密集放置的選項（例如：<code> min_keyin</code> = 3+）。</li>
    <li>使用確保關鍵幀插入節奏的選項。例如，不是以秒為單位指定 GOP 長度，而是以精確的分數或幀指定它。</li>
  </ul>
</section>

<section class="bcls-section">
  <h2 id="bitrate">比特率</h2>
  <ul>
    <li>最小輸入帶寬：2.5 mbps</li>
    <li>最大輸入帶寬：10 mbps</li>
  </ul>
  
  <ul>
    <li>使流“幾乎 CBR”- 與<code>最大比特率</code> = 1.1 * 目標比特率。</li>
    <li>如果可用，請使用嚴格符合 HRD 的速率控制模式。</li>
  </ul>
</section>

<section class="bcls-section">
  <h2 id="Protocol">協議</h2>
  <p>需要注意的是，互聯網並不是一個有保證的交付網絡，雖然互聯網連接可能被認為是“良好”的，但它可能不足以提供可靠的高質量實時視頻流。客戶編碼器和 Brightcove 轉碼平台之間路徑的小中斷（例如 ISP 的少量擁塞、路由器之間的計劃外故障切換或類似問題）都可能導致視頻輸出中斷。在高風險的現場直播中，通常的做法是擁有多個專用網絡，包括專用光纖、預定衛星帶寬或託管網絡上的承諾帶寬。這帶來了巨大的成本，並且在大多數情況下，可以通過互聯網獲得足夠好的結果。但是，如果保持無故障傳輸至關重要，請考慮 AWS Direct Connect 或可以提供某種程度的專用帶寬的 ISP。</p>
  <p>我們推薦的選項是（按順序）：</p>
  <ol>
    <li><strong>SRT</strong> - 提供傳輸速度 (UDP) 與一些控制和錯誤恢復能力的良好組合。並非在所有編碼器上都可用，但有一些工具可以從本地 RTP 進行轉換，例如 srt-transmit。</li>
    <li><strong>RTMP</strong> - 基於 TCP，它提供了良好的錯誤恢復能力，缺點是這會帶來大量開銷。請注意，並非所有功能（例如多音軌）都可用於 RTMP。</li>
    <li><strong>RTP-FEC</strong> - 提供基於 UDP 的快速傳輸，具有一定的錯誤恢復能力</li>
    <li><strong>實時傳輸協議</strong> - 提供快速傳輸和高級功能，沒有錯誤恢復能力</li>
  </ol>
  <aside class="bcls-aside bcls-aside--information">注意：如果您使用 RTMP，請盡可能考慮禁用切片，因為它們可能導致部分幀無序到達。</aside>
</section>

<section class="bcls-section">
<h2 id="Certified_encoders">支持的編碼器</h2>

<p>看<a href="https://live.support.brightcove.com/general/supported-encoders-live-events.html">現場活動支持的編碼器</a>有關已知可與 Live 一起使用的編碼器列表。請注意，其他編碼器也可以使用，但尚未經過測試。</p>
</section>

<section class="bcls-section">
<h2 id="Supported_CDNs">支持的 CDN</h2>

<ul>
	<li>赤舞</li>
	<li>亞馬遜CloudFront</li>
</ul>

<aside class="bcls-aside bcls-aside--information">上面的 CDN 得到官方支持，但其他基於文件的 CDN 應該可以工作。</aside>

</section>

<section class="bcls-section">
<h2 id="retries">重試</h2>

<p>我們建議為來自編碼器的 RTMP 連接啟用重試。重試間隔為5秒的大量重試將減輕編碼器和入口點之間的任何間歇性連接問題。</p>
</section>

<section class="bcls-section">
<h2 id="job_settings">作業設定</h2>

<p>推薦的工作設置</p>

<table class="bcls-table">
	<caption class="bcls-caption--table">作業設置</caption>
	<thead class="bcls-table__head">
		<tr>
			<th>場地</th>
			<th>推薦值</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">ad_audio_loudness_level</code></td>
			<td><code translate="No">-23 </code>（EBU R.128標準）</td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="input_requirements">輸入要求</h2>

<p>下表顯示了輸入直播流的要求。</p>

<table class="bcls-table">
	<caption class="bcls-caption--table">輸入要求</caption>
	<thead class="bcls-table__head">
		<tr>
			<th>物品</th>
			<th>要求</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>協議</td>
			<td><code translate="No">rtmp</code> , <code translate="No">rpt</code> , <code translate="No">rtp-fec</code>， 或者<code translate="No">srt</code>（所有除了<code translate="No">rtmp</code>用於 MPEG2-TS 輸入）<sup><strong><a href="#note1-1">  [ 1-1] </a></strong>  </sup></td>
		</tr>
		<tr>
			<td>視頻格式</td>
			<td>h.264</td>
		</tr>
		<tr>
			<td>音訊格式</td>
			<td>AAC</td>
		</tr>
		<tr>
			<td>最大音頻採樣率</td>
			<td>高達 48000 Hz（Brightcove 支持可以根據要求增加此值）</td>
		</tr>
		<tr>
			<td>解析度</td>
			<td>高達 1080p（寬度：1920 像素；高度：1080 像素）</td>
		</tr>
		<tr>
			<td>比特率</td>
			<td>必須至少與最高輸出比特率-最大一樣高：10MBPS。
			<p>在幾乎所有情況下，Brightcove支持人員都發現對輸入流使用恆定比特率可以大大減少出現問題的機會。</p>
			</td>
		</tr>
		<tr>
			<td>幀率</td>
			<td>30 fps（您可以提交<a href="https://supportportal.brightcove.com/s/login/?language=en_US">支援要求</a>將限制提高到60fps）</td>
		</tr>
		<tr>
			<td>切片</td>
			<td>如果您的編碼器有此選項，請將其設置為<code translate="no">1</code></td>
		</tr>
	</tbody>
</table>

<h3>筆記</h3>

<ul>
	<li id="note1-1"><sup><strong>  [ 1-1] </strong>  </sup> 如果您的 TS 輸入中有多個視頻/音頻軌道，我們將為每個軌道選擇第一個。我們還強烈建議使用 FEC，因為 Internet 上的 UDP 上的普通 TS 非常不可靠。對於 FEC，我們可以注意到 <em>較小</em> 您用於行/列的值，糾錯將越可靠（以增加帶寬為代價。</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="slate_source_file_recommendations">Slate 源文件推薦</h2>

<ul>
	<li><strong>解析度</strong>：（在您的編碼階梯中最好）</li>
	<li><strong>第一人稱射擊</strong>：（與您的來源相同）</li>
	<li><strong>比特率</strong>：（最好在您的編碼階梯中或更佳）</li>
	<li><strong>聲音的</strong>：（相同的比特率，通道，採樣頻率和每個樣本的比特作為最佳再現，或與您的輸入相同）</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="output_recommendations" class="bcls-section">輸出建議</h2>

<p>以下是建議的輸出設置，但請注意，對於許多編碼器，RTMP輸入被限制為10 MBPS（視頻+音頻）和30fps的幀速率。</p>

<table class="bcls-table">
	<caption class="bcls-caption--table">輸出建議</caption>
	<thead class="bcls-table__head">
		<tr>
			<th>物品</th>
			<th>推薦</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>視頻編解碼器</td>
			<td><code translate="No">h264</code>是目前唯一的選擇</td>
		</tr>
		<tr>
			<td>音頻編解碼器</td>
			<td><code translate="No">aac</code>是目前唯一的選擇</td>
		</tr>
		<tr>
			<td>寬度</td>
			<td>如果不<code translate="No">width</code>或者<code translate="No">height</code>提供時，將使用源尺寸。如果有<code translate="No">width</code>或者<code translate="No">height</code>如果提供，則將計算其他尺寸以保持光源的寬高比。</td>
		</tr>
		<tr>
			<td>高度</td>
			<td>如果不<code translate="No">width</code>或者<code translate="No">height</code>提供時，將使用源尺寸。如果有<code translate="No">width</code>或者<code translate="No">height</code>如果提供，則將計算其他尺寸以保持光源的寬高比。</td>
		</tr>
		<tr>
			<td>比特率</td>
			<td>小於或等於輸入比特率</td>
		</tr>
		<tr>
			<td>關鍵幀率</td>
			<td>2秒</td>
		</tr>
	</tbody>
</table>
</section>

<section id="AWS_regions">AWS區域
<p>見<a href="/live-api/getting-started/overview-brightcove-live-api.html#Support_aws_regions">實時 API 概覽</a> .</p>
</section>

<section class="bcls-section">
<h2 id="FAQ">常問問題</h2>

<dl>
	<dt class="bcls-question">創建現場作業後，您必須多久才能開始流式傳輸？</dt>
	<dd class="bcls-answer">在Brightcove Live中，當狀態從<code translate="No">waiting </code>至<code translate="No">finishing </code>：
	<ol>
		<li>如果工作在<strong>等待</strong>狀態（尚未開始）和<code translate="No">max_waiting_time_ms</code>已過去，作業已完成/已停用。</li>
		<li>如果工作在<strong>斷開連接</strong>狀態（已啟動，但已斷開連接），並且<code translate="No">reconnect_time</code>已過去，作業已完成/已停用。</li>
	</ol>

	<p>如果<code translate="No">event_length </code>大於30分鐘，作業將在30分鐘後終止。如果<code translate="No">event_length </code>少於30分鐘，作業將在<code translate="No">event_length </code>。</p>

	<p>例如，如果<code translate="No">event_length </code>是60分鐘，那麼實時作業將在30分鐘後終止。如果<code translate="No">event_length </code>是15分鐘，那麼實時作業將在15分鐘後終止</p>

	<p>這<code translate="No">reconnect_time </code>對等待狀態沒有影響。</p>
	</dd>
	<dt class="bcls-question">並發直播 job_settings 有哪些限制？</dt>
	<dd class="bcls-answer">
	<p>最多5個活動<strong>等待，未開始</strong>任何時候都允許工作。</p>

	<p>並發作業的其他限制：</p>

	<ul>
		<li>的數量<code translate="No">channel</code> (24x7) 作業限制為每個區域 0 個或少量（取決於帳戶類型）。</li>
		<li>並發數<strong>跑步</strong><code translate="No">event</code>工作受地區限制，一般為 100 個。</li>
		<li>並發數<strong>等待連接</strong><code translate="No">event</code>工作僅限於 5 個。</li>
		<li>每個區域的 SEP 作業數量限制為 3 或 10（請參閱<a href="/live-api/getting-started/overview-brightcove-live-api.html#Support_aws_regions">支持的 AWS 區域</a>）。</li>
	</ul>

	<p>支持可以在帳戶級別上調整這些限制中的任何一個。如果您需要更多容量，請聯繫您的客戶經理。</p>
	</dd>
	<dt class="bcls-question">如果輸入帶寬足夠，Brightcove Live是否可以推動1080p質量？</dt>
	<dd class="bcls-answer">是的，所有帳戶都啟用了 1080p 輸入。</dd>
	<dt class="bcls-question">可以使用DRM嗎？</dt>
	<dd class="bcls-answer">是的！如果您有興趣向真實帳戶添加DRM支持，請與您的客戶經理聯繫。</dd>
</dl>
</section>
</article>