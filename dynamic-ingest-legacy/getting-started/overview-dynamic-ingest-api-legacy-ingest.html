---
title: '概述：動態攝取 API'
description: '<p>在本主題中，您將學習如何使用<span translate="No">動態攝取 API</span>上傳和管理視頻內容。 </p>
<aside class="bcls-aside bcls-aside--information">請注意，此概述適用於具有<strong>遺留攝取系統</strong> .如果您有一個新的 Video Cloud 帳戶，或已將您的帳戶轉換為<strong>動態交付</strong>， 去<a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">這個頁面代替</a> . </aside>'
parent: 'Getting Started' 
grandparent: <span translate="No">動態攝取 API</span>傳統佈局：登台--- <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="API_functionality">API功能</h2>

    <p>Brightcove的動態提取（DI）API基於功能，在該功能中，從客戶的存儲位置下載了視頻源文件，並創建了源文件的指定格式。（還有一個選項<a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">上傳您的源文件</a>到Dynamic Ingest可以訪問它們的臨時位置。）該平台以雲為中心，分佈於全球，基於現代實踐，可提供一流的一致性和速度。</p>

    <aside class="bcls-aside bcls-aside--information">注意：對於分段視頻類型（HLS 和 DASH），某些播放器不處理音頻和視頻流長度相差超過分段持續時間的情況。如果遇到這種情況，請嘗試使用較短的段長度。</aside>
    </section>

    <section class="bcls-section">
    <h2 id="workflowoverview">工作流程概述</h2>

    <p>在媒體的整體轉碼和存儲中使用了許多系統/技術。他們是：</p>

    <ul>
      <li><strong>內容管理系統（CMS）API</strong>：創建用於DI API的視頻對象</li>
      <li><strong>編碼器</strong>：對視頻進行轉碼以創建多個再現</li>
      <li><strong>亞馬遜S3</strong>：根據配置文件設置將母版和演繹圖移到存儲中</li>
      <li><strong>目錄</strong>：存儲與視頻相關的必要信息</li>
    </ul>

    <p>初始轉碼後，您可以在媒體上執行以下操作：</p>

    <ul><!-- the following item on hold indefinitely --><!-- <li><strong>Delete</strong>: Delete, when needed, the master or all items</li> -->
      <li><strong>重新轉碼</strong>：存在master時創建新的演繹（如果不存在master則出錯）</li>
      <li><strong>代替</strong>：指向新的母版，或替換現有的母版</li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="operations">運作方式</h2>

    <p>當您使用 DI API 時，您將執行不同的操作，例如讀取攝取配置文件和將攝取信息寫入您的帳戶。以下是 DI 任務所需操作的完整列表：</p>

    <ul>
      <li>視頻雲/視頻/創建</li>
      <li>視頻雲/視頻/閱讀</li>
      <!-- for adding images -->
      <li>視頻雲/視頻/更新</li>
      <li>視頻雲/攝取配置文件/配置文件/讀取</li>
      <li>視頻雲/攝取配置文件/帳戶/讀取</li>
      <li>視頻雲/攝取配置文件/帳戶/寫入</li>
      <li>視頻雲/攝取配置文件/配置文件/寫入</li>
      <li>視頻雲/上傳網址/閱讀</li>
    </ul>

    <p>要獲取客戶端憑據，請使用 Studio <a href="/general/managing-api-authentication-credentials.html">管理工具</a>或查看以下文件之一：</p>

    <ul>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth：使用CURL獲取客戶端憑據</a></li>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth：使用郵遞員獲取客戶憑證</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="best_practices">最佳實務</h2>

    <aside class="bcls-aside bcls-aside--tip">
    <ul>
      <li>每個帳戶每秒 20 個請求的限制，用於跨 DI 和<span translate="No">內容管理系統 API</span>（CMS API 或攝取 API 請求）</li>
      <li>每個帳戶最多可以有100個並發DI作業（對於將大量帳戶轉換為的請求，還有其他選項<a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">動態投放</a>）</li>
      <li>攝取小於每個文件100GB的內容（如果您需要攝取較大的文件，請聯繫您的客戶經理）</li>
      <li>如果要分批提取文件，請將並發普通優先級作業限制為100，並等待一項作業完成處理，然後再添加另一項</li>
      <li>在攝取完整批次之前驗證攝取配置文件更改</li>
      <li>你應該<strong>不是</strong>為同一資產處理重複的作業。在這種情況下，資產定義為視頻對象，特定語言的音頻軌道，特定語言的文本軌道或特定圖像類型。這裡有一些例子來說明這一點：
      <ul>
        <li>不可接受：提交視頻文件的攝取請求，然後在第一個攝取作業完成之前提交具有相同視頻 ID 的另一個視頻攝取請求</li>
        <li>可接受的：提交視頻文件的攝取請求，然後提交與相同視頻 ID 關聯的英文文本軌道的攝取請求，然後提交具有相同視頻 ID 的縮略圖圖像的攝取請求</li>
        <li>可接受的：提交英語文本軌道的攝取作業，然後同時提交西班牙語文本軌道的攝取請求</li>
        <li>不可接受：提交攝取西班牙音軌的請求，然後立即提交攝取同一視頻 ID 上的另一個西班牙音軌的請求</li>
      </ul>
      </li>
      <li>這<code translate="No">profile </code>攝取請求的字段是<strong>可選的</strong> .避免硬編碼<code translate="No">profile </code>在應用和集成中-而是將最常用的配置文件設置為<strong>默認</strong>該帳戶，並忽略該字段，或者<a href="/ingest-profiles/references/reference.html#api-Profile-Get_All_Ingest_Profiles">獲取該帳戶的可用配置文件</a>並強迫用戶選擇一個。</li>
    </ul>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="sourceLocations">有效的來源位置</h2>

    <p>Dynamic Ingest可以從以下來源提取源視頻文件：HTTP / HTTPS或S3-帶有或不帶有身份驗證</p>

    <p>例子：</p>

    <ul>
      <li>http://example.com/path/to/input.avi</li>
      <li>https://dl.dropboxusercontent.com/u/3641457/Bird_Titmouse.mp4</li>
      <li>s3://my-bucket/video.mp4</li>
    </ul>

    <aside class="bcls-aside bcls-aside--information">筆記：
    <ul>
      <li>視頻文件名（包括擴展名）不得超過 120 個單字節（60 個雙字節）字符。如果是的話，視頻將被成功提取，但是以後您將無法重新對其進行轉碼</li>
      <li>根據IETF規範，主機名（用於文件位置或回調URL）不得包含下劃線字符或某些其他標點符號或特殊字符。看<a href="https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames">這篇維基百科文章</a>想要查詢更多的信息。如果主機名不符合IETF標準，將返回錯誤。</li>
      <li>動態攝取可以<strong>不是</strong>提取託管在Google雲端硬盤上的文件，因為Google雲端硬盤不會生成指向視頻文件的直接鏈接。</li>
    </ul>
    </aside>

    <h3>關於S3的注意事項</h3>

    <p>如果您的視頻位於受保護的S3存儲桶中，請參見<a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html">在S3上使用動態提取</a>有關如何設置“動態提取"訪問文件權限的詳細信息。</p>

    <p>使用基於拉取的攝取的優點包括更簡單的工作流程和擁有您自己的數字母版的存儲庫。但是，如果這不是您的選擇，則也可以使用<a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">源文件上傳</a>將您的視頻和其他資產上傳到Dynamic Ingest可以從中訪問它們的臨時位置。</p>
    </section>

    <section class="bcls-section">
    <h2 id="Source_file_names">源文件名</h2>

    <p>所有輸入網址必鬚根據以下內容正確地進行網址編碼<a href="https://tools.ietf.org/html/rfc3986#section-2.1">RFC 3986</a>當發送到Brightcove時。這意味著任何<a href="https://tools.ietf.org/html/rfc3986#section-2.2">保留字符</a>在 url 路徑中找到的百分比編碼（空格被編碼為<code translate="No">%20</code> )，並且在 url 查詢中找到的任何保留字符都是百分比編碼的（空格被編碼為<code translate="No">+</code>或者<code translate="No">%20</code>， 和<code translate="No">+</code>被編碼為<code translate="No">%2B</code>）。</p>

    <p>一種<strong>預先簽署</strong> S3 ( <strong> v2</strong>包含 <em>簽名</em>， <em>過期</em> 和 <em>AWS 訪問密鑰 ID</em>， 和<strong>v4</strong>包含 <em>X-Amz-算法</em>， <em>X-Amz-Credential</em>， <em>X-Amz-日期</em>， <em>X-Amz-到期</em>， <em>X-Amz-SignedHeaders</em>， 和 <em>X-Amz-簽名</em>） 或者<strong>地面控制系統</strong>（包含 <em>簽名</em>， <em>過期</em>， 和 <em>谷歌訪問 ID</em>) url 應該已經正確編碼並且<strong>可以按原樣使用</strong> .</p>

    <aside class="bcls-aside bcls-aside--tip">注意雙字節unicode字符<strong>是</strong>文件名中允許。</aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingestingVideos">攝取視頻</h2>

    <p>攝取視頻需要兩個 API 調用：</p>

    <ol>
      <li>打電話給<span translate="No">內容管理系統 API</span>在視頻雲系統中創建視頻對象並獲取其id</li>
      <li>調用DI API以提供視頻源文件的URL並指定<a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">攝取個人資料</a>要使用的</li>
    </ol>

    <p>一組基本請求示例如下所示：</p>

    <h3>CMS API請求</h3>

    <dl>
      <dt>HTTP方法</dt>
      <dd>郵政</dd>
      <dt>要求網址</dt>
      <dd>https://cms.api.brightcove.com/v1/accounts/ {account_id} /視頻</dd>
      <dt>要求正文</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "name": "My new video"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <p>響應數據將包括視頻<code translate="No">id </code>，在下一個請求中使用。</p>

    <h3>提取API請求</h3>

    <dl>
      <dt>HTTP方法</dt>
      <dd>郵政</dd>
      <dt>要求網址</dt>
      <dd>https://ingest.api.brightcove.com/v1/accounts/ {account_id} /影片/ {video_id} /攝取請求</dd>
      <dt>要求正文</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "master": {
    "url": "http://host/master.mp4"
    },
    "profile": "high-resolution"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <p>見<a href="/dynamic-ingest/getting-started/overview-dynamic-ingest-api-dynamic-delivery.html">快速開始</a>有關 API 調用的詳細信息，您還可以查看<a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-ingesting-videos-legacy-ingest.html">工作樣本</a> .</p>

    <p>為了<span translate="No">內容管理系統 API</span>調用在視頻雲系統中創建視頻，請參閱<a href="/cms/getting-started/overview-cms-api.html#settingvalues">CMS API 概述</a> .請注意，視頻<code translate="No">name </code>是必需的，並且名稱和視頻元數據中包含的任何其他字符串（例如<code translate="No">description </code>）<strong>必須使用URI編碼</strong>。</p>
    </section>

    <section class="bcls-section">
    <h2 id="sampleAssets">示例資產</h2>

    <p>Brightcove學習服務提供了一些示例資產，您可以在使用Dynamic Ingest時進行實驗。這些資產包括多種語言的短視頻、圖像和 WebVTT 字幕：</p>

    <ul>
      <li><a href="//solutions.brightcove.com/bcls/assets/videos/">視頻</a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/images/">圖片</a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/vtt/">WebVTT 字幕</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="replaceVideo">替換視頻</h2>

    <p>要將視頻替換為新版本或一組新節目，<span translate="No">動態攝取 API</span> call 與它的調用完全相同<a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-ingesting-videos-legacy-ingest.html">攝取新視頻</a> - 唯一的區別是您無需事先致電<span translate="No">內容管理系統 API</span>在 Video Cloud 系統中創建視頻對象並為其獲取 id。如果指定URL上的源視頻文件與原始攝取的源視頻文件相同，則您將僅獲得一組新的格式。如果源文件是新文件，則將替換現有視頻。在重新轉碼完成之前，所有視頻都可以使用現有的副本播放。</p>

    <p>見<a href="/dynamic-ingest-legacy/code-samples/dynamic-ingest-api-sample-re-transcoding-videos-legacy-ingest.html">工作樣本在這裡</a> .</p>
    </section>

    <section class="bcls-section">
    <h2 id="retranscode">重新轉換視頻</h2>

    <p>如果你選擇<a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">存檔大師</a>當您通過<span translate="No">動態攝取 API</span>或 Studio 上傳模塊，然後您還可以從母版重新轉碼視頻。同樣，提取請求的URL將相同，但是請求正文將具有以下內容：</p>

    <pre class="line-numbers">
    <code class="language-javascript" translate="No">// request
    POST /v1/accounts/{account_id}/videos/{video_id}/ingest-requests
    // request body
    {
    "master": { <strong><em>"use_archived_master": true</em></strong> },
    "profile": "videocloud-default-v1"
    }
    </code>
    </pre>

    <aside class="bcls-aside bcls-aside--information">
    <p>筆記：</p>

    <ul>
      <li>如果母版未存檔，或者視頻已 <em>不是</em> 使用<span translate="No">動態攝取 API</span>或上傳模塊，您將收到錯誤</li>
      <li>推薦的標準攝取配置文件（videocloud-default-v1、screencast-1280、高分辨率、智能播放器轉換、單比特率標準和單比特率高）都將存檔母版。如果您使用的是自定義提取配置文件，則必須<a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">指定那個主人</a>如果您希望以後能夠從主服務器進行重新轉碼，則應將其存檔。</li>
      <li>主人是<strong>絕不</strong>在重新轉碼期間修改</li>
      <li>存檔和分發母版的設置是<strong>絕不</strong>在重新轉碼期間修改</li>
      <li>已知問題：使用“動態提取"對視頻進行重新轉碼時，視頻的激活日期將更新為當前日期。如果您使用按激活日期排序的智能播放列表，這將影響播放列表中視頻的順序。</li>
    </ul>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="capture-images">影像</h2>

    <p>您可以使用<span translate="No">動態攝取 API</span>從您的視頻中捕獲海報和縮略圖圖像，或添加您自己的圖像。有關詳細信息，請參見<a href="/dynamic-ingest/ingest-guides/images-and-dynamic-ingest-api.html">圖片和Dynamic Ingest API</a>。</p>

    <aside class="bcls-aside bcls-aside--information">如果您的圖像將從受保護的 S3 存儲桶中提取，您將需要設置存儲桶策略以允許 Video Cloud 訪問文件。看<a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html#setPolicy">在 S3 中使用動態攝取</a>詳情。</aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingest_captions">攝取字幕</h2>

    <p>您還可以將 WebVTT 字幕添加到您的視頻中，或使用 Dynamic Ingest 為現有視頻上傳它們。有關詳細信息，請參見<a href="/dynamic-ingest/ingest-guides/ingesting-webvtt-files-text-trackscaptions.html">攝取WebVTT文件</a>。</p>

    <aside class="bcls-aside bcls-aside--information">
    <p>筆記：</p>

    <ol>
      <li>對於圖像和文本軌道，僅支持公共HTTP或HTTPS URL或簽名的S3 URL</li>
      <li>對於文本軌道，Dynamic Ingest 只會將它們添加/附加到視頻的 vtt 列表中，即使它是重新轉碼請求。客戶應使用<span translate="No">內容管理系統 API</span>管理它們（更新/刪除）</li>
      <li>動態提取一次最多接受100條文本軌道</li>
      <li>不支持mime_type</li>
    </ol>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="drm">DRM和HLSe</h2>

    <p>Dynamic Ingest可處理使用Brightcove支持的任何DRM類型的視頻。還支持HLSe。</p>
    </section>

    <section class="bcls-section">
    <h2 id="archiving">存檔渲染</h2>

    <p>默認情況下，所有視頻和圖像片段都會自動存檔。如果您想關閉移交存檔，<a href="https://supportportal.brightcove.com/">聯繫Brightcove支持</a>。注意<a href="/ingest-profiles/guides/archiving-masters.html">數字大師</a>如果在攝取配置文件中指定，則將存檔。</p>
    </section>

    <section class="bcls-section">
    <h2 id="notifications">通知 </h2>

    <p>您可以指定一個或多個回調 URL 來接收攝取過程結果的通知。您指定的 URL 應該用於可以接受 POST 請求的應用程序。通知將以JSON格式發送。</p>

    <p>有關接收和解釋通知的詳細信息，請參見<a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">通知：動態提取和CMS API</a></p>
    </section>
    </article>