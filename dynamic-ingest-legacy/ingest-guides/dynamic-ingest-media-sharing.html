---
title: '具有媒體共享的動態攝取'
description: '要共享使用 Dynamic Ingest 創建的視頻，<span translate="No">內容管理系統 API</span>用來。共享帳戶必須啟用媒體共享 - 聯繫 Brightcove 支持以驗證這一點。視頻分享<span translate="No">內容管理系統 API</span>可以在轉碼完成之前提出請求。'
parent: 
grandparent: Dynamic Ingest API
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="introduction">介紹</h2>
    
    <p>本指南的動態攝取部分與其他文檔和示例中討論的過程沒有什麼不同，也可以使用 Studio 中的上傳模塊來攝取視頻。但是，為了完整起見，<a href="https://general.support.brightcove.com/developer/concepts-set-curl.html">捲曲</a>這裡給出了所有三個步驟的示例：</p>
    
    <ol>
      <li><a href="#Create_video">建立影片</a></li>
      <li><a href="#Create_the_ingest_request">創建提取請求</a></li>
      <li><a href="#Share_video_with_CMS_API">使用 CMS API 共享視頻</a></li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="Authentication">驗證</h2>
    
    <p>本主題中描述的所有請求都需要通過以下方式進行身份驗證：<a href="/oauth/index.html"> Brightcove OAuth系統</a>。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_video">建立影片</h2>
    
    <p>Video Cloud 系統中的視頻對像是使用<a href="/cms/references/reference.html#api-videoGroup-Create_Video">內容管理系統 API</a> .這是一個curl示例：</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">curl --request POST \
      --url https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">MASTER_ACCOUNT_ID</span>/videos \
      --header 'authorization: Bearer OAUTH_TOKEN' \
      --header 'content-type: application/json' \
      --data '{"name": "Video to be shared"}'</code></pre>
    
    <p>返回的 JSON 將包含新的視頻 ID：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": "VIDEO_ID",
      "account_id": "ACCOUNT_ID",
      ...
    }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_the_ingest_request">創建提取請求</h2>
    
    <p>然後可以使用<a href="/dynamic-ingest/references/reference.html#api-Ingest-Ingest_Media_Asset">動態攝取 API</a>從返回的視頻 ID <span translate="No">內容管理系統 API</span>要求。這是請求的curl示例：</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">curl --request POST \
      --url https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">MASTER_ACCOUNT_ID</span>/videos/<span class="bcls-input">VIDEO_ID</span>/ingest-requests \
      --header 'authorization: Bearer <span class="bcls-input">OAUTH_TOKEN</span>' \
      --header 'content-type: application/json' \
      --data '{"master": {"url": "http://example.com/video.mp4"}}'</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Share_video_with_CMS_API">使用 CMS API 共享視頻</h2>
    
    <p>提取視頻後，您可以使用<a href="/cms/code-samples/cms-api-sample-share-multiple-videos.html">CMS API</a>。</p>
    
    <p>請注意，您必須先設置共享關係，然後才能與其他帳戶共享視頻-請參閱<a href="/cms/managing-videos/media-sharing-cms-api.html">使用CMS API進行媒體共享</a>更多細節。</p>
    
    <p>這是請求的curl示例：</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">curl --request POST \
    --url 'https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">MASTER_ACCOUNT_ID</span>/videos/<span class="bcls-input">VIDEO_ID</span>/shares?=' \
    --header 'authorization: Bearer <span class="bcls-input">ACCESS_TOKEN</span>' \
    --header 'content-type: application/json' \
    --data '[
      {
        "id":"<span class="bcls-input">AFFILIATE_ACCOUNT_ID</span>"
      }
    ]'</code></pre>
    
    <p>響應包括共享帳戶中新視頻的 ID：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">[ {
      "video_id" : "5555086013001",
      "affiliate_id" : "1752604059001",
      "affiliate_video_id" : null,
      "status" : "PROCESSING",
      "shared_at" : "2017-09-01T12:04:39.911Z",
      "updated_at" : "2017-09-01T12:04:39.911Z"
    } ]</code></pre>
    </section>
    </article>