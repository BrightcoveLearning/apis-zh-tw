---
title:“從XDR API獲取播放位置"
description:“在本主題中，您將學習如何從跨設備恢復 (XDR) API 檢索查看器的播放位置。”
parent: Getting started 
grandparent: Cross Device Resume API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">

  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Overview">概述</h2>
    <p>
      跨設備簡歷允許觀看者在一個設備上開始觀看視頻，稍後，可以在其他設備上停止觀看的地方繼續觀看視頻。
    </p>
    <p>
      由於無法從客戶端應用程序調用跨設備簡歷（XDR）API，因此您將需要創建服務器端代理來進行調用並返回播放位置值。
    </p>
    <aside class="bcls-aside bcls-aside--information">請注意，提交 XDR 數據與通過 API 提供該數據之間存在長達 30 秒的延遲。</aside>
  </section>

  <section class="bcls-section">
    <h2 id="Getting_playback_position">獲取播放位置</h2>

    <p>您可以使用<a href="/xdr/references/reference.html">跨設備恢復 (XDR) API</a> .</p>

    <h3 id="Cross_Device_Resume_API">跨設備恢復 (XDR) API</h3>
    <p>
      使用跨設備恢復 API，您可以獲得特定查看器的所有播放頭位置，或特定查看器和視頻的所有播放頭。
    </p>

    <h3>基本網址</h3>
    <p>
      API 的基本 URL 是：
    </p>
    <pre><code class="language-http" translate="No">https://data.brightcove.com/v1/xdr</code></pre>

    <h3>帳戶路徑</h3>
    <p>
      在任何情況下，都將請求特定的視頻雲帳戶。因此，您將始終將術語帳戶後跟您的帳戶 ID 添加到基本 URL：
    </p>
    <pre><code class="language-http" translate="No">https://data.brightcove.com/v1/xdr/accounts/{account_id}</code></pre>

    <h3>授權</h3>
    <p>
      請求的訪問令牌是必需的，並且必須存在於Authorization標頭中：
    </p>
    <pre><code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
    <p>
      訪問令牌是必須從 Brightcove OAuth 服務獲取的臨時 OAuth2 訪問令牌。有關如何獲取客戶端憑據並使用它們來檢索訪問令牌的詳細信息，請參閱<a href="/oauth/getting-started/overview-oauth-api-v4.html">Brightcove OAuth 概述</a> .
    </p>

    <h3>權限</h3>
    <p>
      對跨設備簡歷API的請求必須來自<a href="/oauth/index.html">客戶憑證</a>具有以下權限：
    </p>
    <ul>
      <li>
        <code translate="No">video-cloud/xdr/read</code>
      </li>
    </ul>
    <p><strong>請注意，這些權限在Studio管理員界面中尚不可用。</strong>直到他們，你可以使用這個<a href="/oauth/code-samples/oauth-api-sample-create-client-credentials.html">Brightcove 學習服務應用程序</a>創建您的客戶端憑據。只要確保檢查<code translate="No">video-cloud/xdr/read</code>創建憑據時，您可以選擇“框"（您可以根據需要選中任意多個其他框）。</p>

    <h3>API方法</h3>
    <p>
      跨設備恢復 API 支持以下請求。有關詳細信息，請參見<a href="/xdr/references/reference.html">跨設備簡歷（XDR）API參考</a>。
    </p>

    <h4>獲取觀眾播放頭</h4>
    <p>
      此請求獲取查看器的所有播放頭。
    </p>
    <pre><code class="language-http" translate="No">GET /accounts/{accountID}/playheads/{viewer_id}</code></pre>
    <h5>反應體</h5>
    <p>
      響應正文包含一系列視頻和播放頭。它看起來應該類似於：
    </p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;account_id&quot;: &quot;1752604059001&quot;,
  &quot;viewer_id&quot;: &quot;viewer001&quot;,
  &quot;items&quot;: [
    {
    &quot;timestamp&quot;: 1589548991563000,
    &quot;video_id&quot;: &quot;6152436480001&quot;,
    &quot;playhead_seconds&quot;: 17
    },
    {
    &quot;timestamp&quot;: 1589548858719000,
    &quot;video_id&quot;: &quot;6152440604001&quot;,
    &quot;playhead_seconds&quot;: 3
    }
  ],
  &quot;size&quot;: 2
  }</code></pre>
    <br />

    <h4>獲取觀看者視頻播放頭</h4>
    <p>
      此請求獲取查看者和特定視頻的所有播放頭。
    </p>
    <pre><code class="language-http" translate="No">GET /accounts/{account_id}/playheads/{viewer_id}/{video_id}</code></pre>
    <br />
    <aside class="bcls-aside bcls-aside--tip">
      <p>
        您還可以包含視頻 ID 列表：（最多 = 100）
      </p>
      <pre><code class="language-http" translate="No">GET /accounts/{account_id}/playheads/{viewer_id}/{video_id},{video_id},...</code></pre>
    </aside>
    <h5>反應體</h5>
    <p>
      如果您指定一個視頻ID，則響應主體將包含一個item對象。當您指定多個視頻 ID 時，<code translate="No">items</code>數組將包含多個項目對象。它看起來應該類似於：
    </p>
<pre class="line-numbers"><code class="language-json" translate="No">{
  &quot;account_id&quot;: &quot;1752604059001&quot;,
  &quot;viewer_id&quot;: &quot;viewer001&quot;,
  &quot;items&quot;: [
    {
    &quot;timestamp&quot;: 1589896539910000,
    &quot;video_id&quot;: &quot;6156696074001&quot;,
    &quot;playhead_seconds&quot;: 39
    }
  ],
  &quot;size&quot;: 1
  }</code></pre>
    <br />
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_server_side_proxy">使用服務器端代理</h2>
    <p>代理是服務器端應用程序，充當客戶端應用程序和REST API之間的中介。以下是一些有用的鏈接：</p>
    <ul>
      <li>
        有關概念，請參見<a href="https://player.support.brightcove.com/getting-started/learning-guide-using-rest-apis.html">學習指南：使用 REST API</a>
      </li>
      <li>
        有關調用服務器端代理以從XDR API獲取播放頭的Web播放器示例，請參見<a href="https://github.com/BrightcoveLearning/cross-device-resume/blob/master/index.html">github上的跨設備簡歷示例</a>。
      </li>
    </ul>

  </section>

  <!-- <section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<p>Here are the limitation associated with the cross-device resume.</p>

<ul>
	<li>The current version of this plugin does not support thumbnails on mobile devices.</li>
</ul>
</section> -->

  <!-- <section class="bcls-section">
<h2 id="Changelog">Changelog</h2>

<p>See the <a href="https://player.support.brightcove.com/plugins/changelog/thumbnails-plugin-changelog.html">changelog here</a>.</p>
</section> -->
</article>