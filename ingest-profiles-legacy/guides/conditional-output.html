---
title: '條件輸出'
description: '在本主題中，您將了解如何在源文件不滿足特定條件時通過跳過再現在自定義攝取配置文件中創建條件輸出。'
parent: Guides 
grandparent: Ingest Profiles API Legacy
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Limitations">局限性</h2>
    
    <aside class="bcls-aside bcls-aside--information">筆記：
    <ul>
      <li>本主題中描述的條件輸出設置適用<strong>只要</strong>到舊的攝取配置文件，<strong>不是</strong>到動態交付或上下文感知編碼配置文件。</li>
      <li>要在動態交付攝取/轉碼中使用條件輸出，請聯繫 Brightcove 支持。</li>
    </ul>
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="why_skip_renditions">為什麼要跳過演繹？</h2>
    
    <p>如果您攝取的源視頻質量差異很大，則跳過再現非常有用。例如，對於使用電話或現場其他設備捕獲的視頻的新聞機構來說，這種情況經常發生。</p>
    
    <p>如果沒有條件輸出，Dynamic Ingest 系統將創建與配置文件中指定的一樣多的再現。</p>
    
    <p>例如，假設您使用包含以下無條件視頻格式的配置文件攝取了低質量視頻（視頻比特率約為820 kbps）。</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">視頻播放</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>格式</th>
          <th>音頻比特率</th>
          <th>視頻比特率</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td style="text-align:center;">mp4</td>
          <td style="text-align:center;">64</td>
          <td style="text-align:center;">450</td>
        </tr>
        <tr>
          <td style="text-align:center;">mp4</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">900</td>
        </tr>
        <tr>
          <td style="text-align:center;">mp4</td>
          <td style="text-align:center;">128</td>
          <td style="text-align:center;">1700</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">64</td>
          <td style="text-align:center;">450</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">700</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">900</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">96</td>
          <td style="text-align:center;">1200</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">128</td>
          <td style="text-align:center;">1700</td>
        </tr>
        <tr>
          <td style="text-align:center;">HLS</td>
          <td style="text-align:center;">128</td>
          <td style="text-align:center;">2000</td>
        </tr>
      </tbody>
    </table>
    
    <p>Studio 中的結果呈現如下所示：</p>
    
    <figure class="bcls-figure"><img class="bcls-image" alt="Renditions for Low Quality Video" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/ingest-profiles-api/guides/conditional-outputs/renditions-for-low-quality.png" />
    <figcaption class="bcls-caption--image">低質量視頻的翻譯</figcaption>
    </figure>
    
    <p>請注意，最後三個（突出顯示的）HLS再現的比特率相同，並且該比特率僅略高於次佳的HLS再現。另請注意，兩次最佳MP4再現的比特率差異很小。這樣做的原因是轉碼永遠無法提高源的比特率，這裡的源的平均比特率約為 800 kbps，因此具有更高指定比特率的再現最終會在該範圍內（您會看到細微的差異）因為計算分段和非分段視頻格式的平均比特率的方式不同）。</p>
    <!-- <p>You might also note that the renditions all have exactly the same dimensions. These are in fact the dimensions of the source, which are smaller than those for any of the renditions specified in the profile. Video Cloud will never upsize a video during transcoding, because this would result in significant degradation of the visual quality.</p> -->
    
    <p>然後，該集合中的最後四個再現基本上是多餘的，與“低質量”再現相比，質量幾乎沒有提高，但無論如何它們都是被創建和存儲的。如果源與您指定的質量標準不匹配，則可以通過使用條件輸出來防止生成再現。</p>
    
    <aside class="bcls-aside bcls-aside--information">請注意，我們已將條件輸出設置添加到<a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">標準配置文件</a>並建議您盡可能使用這些配置文件。</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Implementation">執行</h2>
    
    <p>您可以添加一個<code translate="No">skip</code>反對某些引述。這<code translate="No">skip</code>對象包含一個或多個條件，如果不滿足這些條件，則不會創建再現。</p>
    
    <aside class="bcls-aside bcls-aside--information">如果源視頻的比特率低於為再現指定的比特率，標準配置文件將自動跳過再現。如果您希望自定義配置文件具有此行為，則必須按照本主題中描述的方式添加它。</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Notes_on_usage">使用注意事項</h2>
    
    <ol>
      <li>攝取配置文件<strong>必須</strong>包括至少一個不可跳過的演繹-如果您嘗試創建一個可跳過所有演繹的配置文件，則會收到錯誤消息。</li>
      <li>您必須確保為每種內容類型至少創建一個再現。例如：
      <ul>
        <li>如果您同時創建了純音頻和視頻格式，則每個格式都必須具有不可跳過的格式</li>
        <li>如果使用DRM，則與該DRM類型（平滑，HLS，DASH等）兼容的每種格式都必須具有不可跳過的格式表示。</li>
      </ul>
      </li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="syntax">句法</h2>
    
    <p>的語法<code translate="No">skip</code>您可以添加到再現規範的對像如下：</p>
    
    <pre class="line-numbers">
            <code class="language-json" translate="No">"skip": {
                "condition1": "value1",
                "condition2": 1300,
                ...etc
            }</code></pre>
    
    <aside class="bcls-aside bcls-aside--information">注意數值應該<strong>不是</strong>用引號括起來。這確實<strong>不是</strong>適用於尺寸值，例如“640x360”。</aside>
    
    <h3>例子</h3>
    
    <pre class="line-numbers">
            <code class="language-json" translate="No">"renditions": [
                {
                  "media_type": "video",
                  "reference_id": "ts1",
                  "format": "ts",
                  "type": "segmented",
                  "audio_codec": "aac",
                  "audio_bitrate": 96,
                  "video_bitrate": 1200.
                  "video_codec": "h264",
                  "keyframe_rate": 0.5,
                  "max_frame_rate": 30,
                  "width": 1280,
                  "height": 720,
                  "h264_profile": "main",
                  "skip": {
                      "min_video_bitrate": 1000,
                      "min_size": "640x360"
                    }
                },
                ... etc
            ]</code></pre>
    
    <p>對於上面的配置文件（片段），將創建顯示的演繹形式<strong>只要</strong>如果源視頻的視頻比特率至少為1000 kbps，並且幀大小至少為640px x 360px。</p>
    
    <aside class="bcls-aside bcls-aside--warning">攝取配置文件<strong>必須</strong>包括至少一個不可跳過的演繹。如果您嘗試創建一個配置文件，其中每個再現都包含一個<code translate="No">skip</code>對象，Ingest Profiles API 將返回錯誤。</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="skip_fields">跳過字段</h2>
    
    <p>以下是可在<code translate="No">skip</code>目的：</p>
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">跳過字段</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>財產</th>
          <th>類型</th>
          <th>描述</th>
          <th>默認</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td ><code translate="No">min_audio_bitrate</code></td>
          <td >整數</td>
          <td >源必須具有的最小音頻比特率 (kbps)</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">max_audio_bitrate</code></td>
          <td >整數</td>
          <td >源必須具有的最大音頻比特率 (kbps)</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">min_video_bitrate</code></td>
          <td >整數</td>
          <td >源必須具有的最小視頻比特率 (kbps)</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">max_video_bitrate</code></td>
          <td >整數</td>
          <td >源必須具有的最大視頻比特率 (kbps)</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">require_audio</code></td>
          <td >布爾值</td>
          <td >源必須包括音軌</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">require_video</code></td>
          <td >布爾值</td>
          <td >來源必須包括視頻軌道</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">min_size</code></td>
          <td >形式為“widthxheight”的字符串（例如<code translate="No">"400x225"</code> )</td>
          <td >來源必須至少是這個分辨率</td>
          <td >空值</td>
        </tr>
        <tr>
          <td ><code translate="No">max_size</code></td>
          <td >形式為“widthxheight”的字符串（例如<code translate="No">"1920x1080"</code> )</td>
          <td >來源最多必須是這個分辨率</td>
          <td >空值</td>
        </tr>
      </tbody>
    </table>
    </section>
    </article>