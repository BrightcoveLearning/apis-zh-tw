---
title: '概述：攝取配置文件 API'
description: '在本主題中，您將大致了解攝取配置文件 API。Ingest Profiles API 允許您為 Video Cloud 帳戶創建、檢索、更新和刪除再現配置文件。<aside class="bcls-aside bcls-aside--information">請注意，本指南適用於<strong>遺留攝取系統</strong> ;大多數客戶都在<strong><a href="/ingest-profiles/">動態交付系統</a></strong> . </aside>'
parent: Code Samples 
grandparent: Ingest Profiles API Legacy
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Managing_Ingest_Profiles">管理攝取配置文件</h2>
    
    <aside class="bcls-aside bcls-aside--information">請注意，此版本的概覽適用於為使用舊版攝取系統的帳戶啟用的帳戶。這些帳戶可能也可能不啟用<a href="/dynamic-ingest/ingest-guides/context-aware-encoding.html">上下文感知編碼</a> .有一個單獨的概述<a href="/ingest-profiles/getting-started/overview-ingest-profiles-api-dynamic-delivery-context-aware-encoding.html">動態交付配置文件</a> .</aside>
    
    <p>上載配置文件用作上傳或重新轉碼視頻時的轉碼規範。您可以使用 Ingest Profiles API 管理這些配置文件。</p>
    
    <aside class="bcls-aside bcls-aside--information">注意：您還可以通過以下方式管理您的攝取配置文件<a href="https://studio.support.brightcove.com/admin/managing-ingest-profiles.html">工作室</a>，我們建議您這樣做，除非您將 Video Cloud 與您自己的 CMS 集成。</aside><aside class="bcls-aside bcls-aside--warning">如果用戶以編程方式拉取配置文件以使用檢索到的內容更新該配置文件，則用戶將需要清理該配置文件，刪除諸如“id”之類的內容，但不刪除配置文件，並且應完全刪除“版本” .</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="glossary">專業術語</h2>
    
    <dl>
      <dt>設定檔JSON</dt>
      <dd>
      <p>下面的術語“配置文件 JSON”表示配置文件對象的 JSON 表示。它們包含頂級配置文件字段和作為列表的再現對象集合。看<a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">標準配置文件</a>查看每個帳戶中包含的標準配置文件的 JSON 和<a href="/dynamic-ingest/ingest-guides/ingesting-content-drm.html">內容安全（DRM 和 HLSe）</a>用於包含 DRM 封裝的示例配置文件。</p>
      </dd>
      <dt>個人資料ID</dt>
      <dd>
      <p>一種<code translate="No">profile id</code>可以是<code translate="No">id</code>或者<code translate="No">name</code>配置文件中的頂級字段。在此示例中（配置文件的一部分）：</p>
    
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "id": "5591b5ede4b0f7138939ad8c",
        "version": 4,
        "name": "screencast-1280",
        "description": "A high resolution profile optimized for screencasts with 1280 x 720 resolution.", ...</code></pre>
    
      <p>“screencast-1280"或“5591b5ede4b0f7138939ad8c"都是有效的配置文件ID。當您第一次創建配置文件時，您將提供一個帶有名稱但沒有 ID 的配置文件，並且響應將包含創建的配置文件及其 ID。然後，您可以在任何後續 API 調用中使用其中之一。</p>
      </dd>
      <dt>參考編號</dt>
      <dd>
      <p>一種<code translate="No">reference_id</code>在配置文件中唯一地標識演繹形式。參考ID用於DRM打包，將來可能會用於其他目的。除了在配置文件中唯一之外，引用ID可以是任何字符串-不應包含空格。我們建議使用一些易於識別格式的方案，例如：<code translate="No">mp4_1</code> , <code translate="No">mp4_2</code> , <code translate="No">hls1</code> , <code translate="No">hls2</code>， 等等。</p>
      </dd>
      <dt>個人資料版本</dt>
      <dd>
      <p>一種<code translate="No">version</code>是帳戶的配置文件的修訂版號。它由一個長整數值表示。注意：在JSON表示中未引用。</p>
      </dd>
      <dt>活動資料</dt>
      <dd>
      <p>個人資料是<code translate="No">active</code>如果可以用於上傳。例如，如果更新配置文件，則會獲得具有遞增版本號的新配置文件，該版本號處於活動狀態，而舊版本則變為非活動狀態。</p>
      </dd>
      <dt>標準型材</dt>
      <dd>
      <p>個人資料是<code translate="No">standard</code>如果提供給Brightcove使用（例如，它不是特定於單個帳戶的自定義配置文件）。</p>
      </dd>
      <dt>默認配置文件</dt>
      <dd>
      <p>個人資料是<code translate="No">default</code>如果未明確選擇配置文件時使用它。如果您沒有帳戶配置，或者未在配置中設置默認配置文件，則使用Brightcove之一<code translate="No">standard</code>配置文件將根據您的帳戶類型使用。</p>
      </dd>
    </dl>
    </section>
    
    <section class="bcls-section">
    <h2 id="serviceURL">基本網址</h2>
    
    <p>服務網址是：</p>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">https://ingestion.api.brightcove.com/v1/</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="authorization">授權</h2>
    
    <p>通過Brightcove的OAuth2實現對API進行授權。您將需要具有對您的帳戶進行以下操作的權限的客戶端憑據（客戶端 ID 和客戶端機密）：</p>
    
    <ul>
      <li><code translate="No">video-cloud/ingest-profiles/profile/read</code></li>
      <li><code translate="No">video-cloud/ingest-profiles/profile/write</code></li>
      <li><code translate="No">video-cloud/ingest-profiles/account/read</code></li>
      <li><code translate="No">video-cloud/ingest-profiles/account/write</code></li>
    </ul>
    
    <p>得到一個<code translate="No">client_id</code>和<code translate="No">client_secret</code>，您需要轉到 OAuth UI 並註冊一個應用程序：</p>
    
    <ul>
      <li><a href="/general/managing-api-authentication-credentials.html">管理API身份驗證憑據</a></li>
    </ul>
    
    <p>您還可以通過 CURL 或 Postman 獲取您的憑據 - 請參閱：</p>
    
    <ul>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">使用CURL獲取客戶端憑據</a></li>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">使用郵遞員獲取客戶憑證</a></li>
    </ul>
    
    <p>您將使用您的客戶端憑據來獲取允許您調用 API 的訪問令牌。訪問令牌在授權標頭中傳遞：</p>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">Authorization: Bearer {your_access_token}</code></pre>
    
    <p>見<a href="/oauth/getting-started/overview-oauth-api-v4.html">Oauth 部分</a>想要查詢更多的信息。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Maximum_renditions">最大演繹</h2>
    
    <p>您可以在攝取配置文件中定義的最大再現數為 25。如果定義的數量超出該數量，則請求將返回錯誤409響應：配置文件移交計數超出配置的移交限制。</p>
    
    <aside class="bcls-aside bcls-aside--warning">如果您包含海報（靜態視頻）和縮略圖的圖像再現，則這些將被視為最多 25 個再現中的兩個。</aside>
    </section>
    
    <h2 id="conditional_outputs">有條件的輸出</h2>
    
    <p>如果您攝取的視頻質量差異很大（例如，您的視頻可能包含使用低質量相機在手機上創建的用戶生成的內容），則您可能希望根據視頻的比特率或其他屬性來生成某些移交源視頻。這將防止創建和存儲冗餘再現。看<a href="/ingest-profiles-legacy/guides/conditional-output.html">條件輸出</a>有關如何執行此操作的詳細信息。</p>
    
    <section class="bcls-section">
    <h2 id="accountOperations">賬戶操作</h2>
    
    <p>在帳戶級別，您可以獲取該帳戶的所有配置文件並創建新的配置文件。</p>
    
    <h3>終點</h3>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">/accounts/{account_id}/profiles</code></pre>
    
    <h3>獲取所有個人資料</h3>
    
    <p>獲取帳戶的所有配置文件（包括<a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">標準配置文件</a> )，您向上面顯示的端點提交 GET 請求。</p>
    
    <h3>建立個人資料</h3>
    
    <p>要創建新的配置文件，您向上面顯示的端點提交 POST 請求，包括配置文件的 JSON 數據作為請求正文。見<a href="#sampleProfile">樣本簡介</a>下面是 JSON 數據的示例，以及<a href="/ingest-profiles-legacy/references/ingest-profiles-api-fields-reference-legacy-ingest.html">配置文件字段參考</a>對於允許的字段。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="singleProfileOperations">單個配置文件操作</h2>
    
    <p>對於單個概要文件，您可以按名稱或ID獲取概要文件，替換概要文件，然後刪除概要文件。</p>
    
    <h3>終點</h3>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">/accounts/{account_id}/profiles/{profile_id}</code></pre>
    
    <p class="slide">為了<code translate="No">profile_id</code>，您可以使用以下任一方法：</p>
    
    <ul>
      <li class="slide">名稱（例如，平衡高清）</li>
      <li class="slide">生成的ID（例如54de14cce4b0a6d2bf9cb08a）</li>
    </ul>
    
    <h3>通過ID獲取個人資料</h3>
    
    <p>要檢索單個配置文件，請向上面顯示的端點發出 GET 請求。</p>
    
    <h3>更新個人資料</h3>
    
    <p>要更新配置文件，請向上述端點發出 PUT 請求，包括 <em>完全的</em> 請求正文中配置文件的 JSON 數據。</p>
    
    <aside class="bcls-aside bcls-aside--warning">注意：更新配置文件的 JSON <strong>必須</strong>包括<code translate="No">id</code>財產。</aside>
    
    <h3>刪除個人資料</h3>
    
    <p>要刪除配置文件，請向上述端點發出 DELETE 請求。</p>
    
    <div class="BCL-aside">
    <p>這個動作是<strong>不可逆的</strong></p>
    
    <aside class="bcls-aside bcls-aside--warning">您不能更新或刪除任何<a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">標準配置文件</a>或默認配置文件（視頻點播或直播）。</aside>
    </div>
    
    <div class="bcls-section" id="defaultProfile">
    <h2>默認配置文件操作</h2>
    
    <p>您可以使用端點獲取、設置或更新您帳戶的默認視頻點播和直播視頻配置文件：</p>
    
    <pre class="line-numbers">
    <code class="language-http" translate="No">/accounts/{account_id}/configuration</code></pre>
    
    <h3>獲取默認配置文件</h3>
    
    <p>向上述端點發出GET請求，以獲取您帳戶的默認配置文件。</p>
    
    <p>如果未設置默認配置文件，則將返回系統默認配置文件。</p>
    
    <h3>設置默認配置文件</h3>
    
    <p>要設置默認配置文件，請向上面顯示的端點發出 POST 請求，包括請求正文中的 JSON：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "account_id": {account_id},
      "default_profile_id": {default_profile_id}
    }</code></pre>
    
    <p>為了<code translate="No">default_profile_id</code>，您可以使用以下任一種：</p>
    
    <ul>
      <li class="slide">名稱（例如，平衡高清）</li>
      <li class="slide">生成的ID（例如54de14cce4b0a6d2bf9cb08a）</li>
    </ul>
    
    <h3>更新默認配置文件</h3>
    
    <p>要更新默認配置文件，請向上面顯示的端點發出 PUT 請求，在請求正文中包含此 JSON：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": {configuration_id},
      "account_id": {account_id},
      "default_profile_id": {default_profile_id}
    }</code></pre>
    
    <p>得到<code translate="No">configuration_id</code>從響應到GET或POST請求。</p>
    
    <h4>設置默認實時配置文件</h4>
    
    <p>設置默認直播配置文件與設置默認視頻點播配置文件完全相同，除了請求正文中的此更改：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "id": {configuration_id},
      "account_id": {account_id},
      <strong>"default_live_profile_id": {default_live_profile_id}</strong>
    }</code></pre>
    
    <h3>筆記：</h3>
    
    <ul>
      <li>如果您指定了不存在的配置文件，則請求將失敗</li>
    </ul>
    </div>
    </section>
    
    <section class="bcls-section">
    <h2 id="sampleProfile">樣本簡介</h2>
    
    <p>這<a href="/ingest-profiles-legacy/references/standard-ingest-profiles-legacy-transcoding.html">標準配置文件</a>文檔將顯示所有視頻雲帳戶當前存在的所有默認配置文件。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="watermarks">水印</h2>
    
    <p>如果您想在視頻中添加水印（或徽標圖像），則可以使用提取配置文件中的水印字段。</p>
    
    <aside class="bcls-aside bcls-aside--information">請注意，這些字段必須添加到每個視頻播放中。</aside>
    
    <p>這是帶有水印的演繹配置文件的示例：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">...
    "renditions": [
        {
          "media_type": "video",
          "id": "559697ece4b072e9641b8404",
          "reference_id": "mp0",
          "format": "mp4",
          "audio_codec": "aac",
          "audio_bitrate": 64,
          "video_codec": "h264",
          "speed": 3,
          "video_bitrate": 450,
          "decoder_bitrate_cap": 771,
          "decoder_buffer_size": 1028,
          "keyframe_rate": 0.5,
          "max_frame_rate": 30,
          "width": 480,
          "height": 270,
          "h264_profile": "baseline",
          "watermarks": [
            {
              "y": "70%",
              "width": "20%",
              "url": "http://learning-services-media.brightcove.com/images/bc_logo.png"
            }
          ]
      }, ...</code></pre>
    
    <p>有關這些字段的完整說明，請參閱&lt;a href="https://zencoder.support.brightcove.com/encoding-settings/assets/encoding-settings-watermarks.html&gt;水印字段參考&lt;/a&gt;。&lt;/a&gt; p&gt; &lt;/section&gt; &lt;/article&gt;