---
title: '概述：動態攝取 API'
description: '在本主題中，您將學習如何使用<span translate="No">動態攝取 API</span>攝取視頻，以便它們可以通過動態交付進行交付。'
parent: Getting Started 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>

    <p>布賴特科夫的<span translate="No">動態攝取 API</span>基於從客戶的存儲位置下載視頻源文件並創建源文件的指定再現的功能。（還有一個選項<a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">上傳您的源文件</a>到Dynamic Ingest可以訪問它們的臨時位置。）該平台以雲為中心，分佈於全球，基於現代實踐，可提供一流的一致性和速度。</p>

    <p>另請參閱<a href="/dynamic-ingest/references/reference.html">API參考</a>。</p>
    </section>

    <section class="bcls-section">
    <h2 id="workflowoverview">工作流程概述</h2>

    <p>在媒體的整體轉碼和存儲中使用了許多系統/技術。他們是：</p>

    <ul>
      <li><strong>CMS API</strong>：創建用於DI API的視頻對象</li>
      <li><strong>編碼器</strong>：對視頻進行轉碼以創建多個再現</li>
      <li><strong>亞馬遜S3</strong>：根據配置文件設置將母版和演繹圖移到存儲中</li>
      <li><strong>目錄</strong>：存儲與視頻相關的必要信息</li>
    </ul>

    <p>初始轉碼後，您可以在媒體上執行以下操作：</p>

    <ul><!-- the following item on hold indefinitely --><!-- <li><strong>Delete</strong>: Delete, when needed, the master or all items</li> -->
      <li><strong>重新轉碼</strong>：存在master時創建新的演繹（如果不存在master則出錯）</li>
      <li><strong>代替</strong>：指向新的母版，或替換現有的母版</li>
      <li>攝取其他媒體資產：
      <ul>
        <li><a href="/dynamic-ingest/ingest-guides/images-and-dynamic-ingest-api.html">縮略圖和海報圖片</a></li>
        <li><a href="/dynamic-ingest/ingest-guides/ingesting-webvtt-files-text-trackscaptions.html">字幕，字幕或章節定義</a></li>
        <li><a href="/dynamic-ingest/ingest-guides/implementing-multiple-audio-tracks-using-apis.html">其他音軌</a>（如果您的帳戶啟用了多個音軌）</li>
      </ul>
      </li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="operations">運作方式</h2>

    <p>當您使用 DI API 時，您將執行不同的操作，例如讀取攝取配置文件和將攝取信息寫入您的帳戶。以下是 DI 任務所需操作的完整列表：</p>

      <ul>
        <li><code translate="No">video-cloud/video/create</code></li>
        <li><code translate="No">video-cloud/video/read</code></li>
        <!-- for adding images and webvtt files -->
        <li><code translate="No">video-cloud/video/update</code></li>
        <li><code translate="No">video-cloud/ingest-profiles/profile/read</code></li>
        <li><code translate="No">video-cloud/ingest-profiles/account/read</code></li>
        <li><code translate="No">video-cloud/ingest-profiles/account/write</code></li>
        <li><code translate="No">video-cloud/ingest-profiles/profile/write</code></li>
        <li><code translate="No">video-cloud/upload-urls/read</code></li>
      </ul>

    <p>要獲取客戶端憑據，請使用 Studio <a href="/general/managing-api-authentication-credentials.html">管理工具</a>或查看以下文件之一：</p>

    <ul>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">OAuth：使用CURL獲取客戶端憑據</a></li>
      <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">OAuth：使用郵遞員獲取客戶憑證</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="best_practices">最佳實務</h2>

    <p>看<a href="/dynamic-ingest/general/dynamic-ingest-api-best-practices.html">動態攝取 API：最佳實踐</a>。</p>
    </section>

    <section class="bcls-section">
    <h2 id="sourceLocations">有效的來源位置</h2>

    <h3>基於拉取的攝取</h3>

    <p>Dynamic Ingest可以從以下來源提取源視頻文件：HTTP / HTTPS，S3和FTP-帶有或不帶有身份驗證</p>

    <p>例子：</p>

    <ul>
      <li>http://example.com/path/to/input.avi</li>
      <li>https://dl.dropboxusercontent.com/u/3641457/Bird_Titmouse.mp4</li>
      <li>s3://my-bucket/video.mp4</li>
      <li>ftp：//服務器/file.mp4</li>
    </ul>

    <h4>關於S3的注意事項</h4>

    <p>如果您的視頻位於受保護的S3存儲桶中，請參見<a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html">在S3上使用動態提取</a>有關如何設置“動態提取"訪問文件權限的詳細信息。</p>

    <h4>關於FTP的注意事項</h4>

    <p>如果您的視頻位於受保護的FTP服務器中，請使用標準方法在URL上傳遞用戶名和密碼，如下所示：</p>

    <pre>
    <code class="language-http" translate="No">ftp://<span class="bcls-highlight">username:password@</span>server/file.mp4</code></pre>

    <aside class="bcls-aside bcls-aside--information">筆記：
    <ul>
      <li>根據IETF規範，主機名（用於文件位置或回調URL）不得包含下劃線字符或某些其他標點符號或特殊字符。看<a href="https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames">這篇維基百科文章</a>想要查詢更多的信息。如果主機名不符合IETF標準，將返回錯誤。</li>
      <li>動態攝取<strong>不能</strong>提取託管在Google雲端硬盤上的文件，因為Google雲端硬盤不會生成指向視頻文件的直接鏈接。</li>
    </ul>
    </aside>

    <h3>源文件上傳</h3>

    <p>您還可以將文件上傳到一個安全的臨時位置，Dynamic Ingest 可以從中提取它們。有關詳細信息，請參見<a href="/dynamic-ingest/getting-started/source-file-upload-api-dynamic-ingest.html">源文件上傳</a>。</p>
    </section>

    <section class="bcls-section">
    <h2 id="special_characters">特殊的角色</h2>

    <p><strong>如果您要提供視頻雲獲取視頻的URL，並且要發送憑據作為URL的一部分</strong>， 你需要<a href="https://en.wikipedia.org/wiki/Percent-escape">百分比編碼</a>某些保留的特殊字符：</p>

    <table class="bcls-table">
      <caption class="bcls-caption--table">特殊的角色</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>特點</th>
          <th>百分比編碼</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td style="text-align:center;">]</td>
          <td style="text-align:center;">％5B</td>
        </tr>
        <tr>
          <td style="text-align:center;">[</td>
          <td style="text-align:center;">％5D</td>
        </tr>
        <tr>
          <td style="text-align:center;">？</td>
          <td style="text-align:center;">％3F</td>
        </tr>
        <tr>
          <td style="text-align:center;">/</td>
          <td style="text-align:center;">％2F</td>
        </tr>
        <tr>
          <td style="text-align:center;">&lt;</td>
          <td style="text-align:center;">％3C</td>
        </tr>
        <tr>
          <td style="text-align:center;">~</td>
          <td style="text-align:center;">％7E</td>
        </tr>
        <tr>
          <td style="text-align:center;">#</td>
          <td style="text-align:center;">％23</td>
        </tr>
        <tr>
          <td style="text-align:center;">`</td>
          <td style="text-align:center;">％6D</td>
        </tr>
        <tr>
          <td style="text-align:center;">！</td>
          <td style="text-align:center;">％21</td>
        </tr>
        <tr>
          <td style="text-align:center;">@</td>
          <td style="text-align:center;">％40</td>
        </tr>
        <tr>
          <td style="text-align:center;">$</td>
          <td style="text-align:center;">％24</td>
        </tr>
        <tr>
          <td style="text-align:center;">％</td>
          <td style="text-align:center;">％25</td>
        </tr>
        <tr>
          <td style="text-align:center;">^</td>
          <td style="text-align:center;">％5E</td>
        </tr>
        <tr>
          <td style="text-align:center;">和</td>
          <td style="text-align:center;">％26</td>
        </tr>
        <tr>
          <td style="text-align:center;">*</td>
          <td style="text-align:center;">％2A</td>
        </tr>
        <tr>
          <td style="text-align:center;">（</td>
          <td style="text-align:center;">％28</td>
        </tr>
        <tr>
          <td style="text-align:center;">）</td>
          <td style="text-align:center;">％29</td>
        </tr>
        <tr>
          <td style="text-align:center;">  +      </td>
          <td style="text-align:center;">％2B</td>
        </tr>
        <tr>
          <td style="text-align:center;">=</td>
          <td style="text-align:center;">％3D</td>
        </tr>
        <tr>
          <td style="text-align:center;">}</td>
          <td style="text-align:center;">％7D</td>
        </tr>
        <tr>
          <td style="text-align:center;">|</td>
          <td style="text-align:center;">％7C</td>
        </tr>
        <tr>
          <td style="text-align:center;">：</td>
          <td style="text-align:center;">％3A</td>
        </tr>
        <tr>
          <td style="text-align:center;">"</td>
          <td style="text-align:center;">％22</td>
        </tr>
        <tr>
          <td style="text-align:center;">;</td>
          <td style="text-align:center;">％3B</td>
        </tr>
        <tr>
          <td style="text-align:center;">'</td>
          <td style="text-align:center;">％27</td>
        </tr>
        <tr>
          <td style="text-align:center;">，</td>
          <td style="text-align:center;">％2C</td>
        </tr>
        <tr>
          <td style="text-align:center;">&gt;</td>
          <td style="text-align:center;">％3E</td>
        </tr>
        <tr>
          <td style="text-align:center;">{</td>
          <td style="text-align:center;">％7B</td>
        </tr>
        <tr>
          <td style="text-align:center;">空間</td>
          <td style="text-align:center;">％20</td>
        </tr>
      </tbody>
    </table>

    <p>例如：</p>

    <pre>
<code class="language-http" translate="No">/* unencoded */
ftp://user@example.com:pass!word@example.com/path/to/input.mp3

/* encoded */
ftp://<span class="bcls-highlight">user%40example.com:pass%21word</span>@example.com/path/to/input.mp3
</code></pre>

      <h3>雙重網址編碼</h3>
      <p>在處理之前，只要將URL解碼一次，就應該在提交攝取作業之前對URL進行兩次URL編碼。</p>
      <p>例如：</p>
      <p>一種<strong>master.url</strong>的 </p>
      <pre>
<code class="language-http" translate="No">https://some.file.storage.com/path/to/video.mp4?Signature=some%2Bcool%2B%25sig</code></pre>
        <p>將在處理前轉換為以下內容：</p>
        <pre>
<code class="language-http" translate="No">https://some.file.storage.com/path/to/video.mp4?Signature=some+cool+%sig</code></pre>
      <p>你應該像這樣對它進行雙重編碼：</p>
<pre>
<code class="language-http" translate="No">https://some.file.storage.com/path/to/video.mp4?Signature=some%252Bcool%252B%2525sig</code></pre>
<p>要對 URL 進行編碼，請參閱<a href="https://general.support.brightcove.com/utilities/string-encoder.html">字符串編碼器</a>文檔。 </p>
    </section>

    <section class="bcls-section">
    <h2 id="Source_file_names">源文件名</h2>

    <p>所有輸入網址必鬚根據以下內容正確地進行網址編碼<a href="https://tools.ietf.org/html/rfc3986#section-2.1">RFC 3986</a>當發送到Brightcove時。這意味著任何<a href="https://tools.ietf.org/html/rfc3986#section-2.2">保留字符</a>在 url 路徑中找到的百分比編碼（空格被編碼為<code translate="No">%20</code> )，並且在 url 查詢中找到的任何保留字符都是百分比編碼的（空格被編碼為<code translate="No">+</code>或者<code translate="No">%20</code>， 和<code translate="No">+</code>被編碼為<code translate="No">%2B</code>）。</p>

    <p>一種<strong>預先簽署</strong> S3 ( <strong> v2</strong>包含 <em>簽名</em>， <em>過期</em> 和 <em>AWS 訪問密鑰 ID</em>， 和<strong>v4</strong>包含 <em>X-Amz-算法</em>， <em>X-Amz-Credential</em>， <em>X-Amz-日期</em>， <em>X-Amz-到期</em>， <em>X-Amz-SignedHeaders</em>， 和 <em>X-Amz-簽名</em>） 或者<strong>地面控制系統</strong>（包含 <em>簽名</em>， <em>過期</em>， 和 <em>谷歌訪問 ID</em>) url 應該已經正確編碼並且<strong>可以按原樣使用</strong> .</p>

    <aside class="bcls-aside bcls-aside--tip">注意雙字節unicode字符<strong>是</strong>文件名中允許。</aside>
    </section>

    <section class="bcls-section">
    <h2 id="sampleAssets">示例資產</h2>

    <p>Brightcove學習服務提供了一些示例資產，您可以在使用Dynamic Ingest時進行實驗。這些資產包括多種語言的短視頻、圖像和 WebVTT 字幕：</p>

    <ul>
      <li><a href="//solutions.brightcove.com/bcls/assets/videos/">視頻</a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/images/">圖片</a></li>
      <li><a href="//solutions.brightcove.com/bcls/assets/vtt">WebVTT 字幕</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="ingestProfile">攝取資料</h2>

    <p>創建動態交付視頻需要特殊的攝取配置文件。你會發現幾個<a href="/ingest-profiles/references/standard-ingest-profiles-dynamic-delivery-and-context-aware-encoding.html">標準攝取配置文件</a>啟用動態交付時在您的帳戶中，建議使用這些。</p>

    <p>您還可以在 Studio 的“管理”部分將自定義動態交付配置文件添加到您的攝取配置文件中 - 請參閱<a href="https://studio.support.brightcove.com/admin/creating-ingest-profiles-context-aware-encoding.html">為動態交付創建攝取配置文件</a>詳情。</p>

    <aside class="bcls-aside bcls-aside--information">請注意，Dynamic Delivery 支持並創建多個 HLS 再現，以最大限度地將您的視頻覆蓋到設備上。</aside>

    <h3>示例動態交付配置文件</h3>

    <p>以下是一個示例動態交付配置文件，可用於入門。您需要做的就是更換<code translate="No">YOUR_ACCOUNT_ID </code>使用您的帳戶ID，然後您可以將配置文件複製並粘貼到攝取配置文件編輯器中。</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "name": "DynamicDeliveryIngestProfile",
      "description": "Dynamic Delivery ingest profile.",
      "account_id": "YOUR_ACCOUNT_ID",
      "digital_master": {
        "rendition": "passthrough",
        "distribute": false
      },
      "dynamic_origin": {
        "renditions": [
          "default/audio64",
          "default/audio96",
          "default/audio128",
          "default/video450",
          "default/video700",
          "default/video900",
          "default/video1200",
          "default/video1700",
          "default/video2000"
        ],
        "images": [
          {
            "label": "poster",
            "height": 720,
            "width": 1280
          },
          {
            "label": "thumbnail",
            "height": 90,
            "width": 160
          }
        ]
      }
    }</code>
    </pre>

    <p>有關標準動態投放配置文件和格式轉換的詳細信息，請參見<a href="/ingest-profiles/references/standard-ingest-profiles-dynamic-delivery-and-context-aware-encoding.html">用於動態投放的標準提取配置文件</a></p>
    </section>

    <section class="bcls-section">
    <h2 id="ingestingVideos">攝取視頻</h2>

    <p>攝取視頻需要兩個 API 請求：</p>

    <ol>
      <li>打電話給<span translate="No">內容管理系統 API</span>在視頻雲系統中創建視頻對象並獲取其id</li>
      <li>打電話給<span translate="No">動態攝取 API</span>提供視頻源文件的 URL 並根據需要為攝取指定其他文件和設置</li>
    </ol>

    <p>一組基本請求示例如下所示：</p>

    <h3>CMS API請求</h3>

    <dl>
      <dt>HTTP方法</dt>
      <dd>郵政</dd>
      <dt>要求網址</dt>
      <dd>https://cms.api.brightcove.com/v1/accounts/ {account_id} /視頻</dd>
      <dt>要求正文</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "name": "My First Dynamic Delivery Video"
    }
    </code>
    </pre>
      </dd>
    </dl>

    <aside class="bcls-aside bcls-aside--information">欲了解更多信息<span translate="No">內容管理系統 API</span>調用在視頻雲系統中創建視頻，請參閱<a href="/cms/getting-started/overview-cms-api.html#settingvalues">CMS API 概述</a> .注意視頻<code translate="No">name </code>是必需的，並且視頻元數據中包含的名稱和任何其他字符串（例如<code translate="No">description </code> ) <strong>必須是 URI 編碼的</strong> .</aside>

    <p>響應數據將包括視頻<code translate="No">id </code>，在下一個請求中使用。</p>

    <h3>提取API請求</h3>

    <dl>
      <dt>HTTP方法</dt>
      <dd>郵政</dd>
      <dt>要求網址</dt>
      <dd>https://ingest.api.brightcove.com/v1/accounts/ {account_id} /影片/ {video_id} /攝取請求</dd>
      <dt>要求正文</dt>
      <dd>
      <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "master": {
        "url": "https://host/master.mp4"
      },
      "profile": "DynamicDeliverIngestProfile",
      "callbacks": [
        "https://mydomain.com/di-callbacks.php"
      ]
    }</code>
    </pre>
      </dd>
    </dl>

    <h3>筆記</h3>

    <ul>
      <li>如果您不包括<code translate="No">profile </code>字段，將使用該帳戶默認配置文件。我們建議使用帳戶默認值，除非您需要為不同類型的視頻使用不同的配置文件。確保將帳戶默認設置為您（最常使用）的配置文件。</li>
      <li>這<code translate="No">callbacks </code>字段是可選的，但我們強烈建議您將其用作跟踪攝取作業進度的最佳方式。看<a href="#notifications">以下</a>有關通知的更多信息。</li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="viewingRenditions">查看再現</h2>

    <p>您可以前往<a href="https://studio.support.brightcove.com/media/editing-video-properties-using-media-module.html#videofiles">Studio 中的媒體模塊</a> .</p>

    <p>要查看格式副本的完整屬性，您可以使用<a href="#retrieveRenditions">CMS API 請求詳述如下</a> .</p>

    <p>要檢索用於播放的 URL，您可以使用<a href="#retrieveRenditions2">播放 API 請求詳述如下</a> .</p>
    </section>

    <section class="bcls-section">
    <h2 id="replaceVideo">替換視頻</h2>

    <p>要將視頻替換為新版本或一組新節目，<span translate="No">動態攝取 API</span> call 與它的調用完全相同<a href="/dynamic-ingest/code-samples/dynamic-ingest-api-sample-ingesting-videos-dynamic-delivery.html">攝取新視頻</a> - 唯一的區別是您無需事先致電<span translate="No">內容管理系統 API</span>在 Video Cloud 系統中創建視頻對象並為其獲取 id。如果指定URL上的源視頻文件與原始攝取的源視頻文件相同，則您將僅獲得一組新的格式。如果源文件是新文件，則將替換現有視頻。在重新轉碼完成之前，所有視頻都可以使用現有的副本播放。</p>

    <p>見<a href="/dynamic-ingest/code-samples/dynamic-ingest-api-sample-replacing-videos-dynamic-delivery.html">工作樣本在這裡</a> .</p>
    </section>

    <section class="bcls-section">
    <h2 id="retranscode">重新轉換視頻</h2>

    <p>如果你選擇<a href="/ingest-profiles/guides/archiving-masters.html">存檔大師</a>當您通過<span translate="No">動態攝取 API</span>或 Studio 上傳模塊，然後您還可以從母版重新轉碼視頻。同樣，提取請求的URL將相同，但是請求正文將具有以下內容：</p>

    <pre class="line-numbers">
    <code class="language-javascript" translate="No">// request
    POST /v1/accounts/{account_id}/videos/{video_id}/ingest-requests
    // request body
    {
      "master": { <span class="bcls-highlight">"use_archived_master": true</span> },
      "profile": "multi-platform-extended-static"
    }
    </code>
    </pre>

    <aside class="bcls-aside bcls-aside--information">
    <p>筆記：最初使用動態交付或上下文感知攝取配置文件轉碼的視頻只能使用這些攝取配置文件類型之一重新轉碼。使用 Legacy 攝取配置文件轉碼的視頻可以使用任何類型的配置文件重新轉碼。</p>
    </aside> <aside class="bcls-aside bcls-aside--information">
    <p>默認情況下，母版是已存檔的，因此上面顯示的樣本配置文件將生成已存檔的母版。</p>
    </aside>
    </section>

    <section class="bcls-section">
    <h2 id="ingest-images">圖像攝取</h2>

    <p>您可以在提取請求中包含自己的圖像，也可以稍後在單獨的請求中添加它們，而不必在轉碼過程中捕獲海報和縮略圖圖像。</p>
    <!-- <aside class="bcls-aside bcls-aside--information">If you add images in a separate request, your request body <strong>must</strong> include the <code translate="No">"profile": "YOUR_DYNAMIC_DELIVERY_PROFILE"</code> field, as shown in the example below.</aside> -->

    <h3>示例請求正文</h3>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "profile": "multi-platform-extended-static",
      "poster": {
        "url": "https://bcls@solutions.brightcove.com/bcls/assets/images/great-blue-heron-poster.png",
        "width": 1280,
        "height": 720
      },
      "thumbnail": {
        "url": "https://bcls@solutions.brightcove.com/bcls/assets/images/great-blue-heron-thumbnail.png",
        "width": 160,
        "height": 90
      },
      "callbacks": [
        "https://solutions.brightcove.com/bcls/di-api/di-callbacks.php"
      ]
    }</code>
    </pre>

    <h3>圖像資產提取通知</h3>

    <p>以下是專門為圖像攝取而獲得的通知示例。</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        <span class="bcls-highlight">"entity": "thumbnail",</span>
        "entityType": "ASSET",
        "version": "1",
        "action": "CREATE",
        "jobId": "0c2767c1-19ea-479d-b371-a0f5f3d154f5",
        "videoId": "5209530177001",
        "accountId": "57838016001",
        "status": "SUCCESS"
      }
      {
        <span class="bcls-highlight">"entity": "poster",</span>
        "entityType": "ASSET",
        "version": "1",
        "action": "CREATE",
        "jobId": "0c2767c1-19ea-479d-b371-a0f5f3d154f5",
        "videoId": "5209530177001",
        "accountId": "57838016001",
        "status": "SUCCESS"
    }
    </code>
    </pre>
    </section>

    <section class="bcls-section">
    <h2 id="ingest_captions">字幕攝取</h2>

    <p>可以將WebVTT格式的字幕與初始攝取請求或以後的請求一起添加到您的視頻中。</p>

    <aside class="bcls-aside bcls-aside--information">筆記：
    <ul>
      <li>這<code translate="No">srclang </code>值應該是語言代碼應該是來自<a href="//www.iana.org/assignments/language-subtag-registry/language-subtag-registry">語言子標籤註冊表</a> .</li>
    </ul>
    </aside>

    <h3>示例請求正文</h3>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "text_tracks": [
        {
          "url": "https://solutions.brightcove.com/bcls/assets/vtt/sample.vtt",
          "srclang": "en",
          "kind": "captions",
          "label": "EN",
          "default": true
        },
        {
          "url": "https://solutions.brightcove.com/bcls/assets/vtt/sample-es.vtt",
          "srclang": "es",
          "kind": "captions",
          "label": "ES",
          "default": false
        }
      ],
      "callbacks": [
        "https://solutions.brightcove.com/bcls/di-api/di-callbacks.php"
      ]
    }</code>
    </pre>

    <p>Sidecar 文本軌道將顯示在 CMS 或 Playback 響應中，就像它們在非動態交付視頻中所做的那樣：</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">"text_tracks": [
        {
        "id": null,
        "src": "https://bcbolt446c5271-a.akamaihd.net/media/v1/text/vtt/clear/57838016001/3de8c552-74e8-4c53-aa11-2a4375edf658/bce0d3dc-11d9-4ca4-ae1b-a39cb7b88a1c/text.vtt?akamai_token=exp=1479236791~acl=/media/v1/text/vtt/clear/57838016001/3de8c552-74e8-4c53-aa11-2a4375edf658/bce0d3dc-11d9-4ca4-ae1b-a39cb7b88a1c/text.vtt*~hmac=df5b4ba1ef2549a7572346dd36a761534ffafe4b8cfbdf92d89013ec2f95699c",
        "srclang": "en",
        "label": "EN",
        "kind": "captions",
        "mime_type": "text/webvtt",
        "asset_id": null,
        "sources": [
          {
          "src": "https://bcbolt446c5271-a.akamaihd.net/media/v1/text/vtt/clear/57838016001/3de8c552-74e8-4c53-aa11-2a4375edf658/bce0d3dc-11d9-4ca4-ae1b-a39cb7b88a1c/text.vtt?akamai_token=exp=1479236791~acl=/media/v1/text/vtt/clear/57838016001/3de8c552-74e8-4c53-aa11-2a4375edf658/bce0d3dc-11d9-4ca4-ae1b-a39cb7b88a1c/text.vtt*~hmac=df5b4ba1ef2549a7572346dd36a761534ffafe4b8cfbdf92d89013ec2f95699c"
          }
        ],
        "in_band_metadata_track_dispatch_type": "",
        "default": false
      ]
    }</code>
    </pre>

    <p>文本軌道也將顯示在 HLS 和 DASH 清單中：</p>

    <h4>HLS</h4>

    <pre class="line-numbers">
    <code class="language-bash" translate="No">#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subtitles-0",NAME="Captions",DEFAULT=NO,AUTOSELECT=YES,LANGUAGE="es",URI="https://manifest.prod.boltdns.net/manifest/v1/hls/v5/clear/57838016001/1bd49b7b-df40-414f-bb05-8840624663e1/de8144f4-b7d7-46ca-848f-dd2f7fa453d7/rendition.m3u8?fastly_token=NTg0ZjA5MWZfMzU1N2VhY2Y2MDA3NzkzYWM0ZjU2ZWQwNWE2NTYzMmI4MzMzMmJkZWM5Y2JmNzQ1MjRjM2QxYjI0NTYzODA5Zg%3D%3D"
    #EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subtitles-0",NAME="Captions",DEFAULT=NO,AUTOSELECT=YES,LANGUAGE="en",URI="https://manifest.prod.boltdns.net/manifest/v1/hls/v5/clear/57838016001/1bd49b7b-df40-414f-bb05-8840624663e1/6399fcf2-cd27-4d97-ad30-e443f13563bd/rendition.m3u8?fastly_token=NTg0ZjA5MWZfYWMxYjllNDlkYzVlOTJkZWQ3ODk2YjE3MGI5NDlhYTlkOGQ1YzI5ZmI4ZjRlOWMzMzU5YmM1YzZkNTA4MTFmNQ%3D%3D"
    </code>
    </pre>

    <h4>短跑</h4>

    <pre class="line-numbers">
    <code class="language-xml" translate="No">&lt;AdaptationSet mimeType="text/vtt" lang="en"&gt;
      &lt;Representation bandwidth="256" id="2f4bb3fb-1a7d-4f4c-bf44-00ef0e611131"&gt;
      &lt;BaseURL&gt;https://bcbolt446c5271-a.akamaihd.net/media/v1/dash/live/clear/57838016001/785d5ddf-6672-4ece-9191-d105445b2557/2f4bb3fb-1a7d-4f4c-bf44-00ef0e611131.vtt?akamai_token=exp=1484784452~acl=/media/v1/dash/live/clear/57838016001/785d5ddf-6672-4ece-9191-d105445b2557*~hmac=ae568ea5294280968de0a2766afd82922ea9aa83fe23a81b3379a46b8ef13284&lt;/BaseURL&gt;
      &lt;/Representation&gt;
      &lt;/AdaptationSet&gt;
      &lt;AdaptationSet mimeType="text/vtt" lang="hi"&gt;
      &lt;Representation bandwidth="256" id="f5875617-40f4-4991-bc5b-7152c6e2a93a"&gt;
      &lt;BaseURL&gt;https://bcbolt446c5271-a.akamaihd.net/media/v1/dash/live/clear/57838016001/785d5ddf-6672-4ece-9191-d105445b2557/f5875617-40f4-4991-bc5b-7152c6e2a93a.vtt?akamai_token=exp=1484784452~acl=/media/v1/dash/live/clear/57838016001/785d5ddf-6672-4ece-9191-d105445b2557*~hmac=ae568ea5294280968de0a2766afd82922ea9aa83fe23a81b3379a46b8ef13284&lt;/BaseURL&gt;
      &lt;/Representation&gt;
    &lt;/AdaptationSet&gt;
    </code>
    </pre>

    <h3>文本跟踪資產的通知</h3>

    <p>以下是特定於文本音軌提取的通知示例。</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      <span class="bcls-highlight">"entity": "en-captions-EN",</span>
      "entityType": "ASSET",
      "version": "1",
      "action": "CREATE",
      "jobId": "ed429284-77c9-4905-a700-4c8edb77be3e",
      "videoId": "5209530177001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }
    {
      <span class="bcls-highlight">"entity": "es-captions-ES",</span>
      "entityType": "ASSET",
      "version": "1",
      "action": "CREATE",
      "jobId": "ed429284-77c9-4905-a700-4c8edb77be3e",
      "videoId": "5209530177001",
      "accountId": "57838016001",
      "status": "SUCCESS"
    }
    </code>
    </pre>

    <h3>帶有文本軌道的示例播放器（英語和西班牙語）</h3>

    <figure class="bcls-figure">
    <div style="display: block; position: relative; max-width: 640px;">
    <div style="padding-top: 56.25%;"><iframe src="//players.brightcove.net/57838016001/SJrVA2mkl_default/index.html?videoId=5209530177001" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" style="width: 100%; height: 100%; position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"></iframe></div>
    </div>

    <figcaption class="bcls-caption--image">動態投放視頻播放器</figcaption>
    </figure>

    <h3>iOS 應用中的邊車字幕</h3>

    <figure class="bcls-figure"><img class="bcls-image" alt="Dynamic Delivery Sidecar Captions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/di-api/getting-started/api-overview-dynamic-delivery/ios-captions-display.png" />
    <figcaption class="bcls-caption--image">動態交付Sidecar字幕</figcaption>
    </figure>
    </section>

    <section id="retrieveRenditions" class="bcls-section">
    <h2>檢索動態演繹</h2>

    <p>要檢索有關視頻的動態再現的信息，請將 GET 請求提交至：</p>

    <pre class="line-numbers">
    <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/dynamic_renditions
    </code>
    </pre>

    <h3>樣本響應</h3>

    <pre class="line-numbers">
    <code class="language-json" translate="No">[
      {
        "rendition_id": "default/audio128",
        "frame_height": null,
        "frame_width": null,
        "media_type": "audio",
        "size": 506818,
        "created_at": "2016-11-14T15:05:56.209214859Z",
        "updated_at": "2016-11-14T15:05:56.209214859Z",
        "encoding_rate": 125,
        "duration": 31488,
        "audio_configuration": "L_R",
        "language": "en"
      },
      {
        "rendition_id": "default/audio64",
        "frame_height": null,
        "frame_width": null,
        "media_type": "audio",
        "size": 261129,
        "created_at": "2016-11-14T15:05:53.926747456Z",
        "updated_at": "2016-11-14T15:05:53.926747456Z",
        "encoding_rate": 62,
        "duration": 31488,
        "audio_configuration": "L_R",
        "language": "en"
      },
      {
        "rendition_id": "default/audio96",
        "frame_height": null,
        "frame_width": null,
        "media_type": "audio",
        "size": 384568,
        "created_at": "2016-11-14T15:05:59.023381448Z",
        "updated_at": "2016-11-14T15:05:59.023381448Z",
        "encoding_rate": 94,
        "duration": 31488,
        "audio_configuration": "L_R",
        "language": "en"
      },
      {
        "rendition_id": "default/video1200",
        "frame_height": 540,
        "frame_width": 960,
        "media_type": "video",
        "size": 4761241,
        "created_at": "2016-11-14T15:06:10.410020728Z",
        "updated_at": "2016-11-14T15:06:10.410020728Z",
        "encoding_rate": 1206,
        "duration": 31465
      },
      {
        "rendition_id": "default/video1700",
        "frame_height": 540,
        "frame_width": 960,
        "media_type": "video",
        "size": 6712422,
        "created_at": "2016-11-14T15:06:15.593063021Z",
        "updated_at": "2016-11-14T15:06:15.593063021Z",
        "encoding_rate": 1703,
        "duration": 31465
      },
      {
        "rendition_id": "default/video2500",
        "frame_height": 720,
        "frame_width": 1280,
        "media_type": "video",
        "size": 9795721,
        "created_at": "2016-11-14T15:06:12.148783841Z",
        "updated_at": "2016-11-14T15:06:12.148783841Z",
        "encoding_rate": 2486,
        "duration": 31465
      },
      {
        "rendition_id": "default/video4000",
        "frame_height": 1080,
        "frame_width": 1920,
        "media_type": "video",
        "size": 15718943,
        "created_at": "2016-11-14T15:06:15.463012005Z",
        "updated_at": "2016-11-14T15:06:15.463012005Z",
        "encoding_rate": 3992,
        "duration": 31465
      },
      {
        "rendition_id": "default/video450",
        "frame_height": 270,
        "frame_width": 480,
        "media_type": "video",
        "size": 1784858,
        "created_at": "2016-11-14T15:06:20.719400854Z",
        "updated_at": "2016-11-14T15:06:20.719400854Z",
        "encoding_rate": 451,
        "duration": 31465
      },
      {
        "rendition_id": "default/video700",
        "frame_height": 360,
        "frame_width": 640,
        "media_type": "video",
        "size": 2746520,
        "created_at": "2016-11-14T15:06:10.918331816Z",
        "updated_at": "2016-11-14T15:06:10.918331816Z",
        "encoding_rate": 695,
        "duration": 31465
      },
      {
        "rendition_id": "default/video900",
        "frame_height": 360,
        "frame_width": 640,
        "media_type": "video",
        "size": 3561912,
        "created_at": "2016-11-14T15:06:17.295871425Z",
        "updated_at": "2016-11-14T15:06:17.295871425Z",
        "encoding_rate": 902,
        "duration": 31465
      }
    ]</code>
    </pre>
    </section>

    <section class="bcls-section">
    <h2 id="retrieveRenditions2">檢索要播放的URL</h2>

    <p>要檢索有關視頻的動態再現的信息，請將 GET 請求提交至：</p>

    <pre class="line-numbers">
    <code class="language-http" translate="No">https://edge.api.brightcove.com/playback/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>
    </code>
    </pre>

    <h3>樣本響應</h3>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "description": null,
      "poster_sources": [
      {
        "src": "https://cf-images.us-east-1.prod.boltdns.net/v1/jit/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/main/1280x720/24s816ms/match/image.jpg"
      }
      ],
      "tags": [
        "dd-static"
      ],
      "cue_points": [],
      "custom_fields": {},
      "account_id": "57838016001",
      "sources": [
        {
          "ext_x_version": "4",
          "type": "application/x-mpegURL",
          "src": "https://manifest.prod.boltdns.net/manifest/v1/hls/v4/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/10s/master.m3u8?fastly_token=NTk1YmE0ZmZfOGU5Njg0NGU1OWQ3NjI3ZDhmY2FhZTVmNGE0YzI1MWM1NjMyNTZkNzMzZmExMzRkN2ZmYzU0YWU5NzUyZTM2YQ%3D%3D"
        },
        {
          "ext_x_version": "5",
          "type": "application/x-mpegURL",
          "src": "https://manifest.prod.boltdns.net/manifest/v1/hls/v5/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/10s/master.m3u8?fastly_token=NTk1YmE0ZmZfOTBkOThhYmQ5MWM0MmQwYmQwYTM4MGEzMjAzZTgyNDVlMDYzYzNhMzQ1ZWQ3MTMyMzVmM2Q1YjM2N2VlMjM0Yg%3D%3D"
        },
        {
          "type": "application/dash+xml",
          "src": "https://manifest.prod.boltdns.net/manifest/v1/dash/live-baseurl/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/2s/manifest.mpd?fastly_token=NTk1YmE0ZmZfYzQyOWJiOTEzMGJmNGIyMjM1NmMwMzZmNGZkZjlkYjEzMzNmNzFlYmQxODg0Y2YzZDk3ZTljNzVhODg1YzRjMQ%3D%3D",
          "profiles": "urn:mpeg:dash:profile:isoff-live:2011"
        },
        {
          "avg_bitrate": 2129000,
          "width": 1280,
          "src": "https://bcbolt446c5271-a.akamaihd.net/media/v1/pmp4/static/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/high.mp4?akamai_token=exp=1499178239~acl=/media/v1/pmp4/static/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/high.mp4*~hmac=5880698556297bbe2f2f43ac8904c659c61fb9510db1a9bb106037eaea393339",
          "size": 13242064,
          "height": 720,
          "duration": 49690,
          "container": "MP4",
          "codec": "H264"
        },
        {
          "avg_bitrate": 574000,
          "width": 480,
          "src": "https://bcbolt446c5271-a.akamaihd.net/media/v1/pmp4/static/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/mid.mp4?akamai_token=exp=1499178239~acl=/media/v1/pmp4/static/clear/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/mid.mp4*~hmac=75e51439623a41b93d2a234c25683e76d43656f97a9dfb8efe61a5342d5ff2da",
          "size": 3586929,
          "height": 270,
          "duration": 49690,
          "container": "MP4",
          "codec": "H264"
        }
      ],
      "name": "Canada_Geese_Family",
      "reference_id": null,
      "long_description": null,
      "duration": 49633,
      "economics": "AD_SUPPORTED",
      "published_at": "2017-06-05T11:20:52.412Z",
      "text_tracks": [],
      "updated_at": "2017-06-05T12:06:55.121Z",
      "thumbnail": "https://cf-images.us-east-1.prod.boltdns.net/v1/jit/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/main/160x90/24s816ms/match/image.jpg",
      "poster": "https://cf-images.us-east-1.prod.boltdns.net/v1/jit/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/main/1280x720/24s816ms/match/image.jpg",
      "offline_enabled": false,
      "link": null,
      "id": "5459968909001",
      "ad_keys": null,
      "thumbnail_sources": [
        {
          "src": "https://cf-images.us-east-1.prod.boltdns.net/v1/jit/57838016001/853641cb-d66b-4f08-bb02-8489b5fba897/main/160x90/24s816ms/match/image.jpg"
        }
      ],
      "created_at": "2017-06-05T11:20:52.412Z"
    }
    </code>
    </pre>
    </section>

    <section class="bcls-section">
    <h2 id="drm">數字版權管理</h2>

    <p>支持DRM，但與普通視頻攝取不同。你做<strong>不是</strong>需要在攝取配置文件中指定包裝。而是根據您帳戶的DRM設置自動打包。<a href="https://supportportal.brightcove.com/s/login/?language=en_US">聯繫Brightcove支持</a>為視頻的DRM打包設置默認值。</p>

    <p>有關更多詳細信息，請參見<a href="/dynamic-ingest/ingest-guides/ingesting-content-drm.html#DRM_for_dynamic_delivery">使用DRM提取內容</a>。</p>
    </section>

    <section class="bcls-section">
    <h2 id="watermark">帶水印的演繹</h2>

    <p><a href="/ingest-profiles/references/ingest-profiles-api-fields-reference-dynamic-delivery-and-context-aware-encoding.html#watermarkFields">帶水印的演繹</a>支持。如果您希望在部分或全部視頻中添加水印，請聯繫Brightcove支持。</p>

    <p>請注意，可以為靜態動態投放配置文件添加帶水印的副本，但是<strong>不是</strong>上下文感知編碼（CAE）配置文件。</p>
    </section>

    <section class="bcls-section">
    <h2 id="notifications">攝取狀態</h2>

    <p>您可以通過訂閱回調和/或查詢狀態 API 以獲取作業狀態來接收有關動態交付攝取處理的信息。</p>

    <h3>回呼</h3>

    <p>在提取請求中，您可以指定一個或多個回調URL，以接收有關提取過程結果的通知。您指定的 URL 應該用於可以接受 POST 請求的應用程序。通知將以JSON格式發送。</p>

    <p>有關接收和解釋通知的詳細信息，請參見<a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">通知事項</a></p>

    <h3>狀態接口</h3>

    <p>您還可以使用 Status API 獲取攝取作業的當前狀態。狀態消息僅適用於過去 7 天內提交的攝取作業。</p>

    <h4>終點</h4>

    <h5>視頻的所有狀態消息</h5>

    <pre>
    <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/:account_id/videos/:video_id/ingest_jobs
    </code>
    </pre>

    <h5>例子</h5>

    <pre>
    <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/57838016001/videos/5128433746001/ingest_jobs
    </code>
    </pre>

    <h5>特定作業的狀態消息</h5>

    <pre>
    <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/:account_id/videos/:video_id/ingest_jobs/:job_id
    </code>
    </pre>

    <h5>例子</h5>
    <textarea class="bcls-code">https://cms.api.brightcove.com/v1/accounts/57838016001/videos/5128433746001/ingest_jobs/7a196557-56ba-4218-ada5-e107ed554555</textarea>

    <h4>回應</h4>

    <p>以下是當前正在處理的作業的示例響應。</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "id": "7a196557-56ba-4218-ada5-e107ed554555",
    <span class="bcls-highlight">"state": "processing",</span>
    "account_id": "57838016001",
    "video_id": "5128433746001",
    <span class="bcls-highlight">"error_code": null,</span>
    <span class="bcls-highlight">"error_message": null,</span>
    "updated_at": "2016-09-16T16:51:46.313Z",
    "started_at": "2016-09-16T16:51:22.258Z"
    }
    </code>
    </pre>

    <p>這裡最重要的項目是：</p>

    <ul>
      <li><code translate="No">state </code>：工作狀態（<code translate="No">processing </code> | <code translate="No">publishing </code> | <code translate="No">finished </code> | <code translate="No">failed </code> -完成這項工作並且可以播放視頻後，<code translate="No">state </code>將<code translate="No">finished </code>）</li>
      <li><code translate="No">error_code </code>和<code translate="No">error_message </code>：對於一項成功的工作，這些將是<code translate="No">null </code> ;對於失敗的作業，您將收到錯誤代碼和說明性消息</li>
    </ul>

    <p>這是一個失敗的作業的狀態消息的示例，用於比較：</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
    "id": "bc9dfb58-d502-43d5-97e4-41f3dcd44265",
    <span class="bcls-highlight">"state": "failed",</span>
    "account_id": "57838016001",
    "video_id": "5128710227001",
    <span class="bcls-highlight">"error_code": "NoMediaError",</span>
    <span class="bcls-highlight">"error_message": "Audio-only output was requested on a file that only contains video.",</span>
    "updated_at": "2016-09-16T20:30:58.016Z",
    "started_at": "2016-09-16T20:29:14.139Z"
    }
    </code>
    </pre>
    </section>

    <section class="bcls-section">
    <h2 id="context_aware_profiles">上下文感知編碼 </h2>

    <p>上下文感知編碼（CAE）是Brightcove開發的一項技術，用於在轉碼過程中分析源視頻，並根據視頻的複雜性和提供的一組邊界參數（最小再現次數，最大比特率）生成最佳的再現和比特率集。 ， 等等。）。</p>

    <p>要了解如何使用 CAE 配置文件，請參閱<a href="/dynamic-ingest/ingest-guides/context-aware-encoding.html">上下文感知編碼</a> .</p>
    </section>

    <section class="bcls-section">
    <h2 id="Multiple_audio_tracks">多個音軌</h2>

    <p>可以啟用為動態投放設置的帳戶，以允許視頻有多個音軌。</p>

    <p>將多個音軌與單個標題相關聯的能力在以下幾個關鍵場景中非常有用：</p>

    <ul>
      <li>播放不同語言的同一視頻，以在全球範圍內擴大覆蓋範圍 </li>
      <li>為視力障礙者提供音頻和描述</li>
    </ul>

    <p>有關使用此功能的詳細信息，請參見<a href="/dynamic-ingest/ingest-guides/implementing-multiple-audio-tracks-using-apis.html#Managing_audio_tracks">多個音軌</a>。</p>
    </section>

    <section class="bcls-section">
    <h2 id="sample_code">示例代碼</h2>

    <p>學習服務提供了幾個示例應用程序，這些應用程序提供了一個 Web 界面並發送<span translate="No">動態攝取 API</span>通過 PHP 代理請求。<a href="/dynamic-ingest/code-samples/index.html">查看示例應用程序</a> .</p>

    <p>此外，以下GitHub存儲庫包含Java，Python和C＃的示例代碼-請注意，此示例代碼為<strong>不支持</strong>通過Brightcove：</p>

    <ul>
      <li><a href="https://github.com/BrightcoveLearning/dynamic-ingest-code-samples">Java和Python示例</a></li>
      <li><a href="https://github.com/houseofmackee/BrightcoveCS/tree/master/BrightcoveDI">C＃樣本</a></li>
    </ul>
    </section>

    <section class="bcls-section">
    <h2 id="limitations">局限性</h2>

    <ul>
      <li>對於分段視頻類型（HLS和DASH），某些播放器無法處理音頻和視頻流長度相差超過分段持續時間的情況。如果遇到這種情況，請嘗試使用較短的段長度。</li>
    </ul>
    </section>
    </article>