---
title: '獲取動態攝取請求的狀態'
description: '當您使用<span translate="No">動態攝取 API</span>要將視頻添加到您的 Video Cloud 帳戶，您最想知道的是視頻何時被處理以及是否成功創建了再現。'
parent: 'General Information' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="introduction">介紹</h2>

    <p>本文檔說明瞭如何通過向<span translate="No">內容管理系統 API</span>或通過使用<span translate="No">動態攝取 API</span><a href="/dynamic-ingest/general/notifications-dynamic-delivery-video-cloud.html">通知</a> .我們還提供了一個示例儀表板應用程序，可自動執行該過程</p>

    <p>請注意，提取作業的狀態僅適用於過去7天提交的作業。</p>
    </section>

    <section class="bcls-section">
    <h2 id="requesting_status">要求狀態</h2>

    <p>您可以使用以下命令獲取動態攝取作業（攝取、替換或重新轉碼）的狀態<a href="/cms/references/reference.html#operation/GetStatusOfIngestJob">這些<span translate="No">內容管理系統 API</span>端點</a> - 請注意，這些端點適用於<strong>僅限動態交付作業</strong>：</p>

    <h3>獲取所有職位的狀態</h3>

    <pre>
    <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/{account_id}/videos/{video_id}/ingest_jobs</code></pre>

    <p>響應將如下所示：</p>

    <pre class="line-numbers">
     <code class="language-json" translate="No">[
      {
        "id": "ac49b1db-e6e1-477f-a2c1-70b9cd3107cb",
        "state": "finished",
        "account_id": "57838016001",
        "video_id": "5636411346001",
        "error_code": null,
        "error_message": null,
        "updated_at": "2017-11-07T13:56:51.505Z",
        "started_at": "2017-11-07T13:56:12.510Z",
        "priority": "normal",
        "submitted_at": "2017-11-07T13:56:12.435Z"
      },
      {
        "id": "10605652-8b6f-4f22-b190-01bd1938677b",
        "state": "processing",
        "account_id": "57838016001",
        "video_id": "5636411346001",
        "error_code": null,
        "error_message": null,
        "updated_at": null,
        "started_at": null,
        "priority": "low",
        "submitted_at": "2017-11-07T14:06:35.000Z"
      }
    ]</code></pre>

    <h3>獲取特定工作的狀態</h3>

    <pre>
    <code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/{account_id}/videos/{video_id}/ingest_jobs/{job_id}</code></pre>

    <p>響應將如下所示：</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
        "id": "ac49b1db-e6e1-477f-a2c1-70b9cd3107cb",
        "state": "finished",
        "account_id": "57838016001",
        "video_id": "5636411346001",
        "error_code": null,
        "error_message": null,
        "updated_at": "2017-11-07T13:56:51.505Z",
        "started_at": "2017-11-07T13:56:12.510Z",
        "priority": "normal",
        "submitted_at": "2017-11-07T13:56:12.435Z"
      }</code></pre>

    <p>可能的值<code translate="No">state</code>是：</p>

    <ul>
      <li><code translate="No">processing</code>：正在處理，視頻尚無法播放</li>
      <li><code translate="No">publishing</code>：已創建至少一個可播放的演繹文件，並且正在準備播放視頻</li>
      <li><code translate="No">published</code>：至少有一個演繹版本可供播放</li>
      <li><code translate="No">finished</code>：至少處理了一個音頻/視頻再現</li>
      <li><code translate="No">failed</code>：處理失敗；如果您無法找出問題所在，請與支持小組聯繫</li>
    </ul>
    </section>

    <section class="bcls-section" id="dataSources">
    <h2>獲取通知</h2>

    <p>雖然上面討論的請求狀態方法有效，但如果您正在等待特定狀態（<code translate="No">published</code>或者<code translate="No">finished</code> ) 時，最好讓 Brightcove 在發生這些事件時通知您，而不必一直詢問狀態，直到您得到所需的答案。我們現在將研究如何圍繞處理通知構建應用程序。</p>

    <p>動態攝取通知為您提供視頻準備就緒所需的所有信息 - 您只需要知道要查找的內容......並定義“準備就緒”對您的系統意味著什麼。此圖總結了工作流程：</p>

    <figure class="bcls-figure"><img class="bcls-image" alt="Ingest Status Workflow" src="/assets/images/dynamic-ingest/general/ingestion-status-architecture.svg" />
    <figcaption class="bcls-caption--image">攝取狀態工作流程</figcaption>
    </figure>
    </section>

    <section id="Dynamic_Ingest_Notifications" class="bcls-section">
    <h2>動態攝取通知</h2>

    <p>動態攝取通知服務會向您發送有關多種事件的通知。對於確定視頻何時“準備好”最有用的兩個是指示已創建特定再現的一個和指示所有處理已完成的一個。以下是每個示例的示例：</p>

    <h3>動態再現創建的通知</h3>

    <figure class="bcls-figure">
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      <span class="bcls-highlight">"entity": "default/video3800",</span>
      <span class="bcls-highlight">"entityType": "DYNAMIC_RENDITION",</span>
      "version": "1",
      <span class="bcls-highlight">"action": "CREATE",</span>
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "dynamicRenditionId": "default\/video3800",
      "bitrate": 3804,
      "width": 1920,
      "height": 1080,
      "accountId": "57838016001",
      <span class="bcls-highlight">"status": "SUCCESS"</span>
    }
    </code>
    </pre>

    <figcaption class="bcls-caption--image">移交通知已創建</figcaption>
    </figure>

    <p>在此示例中註意：</p>

    <ul>
      <li>這<code translate="No">videoId </code>值可讓您知道再現針對哪個視頻（以防您有多個攝取作業正在運行）</li>
      <li>這<code translate="No">entity </code> value 是創建的動態呈現類型</li>
      <li>如果<code translate="No">status </code>值為“SUCCESS"，表示創建成功</li>
    </ul>

    <h3>處理完成通知</h3>

    <figure class="bcls-figure">
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "entity": "5660367449001",
      <span class="bcls-highlight">"entityType": "TITLE",</span>
      "version": "1",
      <span class="bcls-highlight">"action": "CREATE",</span>
      "jobId": "d3ef8751-2b88-4141-95d5-83f0393aca07",
      "videoId": "5660367449001",
      "accountId": "57838016001",
      <span class="bcls-highlight">"status": "SUCCESS"</span>
    }
    </code>
    </pre>

    <figcaption class="bcls-caption--image">處理完成通知</figcaption>
    </figure>

    <p>在此示例中註意：</p>

    <ul>
      <li>這<code translate="No">videoId </code>和<code translate="No">jobId </code>值讓您知道這是用於哪個視頻（以防您有多個攝取作業正在運行）</li>
      <li>如果<code translate="No">status </code>值為“SUCCESS"，視頻已成功處理</li>
    </ul>

    <p>要接收通知，您需要在其中包含一個“回調”字段<span translate="No">動態攝取 API</span>請求，指向一個或多個回調地址：</p>

    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "master": {
      "url": "https://s3.amazonaws.com/bucket/mysourcevideo.mp4"
      }, "profile": "multi-platform-extended-static",
      <strong>"callbacks": ["http://host1/path1”, “http://host2/path2”]</strong>
    }
    </code>
    </pre>
    </section>

    <section class="bcls-section" id="sample">
    <h2>示例儀表板</h2>

    <p>本節介紹瞭如何將通知放在一起以構建用於 Dynamic Ingest API 的簡單儀表板。通知處理程序解析來自<span translate="No">動態攝取 API</span>識別處理完成通知。然後，它將視頻通知添加到JSON文件中每個視頻的對像數組中。儀表板本身是一個 HTML 頁面，用於導入 JSON 文件以獲取通知數據。它使用ID向<a href="/cms/getting-started/overview-cms-api.html">CMS API</a>獲取視頻元數據。</p>
    <!-- You can view the dashboard <a href="//solutions.brightcove.com/bcls/di-api/di-log.html">here</a> --><!-- <p>All the files for this app, along with instructions for setting it up for your account, are in <a href="https://github.com/BrightcoveLearning/dynamic-ingest-dashboard">this repository</a>.</p> -->

    <p>這是應用程序的高級架構：</p>

    <figure class="bcls-figure"><img class="bcls-image" alt="Ingest Dashboard Architecture" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/general-information/di-status/ingestion-dashboard-architecture.svg" />
    <figcaption class="bcls-caption--image">提取儀表板架構</figcaption>
    </figure>

    <h3>應用程序部分</h3>

    <p>通知處理程序是用 PHP 構建的——它會查找處理完整的通知並將視頻 ID 添加到一個單獨的 JavaScript 文件中的數組中：</p>

    <pre class="line-numbers">
    <code class="language-php">&lt;?php // POST 不適用於 JSON 數據 $problem = "No errors";嘗試{ $json = file_get_contents('php://input'); $decoded = json_decode($json, true); }捕獲（異常 $e）{ $problem = $e-&gt;getMessage(); echo $problem; } // 完整通知 $notification = json_encode($decoded, JSON_PRETTY_PRINT); // 首先提取通知的有用部分 // 對於動態交付，查找 'videoId'  if (isset($decoded["videoId"])) { $videoId = $decoded["videoId"]; } elseif (isset($decoded["entity"])) { $videoId = $decoded["entity"]; }別的{ $videoId = null; } if (isset($decoded["entityType"])) { $entityType = $decoded["entityType"]; }別的{ $entityType = null; } if (isset($decoded["status"])) { $status = $decoded["status"]; }別的{ $status = null; } if (isset($decoded["action"])) { $action = $decoded["action"]; }別的{ $action = null; } // 如果通知是針對已完成的標題，則執行 if (($entityType == 'TITLE') &amp;&amp; ($action == 'CREATE')) { if (($status == 'SUCCESS') || ($status == 'FAILED')) { $newLine = "\nvideoIdArray.unshift(".$videoId.");"; // Tell PHP where it can find the log file and tell PHP to open it // and add the string we created earlier to it. $logFileLocation = "video-ids.js"; $fileHandle = fopen($logFileLocation, 'a') or die("-1"); chmod($logFileLocation, 0777); fwrite($fileHandle, $newLine); fclose($fileHandle); } } // 保存審計跟踪的完整通知 $logEntry = $notification.",\\n"; $logFileLocation = "full-log.txt"; $fileHandle = fopen($logFileLocation, 'a') 或 die("-1"); chmod($logFileLocation, 0777); fwrite($fileHandle, $logEntry); fclose($fileHandle); echo "動態攝取回調應用程序正在運行"; ?&gt;</code>
      </pre>

    <h4>JSON文件：</h4>

    <p>JSON 文件最初是一個空數組 ( <code translate="No">[] </code> ) - 數據由通知處理程序添加。</p>

    <h4>儀表板</h4>

    <p>儀表板包括 HTML 和 JavaScript，用於從<span translate="No">內容管理系統 API</span>並將結果寫入表格：</p>

    <pre class="line-numbers">
      <code class="language-html" translate="No">&lt;!DOCTYPE html&gt;
      &lt;html&gt;
      &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
        &lt;title&gt;Dynamic Ingest Log&lt;/title&gt;
        &lt;style&gt;
        body {
        font-family: sans-serif;
        margin: 5em;
        }
        .hide {
        display: none;
        }
        .show {
        display: block;
        }
        table {
        border-collapse: collapse;
        border: 1px #999999 solid;
        }
        th {
        background-color: #666666;
        color: #f5f5f5;
        padding: .5em;
        font-size: .7em;
        }
        td {
        border: 1px #999999 solid;
        font-size: .7em;
        padding: .5em
        }
        .hidden {
        display: none;
        }
        &lt;/style&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;h1&gt;Dynamic Ingest Log&lt;/h1&gt;
        &lt;h2&gt;Account: Brightcove Learning (57838016001)&lt;/h2&gt;
        &lt;p style="width:70%"&gt;
          Videos are listed in order of processing completion time, newest to oldest. The reference id (generated by the &lt;a href="./di-tester.html"&gt;Dynamic Ingest tester&lt;/a&gt;) is a combination of the date/time that the Dynamic Ingest job was initiated and the ingest profile that was used. You can add additional videos using the &lt;a href="./di-tester.html"&gt;Dynamic Ingest tester&lt;/a&gt;. New videos will appear in this log after processing is complete.
        &lt;/p&gt;
        &lt;p&gt;
          &lt;button id="clearLogBtn"&gt;Clear the log&lt;/button&gt;
        &lt;/p&gt;
        &lt;div id="videoLogBlock"&gt;
          &lt;table&gt;
            &lt;thead&gt;
              &lt;tr&gt;
                &lt;th&gt;Video ID&lt;/th&gt;
                &lt;th&gt;Name&lt;/th&gt;
                &lt;th&gt;Reference ID&lt;/th&gt;
                &lt;th&gt;Renditions Created&lt;/th&gt;
                &lt;th&gt;Processing Complete&lt;/th&gt;
              &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody id="logBody"&gt;&lt;/tbody&gt;
          &lt;/table&gt;
          &lt;h4 id="loadingMessage"&gt;Loading data, please wait...&lt;/h4&gt;
        &lt;/div&gt;
        &lt;script&gt;
        var BCLS = ( function (window, document) {
          // to use another account, set the account_id value appropriately
          // the client_id and client_secret will also need to be changed in the proxy
          var my_account_id = 57838016001,
            account_id = my_account_id,
            logBody = document.getElementById('logBody'),
            loadingMessage = document.getElementById('loadingMessage'),
            clearLogBtn = document.getElementById('clearLogBtn'),
            i = 0,
            iMax,
            // set the proxyURL to the location of the proxy app that makes Brightcove API requests
            proxyURL = './brightcove-learning-proxy.php',
            dataFileURL = './di.json',
            videoDataArray = [],
            requestOptions = {},
            currentVideo,
            currentIndex = 0;
          /**
          * tests for all the ways a variable might be undefined or not have a value
          * @param {*} x the variable to test
          * @return {Boolean} true if variable is defined and has a value
          */
          function isDefined(x) {
            if ( x === '' || x === null || x === undefined || x === NaN) {
            return false;
          }
          return true;
          }
          /**
          * find index of an object in array of objects
          * based on some property value
          *
          * @param {array} targetArray - array to search
          * @param {string} objProperty - object property to search
          * @param {string|number} value - value of the property to search for
          * @return {integer} index of first instance if found, otherwise returns null
          */
          function findObjectInArray(targetArray, objProperty, value) {
            var i, totalItems = targetArray.length, objFound = false;
            for (i = 0; i &lt; totalItems; i++) {
              if (targetArray[i][objProperty] === value) {
                objFound = true;
                return i;
              }
            }
            if (objFound === false) {
              return null;
            }
          }
          /**
          * factory for new video objects
          * @param {String} videoId the video id
          * @return {object} the new object
          */
          function makeVideoDataObject(videoId) {
            var obj = {};
            obj.id = videoId;
            obj.name = '';
            obj.reference_id = '';
            obj.renditions = 0;
            obj.complete = 'no';
            return obj;
          }
          /**
          * processes notification objects
          * creates a new object in the videoDataArray if it doesn't exist
          * and updates the videoDataArray object based on the notification
          * @param {Object} notificationObj the raw notification object
          */
          function processNotification(notificationObj) {
            var objIndex, videoObj;
            // if notification object contains a video id, find the corresponding
            // object in the videoDataArray or create it if it's not there
            if (isDefined(notificationObj) &amp;&amp; isDefined(notificationObj.videoId)) {
              objIndex = findObjectInArray(videoDataArray, 'id', notificationObj.videoId);
              // if not found, create one
              if (!isDefined(objIndex)) {
                videoObj = makeVideoDataObject(notificationObj.videoId);
                videoDataArray.push(videoObj);
                objIndex = videoDataArray.length - 1;
              }
              // now update properties based on what's in the notification
              if (notificationObj.entityType === 'DYNAMIC_RENDITION') {
                // increment the renditions account
                videoDataArray[objIndex].renditions++;
              }
            } else if (notificationObj.entityType === 'TITLE') {
              // overall processing notification - checked for SUCCESS / FAILED
              if (notificationObj.status === 'SUCCESS') {
                // mark complete
                videoDataArray[objIndex].complete = 'yes';
              } else if (notificationObj.status === 'FAILED') {
                // mark failed
                videoDataArray[objIndex].complete = 'failed';
              }
            }
            return;
          }
          /**
          * creates the dashboard table body
          */
          function writeReport() {
            var j,
              jMax = videoDataArray.length,
              item,
              t;
            loadingMessage.textContent = 'This page will refresh in 1 minute...';
            for (j = 0; j &lt; jMax; j++) {
              item = videoDataArray[j];
              if (item.id !== undefined) {
                logBody.innerHTML += '&lt;tr&gt;&lt;td&gt;' + item.id + '&lt;/td&gt;&lt;td&gt;' + item.name + '&lt;/td&gt;&lt;td&gt;' + item.reference_id + '&lt;/td&gt;&lt;td&gt;' + item.renditions + '&lt;/td&gt;&lt;td&gt;' + item.complete + '&lt;/td&gt;&lt;/tr&gt;';
              }
            }
            // set timeout for refresh
            t = window.setTimeout(init, 60000);
          };
          // function to set up the notification data request
          function setJSONRequestOptions() {
            submitRequest(null, dataFileURL, 'notificationData');
          }
          // function to set up video data request
          function setVideoRequestOptions() {
            requestOptions = {};
            requestOptions.url = 'https://cms.api.brightcove.com/v1/accounts/' + account_id + '/videos/' + currentVideo.id;
            submitRequest(requestOptions, proxyURL, 'video');
          }
          /**
          * initiates the <span translate="No">CMS API</span> requests
          */
          function getVideoInfo() {
            iMax = videoDataArray.length;
            if (currentIndex &lt; iMax) {
              currentVideo = videoDataArray[currentIndex];
              setVideoRequestOptions();
            } else {
              loadingMessage.innerHTML = 'No videos have been ingested - you can add some using the &lt;a href="./di-tester.html"&gt;Dynamic Ingest tester&lt;/a&gt;';
            }
          }
          /**
          * make the <span translate="No">CMS API</span> requests
          * @param {Object} options request options
          * @param (String) url URL to send request to
          * @param (String) type the request type
          */
          function submitRequest(options, url, type) {
            var httpRequest = new XMLHttpRequest(),
              requestData,
              responseData,
              videoDataObject,
              parsedData,
              getResponse = function () {
              try {
                if (httpRequest.readyState === 4) {
                  if (httpRequest.status === 200) {
                    responseData = httpRequest.responseText;
                    switch (type) {
                      case 'notificationData':
                          var k, kMax, dataArray;
                          dataArray = JSON.parse(responseData);
                          // process the notifications
                          kMax = dataArray.length;
                          for (k = 0; k &lt; kMax; k++) {
                          processNotification(dataArray[k]);
                        }
                        getVideoInfo();
                        break;
                      case 'video':
                        parsedData = JSON.parse(responseData);
                        videoDataArray[currentIndex].reference_id = parsedData.reference_id;
                        videoDataArray[currentIndex].name = parsedData.name;
                        currentIndex++;
                        if (currentIndex &lt; iMax) {
                        currentVideo = videoDataArray[currentIndex];
                        setVideoRequestOptions();
                        } else {
                        writeReport();
                        }
                        break;
                    }
                  } else {
                    console.log('There was a problem with the request. Request returned '', httpRequest.status);
                    if (type === 'video') {
                      setVideoRequestOptions();
                    } else {
                      setSourcesRequestOptions();
                    }
                  }
                }
              }
              catch(e) {
              console.log('Caught Exception: ', e);
              }
            };
            // notifications data is a special case
            if (type === 'notificationData') {
              // set response handler
              httpRequest.onreadystatechange = getResponse;
              // open the request
              httpRequest.open("GET", url);
              // set headers
              httpRequest.setRequestHeader("Content-Type", "application/json");
              // open and send request
              httpRequest.send();
            } else {
              // requests via proxy
              // set up request data
              requestData = "url=" + encodeURIComponent(options.url) + "&amp;requestType=GET";
              // set response handler
              httpRequest.onreadystatechange = getResponse;
              // open the request
              httpRequest.open("POST", url);
              // set headers
              httpRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
              // open and send request
              httpRequest.send(requestData);
            }
          };
          // event handlers
          clearLogBtn.addEventListener('click', function () {
            if (window.confirm('Are you sure? This action cannot be undone!')) {
            // if your clear-log app resides in another location, change the URL
            window.location.href = 'clear-log.php';
            }
          });
          // get things started
          function init() {
            // clear table and the video data array
            logBody.innerHTML = "";
            videoDataArray = [];
            setJSONRequestOptions();
          }
          // kick off the app
          init();
        })(window, document);
        &lt;/script&gt;
      &lt;/body&gt;
    &lt;/html&gt;
    </code>
    </pre>

    <aside class="bcls-aside bcls-aside--tip">這裡有一個設計選擇：您可以使用通知處理程序或儀表板（或兩者的組合）來處理通知並提取有用的信息。在這種應用程序中，我們希望保持通知處理程序簡單，僅使用它來傳遞通知數據，然後讓客戶端應用程序（在本例中為儀表板）進行信息處理。這需要在客戶端進行更多處理，但會使通知處理程序更可重用。</aside>

    <h4>代理人</h4>

    <pre class="line-numbers">
    <code class="language-php">&lt;?php /** * Brightcove-learning-proxy.php - Brightcove RESTful API 的代理 * 獲取訪問令牌，發出請求，並返迴響應 * 訪問： * URL：https://solutions.brightcove.com/ bcls/bcls-proxy/bcsl-proxy.php *（注意你應該*總是*通過HTTPS訪問代理）*方法：發布 * * @post {string} url - API 請求的 URL * @post {string} [requestType=GET] - 請求的 HTTP 方法 * @post {string} [requestBody=null] - JSON 數據與寫請求一起發送 * * @returns {string} $response - 從 API 收到的 JSON 響應 */ // CORS enablement header("Access-Control-Allow-Origin: *"); // 設置訪問令牌請求 $data = array(); // // 更改下面的值以將此代理用於不同的帳戶 // $client_id = "YOUR_CLIENT_ID_HERE"; $client_secret = "YOUR_CLIENT_SECRET_HERE"; $auth_string = " {$client_id}：{$client_secret} "; $request = "https://oauth.brightcove.com/v4/access_token?grant_type=client_credentials"; $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_POST =&gt; TRUE, CURLOPT_RETURNTRANSFER =&gt; TRUE , CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_USERPWD =&gt; $auth_string, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/x-www-form-urlencoded', ), CURLOPT_POSTFIELDS =&gt; $data )); $response = curl_exec($ch ); curl_close($ch); // 檢查錯誤 if ($response === FALSE) { die(curl_error($ch)); } // 解碼響應 $responseData = json_decode($response, TRUE); $access_token = $responseData["access_token"]; // 設置 API 調用 // 獲取數據 if ($_POST["requestBody"]) { $data = json_decode($_POST["requestBody"]); }別的{ $data = array(); } // 獲取請求類型或默認為 GET if ($_POST["requestType"]) { $method = $_POST["requestType"]; }別的{ $method = "GET"; } // 從表單數據中獲取 URL 和授權信息 $request = $_POST["url"]; //發送http請求 $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/json', "Authorization:持票人{$access_token} ", ), CURLOPT_POSTFIELDS =&gt; json_encode($data) )); $response = curl_exec($ch); curl_close($ch); // 檢查錯誤 if ($response === FALSE) { echo "Error: "+$response; die(curl_error($ch)); } // 解碼響應 // $responseData = json_decode($response, TRUE); // 將響應返回給 AJAX 調用者 echo $response; ?&gt;</code>
    </pre>

    <h4>清除日誌</h4>

    <p>這個簡單的 PHP 應用程序只是將 JavaScript 文件恢復到其原始狀態，清除舊的視頻 ID：</p>

    <pre class="line-numbers">
    <code class="language-php">&lt;?php $logFileLocation = "di.json"; $freshContent = 數組(); $encodedContent = json_encode($freshContent); file_put_contents($logFileLocation, $encodedContent); echo '日誌文件已清除 - &lt;a href="di-log.html"&gt;返回儀表板&lt;/a&gt;'; ?&gt;</code>
    </pre>
    </section>
    </article>