---
title: '攝取 WebVTT 文件'
description: '動態攝取可用於在您的視頻中攝取 WebVTT 文件（用於字幕、副標題、章節等），或在攝取視頻後單獨攝取。對於動態投放視頻，您還可以提取SRT，DFXP或SCC字幕。本主題介紹了使用 Dynamic Ingest API 將文本軌道文件添加到視頻的詳細信息。'
parent: 'Ingest Guides' 
grandparent: Dynamic Ingest API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="setup">設置</h2>
    
    <p>動態攝取請求的設置是相同的，無論您是攝取視頻、圖像、WebVTT 文件還是所有這些：</p>
    
    <dl>
      <dt>要求網址</dt>
      <dd>
      <pre>
        <code class="language-http" translate="No">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/ingest-requests</code></pre>
      </dd>
      <dt>驗證</dt>
      <dd>身份驗證需要以令牌形式傳遞的訪問令牌<code translate="No">Bearer</code>令牌中<code translate="No">Authorization</code>標頭：
      <pre>
        <code class="language-bash" translate="No">Authorization: Bearer {access_token}</code></pre>
      </dd>
    </dl>
    </section>
    
    <section class="bcls-section">
    <h2 id="s3">關於S3的注意事項</h2>
    
    <p>如果將從受保護的S3存儲桶中提取WebVTT，則需要設置存儲桶策略以允許Video Cloud訪問文件。看<a href="/dynamic-ingest/general/using-dynamic-ingest-s3.html#setPolicy">在 S3 中使用動態攝取</a>詳情。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="ingestWebVTT">攝取WebVTT文件</h2>
    
    <p>您還可以將 WebVTT 字幕添加到您的視頻中，或使用 Dynamic Ingest 為現有視頻上傳它們：</p>
    
    <h3>在視頻攝取期間添加文本軌道</h3>
    
    <h4>要求網址</h4>
    
    <pre>
        <code class="language-http" translate="No">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/ingest-requests</code></pre>
    
    <h4>方法</h4>
    
    <p><code translate="No">POST</code></p>
    
    <h4>示例請求正文</h4>
    
    <pre class="line-numbers">
        <code class="language-json" translate="No">{
            "master": {
                "url":"http://learning-services-media.brightcove.com/videos/mp4/Water-Droplet.mp4"
            },
            "capture-images": false,
            "text_tracks": [
                {
        "url": "http://learning-services-media.brightcove.com/captions/for_video/Water-in-Motion.vtt",
        "srclang": "en",
        "kind": "captions",
        "label": "English",
        "default": true
                }
            ]
        }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="adding_srt_dfxp">添加/轉換SRT或DFXP</h2>
    
    <p>為了<strong>僅動態投放視頻</strong>，您可以採用相同的方式提取SRT或DFXP文件。Video Cloud 攝取系統會自動將它們轉換為 WebVTT 格式並將它們添加到視頻中。</p>
    
    <aside class="bcls-aside bcls-aside--information">注意：
    <ul>
      <li>DFXP 文件中設置的語言<code translate="No">xml:lang</code>必須匹配攝取調用中的值<code translate="No">srclang</code> .例如，如果<code translate="No">srclang</code>提取請求中的值是<code translate="No">en</code>，那麼DFXP文件必須包含<code translate="No">xml:lang="en"</code>。</li>
      <li>當將SRT文件中的自定義格式（例如，淡入淡出）轉換為WebVTT時，會從軌道中刪除該自定義格式。</li>
    </ul>
    </aside>
    
    <pre class="line-numbers">
        <code class="language-json" translate="No">{
            "text_tracks": [
              {
                "url": "http://media.brightcove.com/captions/Water.dfxp",
                "srclang": "fr",
                "kind": "captions",
                "label": "français",
                "default": true
              }
            ]
          }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="add_to_existing_video">添加文字跟踪現有視頻</h2>
    
    <p>將文本軌道添加到現有視頻中是完全相同的，只是您不需要請求主體中的任何視頻信息或配置文件。</p>
    
    <h4>要求網址</h4>
    
    <pre>
        <code class="language-http" translate="No">https://ingest.api.brightcove.com/v1/accounts/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/ingest-requests</code></pre>
    
    <h4>方法</h4>
    
    <p><code translate="No">POST</code></p>
    
    <h4>示例請求正文</h4>
    
    <pre class="line-numbers">
        <code class="language-json" translate="No">{
          "text_tracks": [
            {
              "url": "http://learning-services-media.brightcove.com/captions/for_video/Water-in-Motion.vtt",
              "srclang": "es",
              "kind": "captions",
              "label": "Español",
              "default": true
            }
          ]
        }</code></pre>
    
    <aside class="bcls-aside bcls-aside--information">
    <p>筆記：</p>
    
    <ol>
      <li>字幕文件名只能包含字母（大寫或小寫），數字，破折號（-）和下劃線（_）。</li>
      <li>這<code translate="No">label</code> Brightcove 播放器將字幕用於字幕語言菜單。最佳做法是為標籤使用適當的語言。例如：<code translate="No">français</code>為了<code translate="No">French</code>等等。</li>
      <li>字幕文本必須採用 UTF-8 編碼才能正確顯示雙字節語言（如日語和韓語）。</li>
      <li>默認值不是每個音軌，而是為相同語言的所有音軌設置為 true ( <code translate="No">srclang</code>）。</li>
      <li>對於圖像和文本軌道，僅支持公共HTTP或HTTPS URL或簽名的S3 URL。</li>
      <li>對於文本軌道，即使是重新編碼請求，Dynamic Ingest也會將其添加/添加到視頻的vtt列表中。你應該使用<a href="/cms/managing-videos/using-cms-api-add-webvtt-captions-text-tracks.html">內容管理系統 API</a>管理它們（更新/刪除）。</li>
      <li>動態提取一次最多接受100條文本軌道。</li>
      <li>雖然<code translate="No">"mime_type": "text/vtt"</code> WebVTT通常支持，Dynamic Ingest可以<strong>不是</strong>目前允許該字段吸收文本軌道。</li>
    </ol>
    </aside>
    
    <h3>將文本軌道添加到遠程資產視頻</h3>
    
    <p>看<a href="/cms/managing-videos/using-cms-api-remote-assets.html#addTextTracks">將文本軌道添加到遠程資產視頻</a> .</p>
    </section>
    </article>
 