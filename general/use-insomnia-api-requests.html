---
title: '將 Insomnia 用於 API 請求'
description: '在本主題中，您將學習如何設置流行的 Insomnia HTTP 客戶端以向 Brightcove RESTful API 發出請求。'
parent: General Information
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="introduction">介紹</h2>
    <p>有些人發現 curl 語句和命令行（用於我們平台 API 文檔中的許多示例）既困難又令人生畏。對於這些工具，有很多工具可以將HTTP請求發送到基於REST的服務，其中包括大多數Brightcove API。本文檔將向您展示如何使用一種流行的工具，即<a href="https://insomnia.rest"><span translate="No">失眠</span>應用程序</a> .</p>
  </section>
  <section class="bcls-section">
    <h2 id="Install_insomnia">安裝<span translate="No">失眠</span></h2>
    <p>得到<span translate="No">失眠</span>從<a href="https://insomnia.rest"><span translate="No">https://insomnia.rest</span></a> .<span translate="No">失眠</span>可以安裝在 Mac、Linux 或 Windows 系統上。</p>
		</section>
		<section class="bcls-section">
			<h2 id="authentication">驗證</h2>
    <p><span translate="No">失眠</span>可用於向 Brightcove 的任何 RESTful API 發出請求。大多數 API 使用 OAuth2 進行身份驗證，我們將在<span translate="no">失眠</span>在本文檔的後面。但是，您也可以通過簡單地設置適當的標頭，將其用於不使用OAuth的API。</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="Set Header in Insomnia" src="/assets/images/general/insomnia/18462-set-header.png" />
      <figcaption class="bcls-caption--image">設置標題<span translate="No">失眠</span></figcaption>
    </figure>
    <p>對於使用 Oauth2 以外的身份驗證方法的請求，該標頭的外觀如下所示：</p>
    <dl>
      <dt ><a href="/playback/index.html"><span translate="No">播放接口</span></a></dt>
      <dd >
        <pre>
  <code class="language-http" translate="No">BCOV-Policy: <span class="bcls-input">YOUR_POLICY_KEY</span></code></pre>
      </dd>
      <dt ><a href="https://live.support.brightcove.com/live-api/"><span translate="No">實時 API</span></a></dt>
      <dd >
        <pre>
  <code class="language-http" translate="No">X-API-KEY: <span class="bcls-input">YOUR_API_KEY</span></code></pre>
      </dd>
      <dt ><a href="https://zencoder.support.brightcove.com">編碼器 API</a></dt>
      <dd >
        <pre>
  <code class="language-http" translate="No">Zencoder-Api-Key: <span class="bcls-input">YOUR_API_KEY</span></code></pre>
      </dd>
    </dl>
  </section>
  <section class="bcls-section">
    <h2 id="getCredentials">獲取客戶憑證</h2>
    <p>要使用大多數 Brightcove API，您將需要您希望使用的帳戶和 API 的客戶端憑據。按照以下說明獲取Studio中的客戶憑據<a href="/general/managing-api-authentication-credentials.html">管理API身份驗證憑據</a>。在下面的步驟中，我們將使<span translate="No">內容管理系統 API</span>請求使用<span translate="No">失眠</span>，因此您的憑據應至少具有以下權限：</p>
    <ul>
      <li><strong>視頻</strong>：<strong>讀/寫</strong></li>
    </ul>
    <p>您可以根據需要添加任意數量的額外權限，以獲得可用於更廣泛 API 請求的憑據。另請注意，您可以根據需要獲取適用於多個帳戶的憑據。</p>
    <aside class="bcls-aside bcls-aside--information">為了生成客戶端憑據，您必須擁有 Studio 的管理員權限，或者讓組織中具有管理員權限的人員為您生成憑據。</aside>
  </section>
  <section class="bcls-section">
    <h2 id="usingInsomnia">使用<span translate="No">失眠</span></h2>
    <p>獲得客戶憑據後，您就可以開始使用<span translate="No">失眠</span> .<span translate="No">失眠</span>如果您導入我們提供給您的 CMS API 的 OpenAPI 規範，它將為您做很多設置工作。以下步驟將引導您完成一些設置<strong>內容管理系統 API</strong>請求使用<span translate="No">失眠</span> .</p>
    <h3>設置一個<span translate="No">失眠</span> CMS API 的集合</h3>
		<h4>獲取 CMS API 的 OpenAPI 規範</h4>
		<ol class="bcls-tasklist-restart">
			<li>打開<a href="/cms/references/reference.html">CMS API 參考</a> .</li>
			<li>
				點擊<strong>下載</strong>按鈕並保存<code translate="no">openapi.yaml</code>將文件放在可以再次找到的位置：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/download-cms-api-openapi-spec.png" alt="Download Open API Specification">
					<figcaption class="bcls-caption--image">下載開放 API 規範</figcaption>
				</figure>
			</li>
		</ol>
		<h4>將 OpenAPI 規範導入 Insomnia</h4>
    <ol class="bcls-tasklist-restart">
      <li>啟動<span translate="No">失眠</span>應用程序。</li>
      <li>點擊旁邊的下拉菜單<span translate="No">失眠</span>並選擇<strong>進出口</strong>：
        <figure class="bcls-figure"><img class="bcls-image" alt="Import/Export" src="/assets/images/general/insomnia/import-export.png" />
          <figcaption class="bcls-caption--image">進出口</figcaption>
        </figure>
      </li>
			<li>
				在打開的對話框中，單擊<strong>導入數據</strong>並選擇<strong>從文件</strong>：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/import-data-from-file.png" alt="Import Data from File">
					<figcaption class="bcls-caption--image">從文件導入數據</figcaption>
				</figure>
			</li>
			<li>
				選擇<code translate="no">openapi.yaml</code>您下載的文件，然後選擇是將數據導入當前工作區還是創建一個新工作區。兩者都可以，但我們建議為每個 API 創建一個新工作區：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/create-new-workspace.png" alt="Create New Workspace">
					<figcaption class="bcls-caption--image">創建新工作區</figcaption>
				</figure>
			</li>
			<li>
				接下來，您將被詢問是將數據作為請求集合還是作為設計文檔導入。選擇<strong>請求收集</strong>：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/import-request-collection.png" alt="Import as Request Collection">
					<figcaption class="bcls-caption--image">作為請求集合導入</figcaption>
				</figure>
			</li>
			<li>您將看到一個對話框，確認數據已導入。</li>
			<li>
				點擊<strong>儀錶盤</strong>在左上角查看您的工作區。如果您創建了一個新工作區，您將看到它顯示有適當的名稱：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/cms-api-workspace.png" alt="CMS API Workspace">
					<figcaption class="bcls-caption--image">CMS API 工作區</figcaption>
				</figure>
			</li>
      <li>單擊工作區以將其打開。</li>
			<li>
				您將看到一個文件夾列表，其中包含對 CMS API 的各種請求組，以及一個新的 OpenAPI 環境：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/cms-api-evironment-and-request-folders.png" alt="CMS API Requests and Environment">
					<figcaption class="bcls-caption--image">CMS API 請求和環境</figcaption>
				</figure>
			</li>
    </ol>
  </section>
	<section class="bcls-section">
		<h2 id="add_variables_to_environment">給環境添加變量</h2>
		<p>這是一個可選步驟，但它將簡化稍後為請求設置身份驗證的過程。</p>
		<ol class="bcls-tasklist-restart">
			<li>
				點擊<strong>OpenAPI 環境</strong>下拉菜單並選擇<strong>管理環境</strong>：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/" alt="Manage Environments">
					<figcaption class="bcls-caption--image">管理環境</figcaption>
				</figure>
			</li>
			<li>
				你會看到環境變量<span translate="no">失眠</span>從 OpenAPI 規範以 JSON 的形式創建：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/environment-json.png" alt="Environment Variables">
					<figcaption class="bcls-caption--image">環境變量</figcaption>
				</figure>
			</li>
			<li>
				將這些附加變量添加到 JSON（請參閱<a href="#getCredentials">獲取客戶憑據</a>以上在<code translate="no">客戶編號</code>和<code translate="no">客戶秘密</code> )：
				<ul>
					<li><code translate="no">“帳戶ID”： ”<span class="bcls-input"> your_account_id</span>”</code></li>
					<li><code translate="no">“client_id”：“<span class="bcls-input"> your_client_id</span>”</code></li>
					<li><code translate="no">“client_secret”：“<span class="bcls-input"> your_client_secret</span>”</code></li>
					<li>"access_token_url": "https://oauth.brightcove.com/v4/access_token"<code translate="no"></code></li>
				</ul>
			</li>
			<li>
				完成後，環境 JSON 應類似於以下內容：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/environment-vars-added.png" alt="Environment Variables Added">
					<figcaption class="bcls-caption--image">添加的環境變量</figcaption>
				</figure>
			</li>
			<li>點擊<strong>完畢</strong>在右下角退出對話框。</li>
		</ol>
	</section>
  <section class="bcls-section">
    <h2 id="Set_up_authentication">設置身份驗證</h2>
    <p>現在我們準備為 API 請求設置身份驗證。</p>
    <ol class="bcls-tasklist-restart">
      <li>點擊<strong>視頻</strong>文件夾，然後選擇<strong>獲取視頻</strong>：
        <figure class="bcls-figure"><img class="bcls-image" alt="New Request" src="/assets/images/general/insomnia/18462-new-request.png" />
          <figcaption class="bcls-caption--image">新要求</figcaption>
        </figure>
      </li>
			<li>
				請注意，請求的 URL 已包含兩個變量。如果您單擊這些，您可以查看（並修改）它們的值。<code translate="no">基地址</code>由自動生成<span class="”notranslate”">失眠</span>來自 OpenAPI 規範。如果你點擊<code translate="no">帳戶ID</code>，您應該會發現該值與您在上一節中作為環境變量輸入的值相匹配。</li>
      <li>
				點擊<strong>認證</strong>選項卡和<strong>身份驗證下拉列表</strong>菜單，然後選擇<strong>OAuth 2.0</strong>：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/select-auth-type.png" alt="Select Auth Type">
					<figcaption class="bcls-caption--image">選擇身份驗證類型</figcaption>
				</figure>
			</li>
      <li>
				點擊<strong>資助類型</strong>下拉並選擇<strong>客戶憑證</strong>：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/" alt="Select Grant Type">
					<figcaption class="bcls-caption--image">選擇授予類型</figcaption>
				</figure>
      </li>
      <li>
				在裡面<strong>訪問令牌 URL</strong>字段，開始輸入“access_token_url” - 您將看到自動完成菜單，然後選擇您的<code translate="no">access_token_url</code>環境變量：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/access-token-url.png" alt="Autocomplete for Variables">
					<figcaption class="bcls-caption--image">變量的自動完成</figcaption>
				</figure>
      </li>
      <li>
				重複上一步以填充<strong>客戶編號</strong>和<strong>客戶機密</strong>字段與您的<code translate="no">客戶編號</code>和<code translate="no">客戶秘密</code>變量：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/auth-variables.png" alt="Auth Variables">
					<figcaption class="bcls-caption--image">身份驗證變量</figcaption>
				</figure>
			</li>
      <li>
				向下滾動以查看<strong>獲取令牌</strong>按鈕並單擊它。確保您看到使用令牌填充的訪問令牌字段：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/access-token.png" alt="Access Token">
					<figcaption class="bcls-caption--image">訪問令牌</figcaption>
				</figure>
			</li>
      <li>點擊<strong>提取令牌</strong>確保這有效。您應該會看到如下響應：
        <figure class="bcls-figure"><img class="bcls-image" alt="Access Token" src="/assets/images/general/insomnia/18462-access-token.png" />
          <figcaption class="bcls-caption--image">訪問令牌</figcaption>
        </figure>
        <aside class="bcls-aside bcls-aside--information">不錯的功能之一<span translate="No">失眠</span>一旦你設置了這個，你就做<strong>不是</strong>必須手動刷新令牌 - <span translate="No">失眠</span>將在需要時自動獲取新的。</aside>
      </li>
			<li>
				前往<strong>標題</strong>選項卡並刪除<strong>授權</strong>標頭（您剛剛設置的身份驗證將處理頭部 - 這個會破壞它）：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/remove-authorization-header.png" alt="Remove Authorization Header">
					<figcaption class="bcls-caption--image">刪除授權標頭</figcaption>
				</figure>
			</li>
    </ol>
		<aside class="bcls-aside bcls-aside--information">筆記：
			<ul>
				<li><span class="”notranslate”">失眠</span>不會將身份驗證設置複製到其他請求，因此您需要為要測試的每個請求重複這些步驟。</li>
				<li>不錯的功能之一<span class="”notranslate”">失眠</span>但是，一旦您設置了 OAuth 2 身份驗證，它就會根據需要自動獲取新的訪問令牌。當現有的過期時，您不必手動獲取新的。</li>
			</ul>
		</aside>
  </section>
	<section class="bcls-section">
		<h2 id="Make_a_request">發出請求</h2>
		<p>現在我們準備製作一個<strong>獲取視頻</strong>要求。</p>
		<ol class="bcls-tasklist-restart">
			<li>由於這是一個<code translate="no">得到</code>請求，您所要做的就是點擊<strong>發送</strong> .</li>
			<li>
				您應該會在 Response 區域中看到 JSON 響應：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/get-response.png" alt="API Response">
					<figcaption class="bcls-caption--image">API響應</figcaption>
				</figure>
			</li>
			<li>
				請注意，您可以使用以下方法檢索不同的視頻集<strong>詢問</strong>參數。點擊<strong>詢問</strong>請求的選項卡，您將看到<span class="”notranslate”">失眠</span>已根據 OpenAPI 規範填充它。只需檢查您要使用的參數並設置值：
				<figure class="bcls-figure">
					<img class="bcls-image" src="/assets/images/general/insomnia/query-params.png" alt="Query Params">
					<figcaption class="bcls-caption--image">查詢參數</figcaption>
				</figure>
			</li>
	</ol>
	</section>
  <section class="bcls-section">
    <h2 id="postRequest">寄一個<code translate="No">POST</code>要求</h2>
    <p>現在，我們將發送一個<code translate="No">POST</code>請求一些數據。在這種情況下，我們將使用 CMS API 創建一個新的視頻對象。從選擇開始<strong>創建視頻</strong>請求在<strong>視頻</strong>文件夾。</p>
    <ol class="bcls-tasklist-restart">
			<li>重複中的所有步驟<a href="#Set_up_authentication">設置身份驗證</a>上面的部分來為這個新請求設置身份驗證。</li>
			<li>
				此請求需要請求正文，因此單擊 JSON 選項卡，並輸入此 JSON 代碼以替換<code translate="no">空值</code>：
<pre class="line-numbers"><code class="language-json" translate="No">{
	"name": "Insomnia Test"
}</code></pre>
<figure class="bcls-figure">
  <img class="bcls-image" src="/assets/images/general/insomnia/request-body.png" alt="Request Body">
  <figcaption class="bcls-caption--image">請求正文</figcaption>
</figure>
			</li>
			<li>點擊<strong>發送</strong>您應該會看到響應中返回的新視頻對象。</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="Using_the_code_generators">使用代碼生成器</h2>
    <p>另一個不錯的功能<span class="”notranslate”">失眠</span>是它將生成用於以多種不同語言發出請求的代碼。</p>
    <ol class="bcls-tasklist-restart">
      <li>
        將鼠標懸停在下拉菜單上單擊請求：
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/dropdown-menu-for-requests.png" alt="Request Dropdown Menu">
          <figcaption class="bcls-caption--image">請求下拉菜單</figcaption>
        </figure>
      </li>
      <li>
        選擇<strong>生成代碼</strong>從菜單：
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/generate-code-option.png" alt="Select Generate Code">
          <figcaption class="bcls-caption--image">選擇生成代碼</figcaption>
        </figure>
      </li>
      <li>
        在裡面<strong>生成客戶端代碼</strong>打開的對話框中，選擇您想要編碼的語言：
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/choose-code-type.png" alt="Select the Language">
          <figcaption class="bcls-caption--image">選擇語言</figcaption>
        </figure>
      </li>
      <li>
        對於許多語言，您還可以選擇更適合您正在創建的應用程序類型的變體：
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/choose-code-variants.png" alt="Select Code Variant">
          <figcaption class="bcls-caption--image">選擇代碼變體</figcaption>
        </figure>
      </li>
      <li>
        還有一個方便的按鈕用於將代碼複製到剪貼板：
        <figure class="bcls-figure">
          <img class="bcls-image" src="/assets/images/general/insomnia/view-copy-code.png" alt="View and Copy Code">
          <figcaption class="bcls-caption--image">查看和復制代碼</figcaption>
        </figure>
      </li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="Conclusion">結論</h2>
    <p>您現在知道使用的基礎知識<span translate="No">失眠</span>向 Brightcove API 發出請求。請注意，如果您選擇免費升級<span translate="No">失眠</span>帳戶到團隊帳戶，您還可以同步所有請求和環境並與其他團隊成員共享。</p>
  </section>
</article>