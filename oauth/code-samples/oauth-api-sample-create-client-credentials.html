---
title: '創建客戶端憑據'
description: '此示例允許您為一個或多個帳戶創建客戶端憑據，並為它們分配您選擇的 API 權限。'
parent: Code Samples 
grandparent: OAuth API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>

    <p>獲得客戶端憑證是獲得訪問令牌的一次性先決條件，大多數Brightcove API都使用該令牌來認證請求。</p>

    <p>有關客戶端憑據的完整說明，請參見<a href="/oauth/getting-started/overview-oauth-api-v4.html">Brightcove OAuth服務的工作方式</a>。</p>

    <p>此示例向您展示瞭如何從 Web 應用程序獲取客戶端憑據。由於OAuth API未啟用CORS，並且必須從服務器端發出請求，因此該應用會將必要的信息發送到代理，然後代理會發出api請求並將響應發送回客戶端。這裡的代理是用 PHP 編寫的，但任何服務器端語言都可以——您只需要能夠通過互聯網向應用程序發送 POST 請求。</p>

    <aside class="bcls-aside bcls-aside--information">提供此示例和相關代碼作為生產開發的指南。該代碼未經認證可用於生產用途，也未經官方支持。</aside>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="gettingCredentials">獲取您的 BC_TOKEN</h2>
      </summary>

      <p>得到一個<code translate="No">client_id</code>和<code translate="No">client_secret</code>通過 OAuth API，您需要一個<code translate="No">BC_TOKEN</code>驗證您的請求。當您登錄 Studio 時，您的 BC_TOKEN 被設置為 cookie。您可以通過任何您喜歡的方式獲取該 cookie，但為了更方便，我們創建了以下 JavaScript 代碼段 - 您可以在登錄 Studio 後將其粘貼到開發者控制台中，按<strong>返回</strong>，並且會出現一個包含 BC_TOKEN 的提示：</p>
      <textarea class="bcls-code">var cookiesArray = document.cookie.split(";"), cookiesObj = {} , i, tmpArray = []; for (i = 0; i &lt; cookiesArray.length; i++) { tmpArray = cookiesArray[i].split("="); if (tmpArray[0].indexOf('BC_TOKEN') &gt; -1) { cookiesObj.BC_TOKEN = tmpArray[1]; } } window.prompt("BC_TOKEN:", cookiesObj.BC_TOKEN);</textarea>

      <aside class="bcls-aside bcls-aside--information">請注意，您必須是您帳戶的管理員（或獲得管理員的 BC_TOKEN）才能創建客戶端憑據。如果您沒有管理員 BC_TOKEN，下面的請求將返回錯誤。</aside>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="get_credentials_app">獲取憑證應用</h2>
    <h3>源代碼</h3>
    <p>在此找到與此樣本相關的所有代碼<a href="https://github.com/BrightcoveLearning/18521-oauth-api-sample-create-client-credentials">GitHub資料庫</a>。</p>
    <h3>示例應用程序</h3>
    <p class="codepen" data-height="1800" data-theme-id="0" data-default-tab="result" data-user="rcrooks1969" data-slug-hash="BxpxXe" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="OAuth API Sample: Create Client Credentials"><span>看筆<a href="https://codepen.io/team/rcrooks1969/pen/BxpxXe/">OAuth API 示例：創建客戶端憑證</a>通過Brightcove學習服務（<a href="https://codepen.io/rcrooks1969"> @ rcrooks1969</a>） 上<a href="https://codepen.io">密碼筆</a>。</span></p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script>

    <section class="bcls-section">
      <details>
        <summary>
          <h2 id="Using_the_CodePen">使用代碼筆</h2>
        </summary>

        <p>以下是一些有效使用上述 CodePen 的提示：</p>

        <ul>
          <li>通過單擊切換播放器的實際顯示<strong>結果</strong>按鈕。</li>
          <li>點擊<strong>HTML / CSS / JS</strong>按鈕顯示一種代碼類型。</li>
          <li>點擊<strong>在CodePen上編輯</strong>在右上角將此CodePen分支到您自己的帳戶中。</li>
          <li>在此找到與此樣本相關的所有代碼<a href="https://github.com/BrightcoveLearning/18521-oauth-api-sample-create-client-credentials">GitHub資料庫</a>。</li>
        </ul>
      </details>
    </section>

    <section class="bcls-section">
      <h2 id="proxy">代理代理代碼</h2>

      <p>為了建立您自己的版本此頁面上的範例應用程式，您必須建立並裝載您自己的 Proxy。此代理與用於我們大多數示例應用程序的代理略有不同，因為用於創建客戶端憑據的 OAuth API 方法的身份驗證與常規 API 身份驗證的身份驗證不同。下面顯示了此處使用的代理的完整代碼。</p>

      <pre class="line-numbers">
        <code class="language-php">&lt;?php /** * client-credentials-proxy.php - Brightcove RESTful API 的代理 * 獲取客戶端 ID 和客戶端密碼並返回整個響應 * 訪問：*（注意你應該*總是*通過 HTTPS 訪問代理） * 方法：發布 * * @post {string} bc_token - BC_TOKEN 對所有需要憑據的帳戶具有管理員權限 * @post {JSONstring} requestBody - 作為 JSON 字符串的完整請求正文 * * @returns {string} $response - 從 OAuth API 收到的 JSON 響應 */ // 安全檢查 if (strpos($_SERVER['HTTP_REFERER'], 'solutions.brightcove.com') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 'ondemand.brightcovelearning.com') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 'video.brightcovelearning.com') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 's.codepen.io ') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 'fiddle.jshell.net') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 'players.brightcove.net') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 'support.brightcove.com') == false &amp;&amp; strpos($_SERVER['HTTP_REFERER'], 'master-7rqtwti-6sglloa4yrkti.us.platform.sh') == false) { exit('{"ERROR":"Only requests from http://docs.brightcove.com or http:solutions.brightcove.com are accepted by this proxy"} '); } // CORS 啟用和其他標頭 header("Access-Control-Allow-Origin: *"); header("內容類型：應用程序/json"); header("X-Content-Type-Options: nosniff"); header("X-XSS-Protection"); // 獲取數據或死亡 if ($_POST["requestBody"]) { $data = json_decode($_POST["requestBody"]); }別的{ exit("request body missing"); } // 獲取請求類型或默認為 POST if ($_POST["requestType"]) { $method = $_POST["requestType"]; }別的{ $method = 'POST'; } // 獲取 bc_token 或死 if ($_POST["bc_token"]) { $bc_token = $_POST["bc_token"]; }別的{ exit("bc_token missing"); } $request = "https://oauth.brightcove.com/v4/client_credentials"; $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_CUSTOMREQUEST =&gt; $method, CURLOPT_RETURNTRANSFER =&gt; TRUE, CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/json', "Authorization:BC_TOKEN {$bc_token} " ), CURLOPT_POSTFIELDS =&gt; json_encode($data) )); $response = curl_exec($ch); curl_close($ch); // 檢查錯誤 if ($response === FALSE) { die(curl_error($ch)); exit('An error occurred on making the request'); }別的{ echo $response; } ?&gt;</code></pre>
    </section>
  </section>
</article>