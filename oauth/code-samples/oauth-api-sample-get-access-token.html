---
title: '獲取訪問令牌'
description: '此示例從 Web 應用程序的 Brightcove OAuth API 檢索訪問令牌，並通過代理髮送請求。'
parent: Code Samples 
grandparent: OAuth API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>

    <p>對於大多數Brightcove API而言，獲取訪問令牌是一項至關重要的操作，因為其中大多數使用訪問令牌對請求進行身份驗證。</p>

    <p>有關訪問令牌的完整說明，請參見<a href="/oauth/getting-started/overview-oauth-api-v4.html">Brightcove OAuth服務的工作方式</a>和<a href="/oauth/guides/getting-access-tokens.html">獲取訪問令牌</a>。</p>

    <p>此示例向您展示如何從 Web 應用程序獲取訪問令牌。由於OAuth API未啟用CORS，並且必須從服務器端發出請求，因此該應用會將信息發送到代理，代理隨後會發出api請求並將響應發送回客戶端。這裡的代理是用 PHP 編寫的，但任何服務器端語言都可以——您只需要能夠通過互聯網向應用程序發送 POST 請求。</p>

    <aside class="bcls-aside bcls-aside--information">提供此示例和相關代碼作為生產開發的指南。該代碼未經認證可用於生產用途，也未經官方支持。</aside>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="gettingCredentials">獲取憑證</h2>
      </summary>

      <p>得到一個<code translate="No">client_id</code>和<code translate="No">client_secret</code>，您需要轉到 OAuth UI 並註冊此應用程序：</p>

      <ul>
        <li><a href="/general/managing-api-authentication-credentials.html">管理API身份驗證憑據</a></li>
      </ul>

      <p>這些選擇您將要使用的 API 所需的權限：</p>

      <figure class="bcls-figure"><img class="bcls-image" alt="API Permissions" src="/assets/images/oauth/guides/studio-api-operations.png" />
        <figcaption class="bcls-caption--image">API 權限</figcaption>
      </figure>

      <p>您還可以通過 CURL 或 Postman 獲取您的憑據 - 請參閱：</p>

      <ul>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-curl.html">使用CURL獲取客戶端憑據</a></li>
        <li><a href="/oauth/guides/oauth-create-client-credentials-using-postman.html">使用郵遞員獲取客戶憑證</a></li>
      </ul>

      <p>如果您直接從OAuth API獲取憑據，請參見<a href="/oauth/guides/api-operations-client-credentials-requests.html">客戶端憑據請求的API操作</a>獲得不同API操作所需的權限。</p>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="get_access_token_app">獲取訪問令牌應用</h2>
    <h3>源代碼</h3>
    <p>在此找到與此樣本相關的所有代碼<a href="https://github.com/BrightcoveLearning/18520-oauth-api-sample-get-access-token">GitHub資料庫</a>。</p>
    <h3>示例應用程序</h3>
    <p data-height="800" data-theme-id="34967" data-slug-hash="LmxBMG" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="OAuth API Sample: Get an Access Token" class="codepen">看筆<a href="https://codepen.io/team/rcrooks1969/pen/LmxBMG/">OAuth API 示例：獲取訪問令牌</a>通過Brightcove學習服務（<a href="https://codepen.io/rcrooks1969"> @ rcrooks1969</a>） 上<a href="https://codepen.io">密碼筆</a>。</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
  </section>

  <section class="bcls-section">
    <details>
      <summary>
        <h2 id="Using_the_CodePen">使用代碼筆</h2>
      </summary>

      <p>以下是一些有效使用上述 CodePen 的提示：</p>

      <ul>
        <li>通過單擊切換播放器的實際顯示<strong>結果</strong>按鈕。</li>
        <li>點擊<strong>HTML / CSS / JS</strong>按鈕顯示一種代碼類型。</li>
        <li>點擊<strong>在CodePen上編輯</strong>在右上角將此CodePen分支到您自己的帳戶中。</li>
        <li>在此找到與此樣本相關的所有代碼<a href="https://github.com/BrightcoveLearning/18520-oauth-api-sample-get-access-token">GitHub資料庫</a>。</li>
      </ul>
    </details>
  </section>

  <section class="bcls-section">
    <h2 id="proxy">代理代理代碼</h2>

    <p>為了建立您自己的版本此頁面上的範例應用程式，您必須建立並裝載您自己的 Proxy。（布萊特灣學習服務所使用的代理只接受來自布萊特灣域的請求。）沒有原始限制的代理代碼版本如下所示。</p>

    <pre class="line-numbers">
    <code class="language-php">&lt;?php /** * access-token-proxy.php - Brightcove RESTful API 的代理 * 獲取訪問令牌並將其返回 * 訪問：*（注意您應該*始終*通過 HTTPS 訪問代理）* 方法：發布 * * @post {string} client_id - 具有足夠請求權限的 OAuth2 客戶端 ID * @post {string} client_secret - 具有足夠請求權限的 OAuth2 客戶端密鑰 * * @returns {string} $response - 從 OAuth API 收到的 JSON 響應 */ // CORS 啟用和其他標頭 header("Access-Control-Allow-Origin: *"); header("內容類型：應用程序/json"); header("X-Content-Type-Options: nosniff"); header("X-XSS-Protection"); // 請注意，如果您將此代理用於單個憑證 // 您可以只硬編碼下面的客戶端 ID 和密碼，而不是傳遞它們 $client_id = $_POST["client_id"]; $client_secret = $_POST["client_secret"]; $auth_string = " {$client_id}：{$client_secret} "; $request = "https://oauth.brightcove.com/v4/access_token?grant_type=client_credentials"; $ch = curl_init($request); curl_setopt_array($ch, array( CURLOPT_POST =&gt; TRUE, CURLOPT_RETURNTRANSFER =&gt; TRUE , CURLOPT_SSL_VERIFYPEER =&gt; FALSE, CURLOPT_USERPWD =&gt; $auth_string, CURLOPT_HTTPHEADER =&gt; array( 'Content-type: application/x-www-form-urlencoded', ) )); $response = curl_exec($ch); curl_close($ch ); // 檢查錯誤 if ($response === FALSE) { die(curl_error($ch)); echo 'An error occurred'; }別的{ echo $response; } ?&gt;</code></pre>
  </section>
</article>