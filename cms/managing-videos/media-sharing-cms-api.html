---
title: '媒體分享'
description: '在本主題中，您將學習如何使用 CMS API 將視頻從一個 Video Cloud 帳戶共享到另一個帳戶。'
parent: Managing Videos/Assets 
grandparent: CMS API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>
    
    <p>媒體共享是Video Cloud的一項功能，該功能使發布者可以與其他發布者共享視頻，從而使您可以更輕鬆地管理多個帳戶中的視頻。例如，發布者可以保留視頻內容的主帳戶，然後將視頻共享給組織的其他部門或子公司。</p>
    
    <p>請注意，所有媒體共享操作也可以在Studio中執行。看<a href="https://studio.support.brightcove.com/admin/managing-media-sharing-settings.html">管理媒體共享設置</a> .</p>
    
    <aside class="bcls-aside bcls-aside--information">另請注意： 
      <ul>
        <li><strong>媒體共享僅適用於具有多個帳戶的Video Cloud Enterprise客戶。</strong>如果您有興趣升級您的視頻雲帳戶，請聯繫 Brightcove 以獲取更多信息。 </li>
        <li>必須為主帳戶和每個聯屬會員帳戶啟用CMS API媒體共享操作。<a href="https://supportportal.brightcove.com/s/login/?language=en_US">聯繫Brightcove支持</a>如果您需要啟用共享。</li>
        <li>媒體共享可以是雙向的：每個帳戶可以是另一個帳戶的主帳戶和附屬帳戶。</li>
      </ul>
    </aside> <aside class="bcls-aside bcls-aside--information"></aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="billing">共享媒體和計費</h2>
    
    <p>有關共享媒體計費方式的信息，請參閱<a href="https://studio.support.brightcove.com/media/media-sharing-using-media-module.html#billing">使用媒體模塊進行媒體共享</a>。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Terminology">術語</h2>
    
    <p>在媒體共享中，主帳戶（共享視頻）與一個或多個關聯帳戶（接收共享視頻）之間存在關聯：</p>
    <!-- table 1 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">媒體共享術語</caption>
      <thead class="bcls-table__head">
        <tr>
          <th>帳戶</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>掌握</td>
          <td>創建原始視頻的帳戶。
          <p>主人擁有內容並負責設置、管理和向附屬機構提供內容。</p>
          </td>
        </tr>
        <tr>
          <td>會員關係</td>
          <td>接收視頻的帳戶。
          <p>Affiliate 可以接受 Master 共享給它的內容。</p>
          </td>
        </tr>
        <tr>
          <td>渠道</td>
          <td>從主機共享內容到任意數量的會員的管道。啟用媒體共享後<code translate="No">default</code>頻道將在您的帳戶中創建。</td>
        </tr>
        <tr>
          <td>關係</td>
          <td>描述管理員與會員之間的互動。
          <p>關係由共享內容的主設備，共享內容的渠道，接受內容的合同和接收內容的關聯公司組成。</p>
          </td>
        </tr>
        <tr>
          <td>合同</td>
          <td>描述了母版和會員之間的共享關係。
          <p>合同由主合同創建，然後必須接受才能啟用共享。聯屬網絡營銷商還可以指定是自動接受共享視頻還是必須一一批准。</p>
          </td>
        </tr>
      </tbody>
    </table>
    </section>
    
    <section class="bcls-section">
    <h2 id="base_URL">基本網址</h2>
    
    <p>至於所有<span translate="No">內容管理系統 API</span>請求，下面討論的操作的基本 URL 是：</p>
    
    <pre>
      <code class="language-http" translate="No">https://cms.api.brightcove.com/v1</code></pre>
    
    <p>發出請求時，下面討論的所有端點都將附加到基本URL。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="authentication">驗證</h2>
    
    <p>對請求的身份驗證需要一個Authorization標頭：</p>
    
    <pre class="line-numbers">
          <code class="language-http" translate="No">Authorization: Bearer {access_token}</code></pre>
    
    <p>這<code translate="No">access_token</code>是必須從 Brightcove OAuth 服務獲取的臨時 OAuth2 訪問令牌。有關如何獲取客戶端憑據並使用它們來檢索訪問令牌的詳細信息，請參閱<a href="/oauth/getting-started/overview-oauth-api-v4.html">Brightcove OAuth 概述</a> .</p>
    
    <p>請注意，周圍的所有操作<strong>關係</strong>所需的新權限：</p>
    
    <pre>
      <code translate="No">video-cloud/video/all
      video-cloud/sharing-relationships/read
      video-cloud/sharing-relationships/create
      video-cloud/sharing-relationships/update
      video-cloud/sharing-relationships/delete</code></pre>
    
    <p>或者，您可以只使用：</p>
    
    <pre>
      <code class="language-json" translate="No">video-cloud/sharing-relationships/all</code></pre>
    
    <p>在Studio API身份驗證管理頁面中，顯示了兩個權限：</p>
    
    <ul>
      <li><strong>分享閱讀</strong>（相當於<code translate="No">video-cloud/sharing-relationships/read</code> )</li>
      <li><strong>共享讀/寫</strong>（相當於<code translate="No">video-cloud/sharing-relationships/all</code> )</li>
    </ul>
    </section>
    
    <section class="bcls-section">
    <h2 id="restrictions_on_sharing">共享限制</h2>
    
    <p>默認情況下，所有視頻都可以共享。但是，如果出現以下情況，您可以阻止共享：</p>
    
    <ul>
      <li>附屬帳戶沒有在主帳戶中的視頻上設置值的自定義字段</li>
      <li>主賬戶啟用了地理過濾，但附屬賬戶沒有</li>
    </ul>
    
    <h3>自定義字段匹配</h3>
    
    <p>您可以為頻道強制執行自定義字段匹配，這意味著視頻共享將失敗<strong>如果視頻具有關聯帳戶中不存在的自定義字段值</strong> .如果視頻沒有任何不匹配的自定義字段的值，視頻仍將成功共享</p>
    
    <p>默認情況下，自定義字段匹配為<strong>不是</strong>強制執行。</p>
    
    <p>如果視頻共享由於自定義字段不匹配而失敗，您將在響應中看到以下錯誤：</p>
    
    <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "video_id": "5691312273001",
        "affiliate_id": "47509719001",
        "affiliate_video_id": null,
        "status": "PROCESSING",
        <span class="bcls-highlight">"error_message": [{"error_code":"MISSING_CUSTOM_FIELDS","error_message":"Affiliate account is missing custom fields: [subject]"}],</span>
        "shared_at": "2018-01-03T16:29:19.080Z",
        "updated_at": "2018-01-03T16:29:19.080Z"
      }</code></pre>
    
    <h3>地理過濾匹配</h3>
    
    <p>如果為頻道啟用了地理過濾匹配，則在主帳戶已啟用地理過濾而會員帳戶未啟用地理過濾的情況下，無法共享視頻。</p>
    
    <p>默認情況下，地理過濾匹配<strong>是</strong>強制執行。</p>
    
    <p>錯誤將如下所示：</p>
    
    <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "video_id": "5691312273001",
        "affiliate_id": "47509719001",
        "affiliate_video_id": null,
        "status": "PROCESSING",
        <span class="bcls-highlight">"error_message": [{"error_code":"CONFLICT","error_message":"Affiliate account is not configured for geo restriction."}],</span>
        "shared_at": "2018-01-03T16:29:19.080Z",
        "updated_at": "2018-01-03T16:29:19.080Z"
      
      </code></pre>
    
    <p>看<a href="#update_channel">更新頻道</a>下面查看如何更新頻道以強制執行自定義字段和/或地理過濾匹配。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="what_is_shared">什麼是共享？</h2>
    
    <p>本節說明共享的內容以及如何處理對視頻的後續更改。</p>
    
    <h3>分享視頻時</h3>
    
    <p>共享視頻時，大多數視頻元數據字段都將從“母版"複製到“會員"帳戶。值得注意的例外是：</p>
    
    <ul>
      <li><code translate="No">id</code> -該視頻將在會員帳戶中擁有自己的唯一ID</li>
      <li>日期字段，例如<code translate="No">created_at</code>和<code translate="No">updated_at</code></li>
    </ul>
    
    <p>會員帳戶會使用所有視頻資產（租借，圖像，text_tracks等）進行播放。</p>
    <!-- <aside class="bcls-aside bcls-aside--information">Note that billing will still be based on the account that the video is played back from, not the account where the assets reside.</aside> -->
    
    <h3>影片分享後</h3>
    
    <p>共享視頻後，會員帳戶會自動繼承主帳戶中對視頻所做的某些更改，而某些更改則不會。</p>
    
    <h4>視頻資產</h4>
    
    <p><strong>圖片除外</strong>，對視頻資產的主更改是<strong>總是</strong>由會員繼承。會員關係<strong>無法更改資產</strong>例如演繹，清單，文本軌道或數字母版。</p>
    
    <p>會員對圖片的更改由會員繼承<strong>除非會員更換了圖片</strong>。會員更改圖像後，該圖像將不再從主服務器繼承。</p>
    
    <h4>視頻元數據</h4>
    
    <p>會員可以修改任何視頻元數據（例如名稱，描述和參考ID），並且在主視頻上所做的更改是<strong>不是</strong>由會員繼承。</p>
    
    <h5 id="Resharing_videos">轉貼影片</h5>
    
    <p>但是請注意，如果<strong>重新分享</strong>視頻（只能通過CMS API來完成，而不能在Studio中完成），所有資產和元數據（數據/時間字段除外）都將共享給會員，<strong>覆蓋會員所做的任何更改</strong>。</p>
    
    <aside class="bcls-aside bcls-aside--information">請注意，有兩種重新共享的方法，它們會產生不同的結果：
    <dl>
      <dt>掌握 <em>取消共享</em> 進而 <em>重新分享</em> 該視頻</dt>
      <dd>在這種情況下，先前共享的視頻將從未共享的所有會員帳戶中刪除。當大師再次分享視頻時，一個 <em>新的</em> 視頻與 <em>新的</em> 唯一的 id 將添加到每個附屬帳戶，從主帳戶中帶來元數據和資產，就像原始共享一樣。</dd>
      <dt>掌握 <em>重新分享</em> 該視頻<strong>沒有</strong>取消分享</dt>
      <dd>在這種情況下，視頻主副本中的所有元數據和圖像都將推送到會員版本，覆蓋會員更改，但會員視頻ID將<strong>不是</strong>改變。</dd>
    </dl>
    </aside><aside class="bcls-aside bcls-aside--warning">在您重新分享視頻之前，請確保這是您想要做的，並且您的關聯公司知道將要發生的事情！</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="overview_media_sharing_steps">媒體共享步驟概述</h2>
    
    <h3>建立關係</h3>
    <p>以下是用於建立關係的操作的摘要（單擊操作名稱以獲取更多詳細信息）：</p>
    <!-- table 2 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">設置操作</caption>
      <thead class="bcls-table__head">
        <tr>
          <th colspan="3">主操作</th>
        </tr>
        <tr>
          <th>手術</th>
          <th>方法/終點</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="#list_channels">列出頻道</a></td>
          <td><code translate="No">GET</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels</code></td>
          <td>獲取該帳戶的頻道列表</td>
        </tr>
        <tr>
          <td><a href="#Get_channel_details">獲取頻道詳細信息</a></td>
          <td><code translate="No">GET</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/ <span class="bcls-input">channel_name</span> </code> <sup> <strong><a href="#note2-1">[2-1]</a></strong> </sup></td>
          <td>獲取頻道的詳細信息</td>
        </tr>
        <!-- <tr>
                      <td><a href="#create_channel">Create channel</a></td>
                      <td>POST <code translate="No">/accounts/<span class="bcls-input">master_account_id</span>/channels/<span class="bcls-input">channel_name</span></code></td>
                      <td>Creates a new channel for the account</td>
                  </tr> -->
        <tr>
          <td><a href="#update_channel">更新頻道</a></td>
          <td><code translate="No">POST</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/ <span class="bcls-input">channel_name</span> </code></td>
          <td>更新頻道設置</td>
        </tr>
        <!-- <tr>
                      <td><a href="#Remove_channel">Remove channel</a></td>
                      <td>DELETE <code translate="No">/accounts/<span class="bcls-input">master_account_id</span>/channels</code>/<span class="bcls-input">channel_name</span></td>
                      <td>Removes channel from the account</td>
                  </tr> -->
        <tr>
          <td><a href="#List_channel_affiliates">列出頻道會員</a></td>
          <td><code translate="No">GET</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/default/members</code></td>
          <td>獲取頻道的會員</td>
        </tr>
        <tr>
          <td><a href="#Add_affiliates">添加會員</a></td>
          <td><code translate="No">PUT</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/default/members</code></td>
          <td>將會員添加到頻道</td>
        </tr>
        <tr>
          <td><a href="#Remove_affiliate">刪除會員</a></td>
          <td><code translate="No">DELETE</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/default/members/ <span class="bcls-input">affiliate_account_id</span> </code></td>
          <td>從頻道中刪除會員</td>
        </tr>
      </tbody>
      <thead class="bcls-table__head">
        <tr>
          <th colspan="3">會員運營</th>
        </tr>
        <tr>
          <th>手術</th>
          <th>方法/終點</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="#List_available_contracts">列出可用合同</a></td>
          <td><code translate="No">GET</code> <code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/contracts</code></td>
          <td>獲取該帳戶可用的所有合同</td>
        </tr>
        <tr>
          <td><a href="#Get_specific_contract">獲取特定帳戶的合同</a></td>
          <td><code translate="No">GET</code> <code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/contracts/ <span class="bcls-input">master_account_id</span> </code></td>
          <td>從特定帳戶獲取合同（如果有）</td>
        </tr>
        <tr>
          <td><a href="#Accept_contract">批准合同</a></td>
          <td><code translate="No">PATCH</code> <code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/contracts/ <span class="bcls-input">master_account_id</span> </code></td>
          <td>接受並配置合同的接受條件</td>
        </tr>
      </tbody>
    </table>
    
    <h4>筆記</h4>
    
    <ul>
      <li id="note2-1"><sup>[2-1]<strong></strong> </sup> 目前只有一個頻道名為<code translate="No">default</code></li>
    </ul>
    
    <h3>分享影片</h3>
    
    <p>視頻分享操作由主賬號執行。附屬賬戶可以接受份額（如果<code translate="No">auto_accept</code>被設定為<code translate="No">false</code> ) 並且可以使用標準更新共享的視頻元數據和圖像<a href="/cms/references/reference.html#api-videoGroup-Update_Video">更新視頻</a>手術。</p>
    
    <p>建立關係後，可以執行以下共享操作（單擊操作名稱以獲取更多詳細信息）：</p>
    <!-- table 3 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">共享操作</caption>
      <thead class="bcls-table__head">
        <tr>
          <th colspan="3">主操作</th>
        </tr>
        <tr>
          <th>手術</th>
          <th>方法/終點</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="#List_shares">列出現有股份</a></td>
          <td><code translate="No">GET</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/videos/ <span class="bcls-input">video_id</span>/shares</code></td>
          <td>獲取視頻的現有共享列表-這是<strong>重要的</strong>由於的後果<a href="#Share_video">重新分享視頻</a>當它已經被共享時</td>
        </tr>
        <tr>
          <td><a href="#Share_video">分享視頻</a></td>
          <td><code translate="No">POST</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/videos/ <span class="bcls-input">video_id</span>/shares</code></td>
          <td>將視頻分享給一個或多個關聯公司 - 請注意，如果該視頻已被分享，則此操作將<a href="#Share_video">重新分享</a> - 那大概是<strong>不是</strong>你想做什麼</td>
        </tr>
        <tr>
          <td><a href="#Unshare_video_affiliate">取消為聯屬網絡營銷人員分享視頻</a></td>
          <td><code translate="No">DELETE</code> <code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/videos/ <span class="bcls-input">video_id</span>/shares</code></td>
          <td>取消共享特定關聯公司的視頻 - 請注意，取消共享和重新共享將導致共享視頻在關聯公司帳戶中具有新的視頻 ID</td>
        </tr>
        <!-- <tr>
                      <td><a href="#Unshare_video">Un-share a video for all Affiliates</a></td>
                      <td>DELETE <code translate="No">/accounts/<span class="bcls-input">master_account_id</span>/videos/<span class="bcls-input">video_id</span>/shares</code></td>
                      <td>Un-shares a video for all Affiliates - note that un-sharing and re-sharing will result in the shared video having a new video id in the Affiliate account</td>
                  </tr> -->
      </tbody>
      <thead class="bcls-table__head">
        <tr>
          <th colspan="3">會員運營</th>
        </tr>
        <tr>
          <th>手術</th>
          <th>方法/終點</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="#Accept_share">接受共享的視頻</a></td>
          <td><code translate="No">PATCH</code> <code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/videos/ <span class="bcls-input">video_id</span> </code></td>
          <td>接受共享視頻（如果<code translate="No">auto_accept</code>已關閉）</td>
        </tr>
      </tbody>
    </table>
		<p>注意：要識別等待接受的共享視頻，請搜索具有<code translate="no">狀態：待定</code>：</p>
		<pre><code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">{account_id}</span>/videos?q=state:pending</code></pre>
		<p>或者</p>
		<pre><code class="language-http" translate="No">https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">{account_id}</span>/videos?query=state:PENDING</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="CMS_API_operations">CMS API請求-設置</h2>
    
    <p>本節列出了<span translate="No">內容管理系統 API</span>設置媒體共享所涉及的操作。</p>
    
    <h3>主操作</h3>
    
    <h4 id="list_channels">列出頻道</h4>
    <!-- table 4 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">列出頻道</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">GET</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels</code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">[
        {
          "account_id": "57838016001",
          "name": "default",
          "enforce_custom_fields": false,
          "enforce_geo": false,
          "account_name": "BrightcoveLearning",
          "created_at": "2017-08-23T17:11:18.474Z",
          "updated_at": "2017-08-23T17:11:18.474Z"
        }
      ]</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h4 id="Get_channel_details">獲取頻道詳細信息</h4>
    <!-- table 5 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">獲取頻道詳細信息</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">GET</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">https://cms.api.brightcove.com/v1/accounts/ <span class="bcls-input">master_account_id</span>/channels/ <span class="bcls-input">channel_name</span> <sup> <strong> <a href="#note5-1">[5-1]</a> </strong> </sup> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "account_id": "57838016001",
        "name": "default",
        "enforce_custom_fields": false,
        "enforce_geo": false,
        "account_name": "BrightcoveLearning",
        "created_at": "2017-08-23T17:11:18.474Z",
        "updated_at": "2017-08-23T17:11:18.474Z"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h5>筆記</h5>
    
    <ul>
      <li id="note5-1"><sup><strong>  [ 5-1] </strong>   </sup> 目前只有一個頻道名為<code translate="No">default</code></li>
    </ul>
    <!-- table 6 --><!-- <h4 id="create_channel">Create channel</h4>
      <table class="bcls-table">
          <caption class="bcls-caption--table">Create Channel</caption>
          <tbody class="bcls-table__body">
              <tr>
                  <th>Method</th>
                  <td>PUT</td>
              </tr>
              <tr>
                  <th>Endpoint</th>
                  <td>/accounts/<span class="bcls-input">master_account_id</span>/channels/<span class="bcls-input">channel_name</span></td>
              </tr>
              <tr>
                  <th>Request body</th>
                  <td>
      <pre class="line-numbers"><code class="language-json" translate="No">{
        "account_id": "57838016001",
        "name": "<span class="bcls-input">channel_name</span>"
      }</code></pre>
                  </td>
              </tr>
              <tr>
                  <th>Sample response</th>
                  <td>
      <pre class="line-numbers"><code class="language-json" translate="No">{
        "account_id": "57838016001",
        "name": "channel_name",
        "updated_at": "2017-08-23T19:12:24.139Z",
        "created_at": "2017-08-23T19:12:24.139Z"
      }</code></pre>
                  </td>
              </tr>
          </tbody>
      </table> -->
    
    <h4 id="update_channel">更新頻道</h4>
    <!-- table 7 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">建立頻道</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">PATCH</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/ <span class="bcls-input">channel_name</span> </code> <sup> <strong><a href="#note6-1">[6-1]</a></strong> </sup></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "enforce_custom_fields" : true,
        "enforce_geo" : true
      }</code></pre>
          </td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "account_id": "57838016001",
        "name": "default",
        "enforce_custom_fields": true,
        "enforce_geo": true,
        "account_name": "BrightcoveLearning",
        "created_at": "2017-08-23T17:11:18.474Z",
        "updated_at": "2017-12-30T15:06:27.015Z"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h5>筆記</h5>
    
    <ul>
      <li id="note6-1"><sup>[6-1]<strong></strong> </sup> 目前只有一個頻道名為<code translate="No">default</code></li>
    </ul>
    <!-- table 8 --><!-- <h4 id="Remove_channel">Remove channel</h4>
      <table class="bcls-table">
          <caption class="bcls-caption--table">Remove Channel</caption>
          <tbody class="bcls-table__body">
              <tr>
                  <th>Method</th>
                  <td>DELETE</td>
              </tr>
              <tr>
                  <th>Endpoint</th>
                  <td>/accounts/<span class="bcls-input">master_account_id</span>/channels/<span class="bcls-input">channel_name</span></td>
              </tr>
              <tr>
                  <th>Request body</th>
                  <td>
      <pre class="line-numbers"><code class="language-json" translate="No">{
        "account_id": "57838016001",
        "name": "<span class="bcls-input">channel_name</span>"
      }</code></pre>
                  </td>
              </tr>
              <tr>
                  <th>Sample response</th>
                  <td>204 NO_CONTENT (empty response body)</td>
              </tr>
          </tbody>
      </table>
      <aside class="bcls-aside bcls-aside--warning">Note that this operation will fail if all affiliates have <strong>not</strong> been removed from the channel.</aside> -->
    
    <h4 id="List_channel_affiliates">列出頻道的會員</h4>
    <!-- table 9 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">列出渠道會員</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">GET</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/default/members</code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">[
        {
          "account_id": "20318290001",
          <span class="bcls-highlight">"approved": false,</span>
          "account_name": "Brightcove Training"
        },
        {
          "account_id": "1485884786001",
          <span class="bcls-highlight">"approved": true,</span>
          "account_name": "Brightcove Learning Doc Samples"
        },
        {
          "account_id": "1752604059001",
          "approved": true,
          "account_name": "BC Training Videos"
        }
      ]</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <p>的價值<code translate="No">approved</code>字段表示附屬公司是否批准了合同。</p>
    
    <h4 id="Add_affiliates">將會員添加到頻道</h4>
    <!-- table 10 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">添加會員</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">PUT</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/default/members/ <span class="bcls-input">affiliate_account_id</span> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "account_id":"<span class="bcls-input">affiliate_account_id</span>"
      }</code></pre>
          </td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "account_id": "1485884786001"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h4 id="Remove_affiliate">從頻道中刪除會員</h4>
    <!-- table 11 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">刪除會員</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">DELETE</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/channels/default/members/ <span class="bcls-input">affiliate_account_id</span> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td><code translate="No">204 NO CONTENT</code>（空響應正文）</td>
        </tr>
      </tbody>
    </table>
    
    <h3>會員運營</h3>
    
    <h3 id="List_available_contracts">列出可用合同</h3>
    <!-- table 12 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">列出合約</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">GET</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/contracts</code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">[
        {
          "account_id": "1485884786001",
          "channel": {
            "account_id": "57838016001",
            "name": "default"
          },
          <span class="bcls-highlight">"approved": false,</span>
          <span class="bcls-highlight">"auto_accept": false,</span>
          "approved_at": null,
          "updated_at": "2017-08-23T17:45:41.556Z",
          "created_at": "2017-08-23T17:45:41.556Z"
        }
      ]</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <p>響應中的兩個基本字段是：</p>
    
    <ul>
      <li><code translate="No">approved</code> -設為true時，聯盟會員會接受合同</li>
      <li><code translate="No">auto-accept</code> -設置為true時，通過此合同共享的視頻將被會員自動接受；否則，必須一一批准</li>
    </ul>
    
    <p>我們將在下面看到如何更新合約。</p>
    
    <h4 id="Get_specific_contract">獲取特定帳戶的合同</h4>
    <!-- table 13 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">取得合約</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">GET</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/contracts/ <span class="bcls-input">master_account_id</span> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "account_id": "1485884786001",
        "channel": {
          "account_id": "57838016001",
          "name": "default"
        },
        <span class="bcls-highlight">"approved": false,</span>
        <span class="bcls-highlight">"auto_accept": false,</span>
        "approved_at": null,
        "created_at": "2017-08-23T17:45:41.556Z",
        "updated_at": "2017-08-23T17:45:41.556Z"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h4 id="Accept_contract">批准合同</h4>
    <!-- table 14 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">批准合同</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">PATCH</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/contracts/ <span class="bcls-input">master_account_id</span> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "approved": true,
        "auto_accept": true
      }</code></pre>
          </td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "account_id": "1485884786001",
        "channel": {
          "account_id": "57838016001",
          "name": "default"
        },
          <span class="bcls-highlight">"approved": true,</span>
        <span class="bcls-highlight">"auto_accept": true,</span>
        "approved_at": "2017-08-27T12:27:21.582Z",
        "created_at": "2017-08-23T17:45:41.556Z",
        "updated_at": "2017-08-27T12:27:21.582Z"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <p>如果僅包括<code translate="No">"approved":true</code>，每個視頻都必須分別獲得批准。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="cms_operations_sharing">CMS API請求-共享</h2>
    
    <p>本節詳細介紹<span translate="No">內容管理系統 API</span>用於共享視頻的請求。媒體共享操作由主帳戶執行。附屬賬戶可以接受股票，如果<code translate="No">auto_accept</code>已關閉。</p>
    
    <h3>主操作</h3>
    
    <h4 id="List_shares">列出現有股份</h4>
    
    <p>要了解某個視頻是否已分享給其他帳戶，您可以使用以下請求。</p>
    
    <aside class="bcls-aside bcls-aside--information">這很重要，因為將視頻分享到您已經分享到的帳戶是一種<strong>轉發</strong>這將覆蓋聯盟會員所做的任何元數據更改！</aside>
    <!-- table 15 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">列出股份</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">GET</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/videos/ <span class="bcls-input">video_id</span>/shares</code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">[
        {
          "video_id": "5553744346001",
          "affiliate_id": "1752604059001",
          "affiliate_video_id": "5553754248001",
          "status": "COMPLETE",
          "shared_at": "2017-08-27T14:35:01.890Z",
          "updated_at": "2017-08-27T14:35:25.630Z"
        },
        {
          "video_id": "5553744346001",
          "affiliate_id": "1485884786001",
          "affiliate_video_id": "5553758415001",
          "status": "COMPLETE",
          "shared_at": "2017-08-27T14:34:34.919Z",
          "updated_at": "2017-08-27T14:35:25.212Z"
        }
      ]</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <h4 id="Share_video">分享（或轉發）視頻</h4>
    
    <p>下面描述的請求將向一個或多個附屬帳戶共享視頻。</p>
    
    <aside class="bcls-aside bcls-aside--information">請記住，如果視頻已分享給關聯公司，則此請求將<strong>轉發</strong>視頻，並覆蓋聯盟會員對視頻元數據所做的任何更改！</aside>
    <!-- table 16 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">分享視頻</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">POST</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/videos/ <span class="bcls-input">video_id</span>/shares</code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">[
        { "id": "<span class="bcls-input">affiliate_account_id_1</span>" },
        { "id": "<span class="bcls-input">affiliate_account_id_2</span>" }
      ]</code></pre>
          </td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <p>成功響應</p>
    
          <pre class="line-numbers">
      <code class="language-json" translate="No">[
        {
          "video_id": "5553744346001",
          "affiliate_id": "1485884786001",
          "affiliate_video_id": null,
          "status": "PROCESSING",
          "shared_at": "2017-08-27T14:25:55.710Z",
          "updated_at": "2017-08-27T14:25:55.710Z"
        }
      ]</code></pre>
    
          <p>失敗回應</p>
    
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
      "video_id": "5553744346001",
      "affiliate_id": "1485884786001",
      "affiliate_video_id": null,
      "status": "ERROR",
      "error_message": "[{\"error_code\":\"MISSING_CUSTOM_FIELDS\",\"error_message\":\"Affiliate account is missing custom fields: [myfieldname]\"}]",
      "shared_at": "2017-10-23T15:21:38.541Z",
      "updated_at": "2017-10-23T15:22:58.519Z"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <p>分享將在會員的帳戶中創建一個新視頻。這<code translate="No">state</code>的視頻共享將是<code translate="No">PROCESSING</code>直到分享完成<strong>和</strong>視頻是在附屬帳戶中創建的。附屬機構可能仍需要接受視頻（如果<code translate="No">auto_accept</code>被設定為<code translate="No">false</code>關於附屬公司的合同 - 請參閱上一節關於設置共享）。</p>
    
    <aside class="bcls-aside bcls-aside--information">一種<code translate="No">GET</code>主帳戶的共享請求將不會返回附屬視頻 ID，直到共享狀態為<code translate="No">COMPLETE</code> .</aside><aside class="bcls-aside bcls-aside--warning">
    <p>重要筆記：</p>
    
    <ul>
      <li>如果視頻已經與附屬機構共享，此操作將重新共享視頻 - 請務必閱讀<a href="#Resharing_videos">轉發視頻</a>在你這樣做之前！</li>
      <li>
      <p>如果<code translate="No">reference_id</code>因為會員帳戶中已經在使用主視頻，共享將失敗。Master 和 Affiliate 需要通過更改<code translate="No">reference_id</code>在其中一個帳戶中，然後重試共享。</p>
    
      <p>由於共享是異步操作，因此共享請求不會返回任何錯誤。但是，GET共享請求（請參見上文）將顯示該帳戶錯誤。</p>
      </li>
    </ul>
    </aside>
    
    <h4 id="Unshare_video_affiliate">為聯屬網絡營銷人員取消共享視頻</h4>
    <!-- table 17 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">取消分享視頻</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">DELETE</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">master_account_id</span>/videos/ <span class="bcls-input">video_id</span>/shares/ <span class="bcls-input">affiliate_account_id</span> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td><code translate="No">202 ACCEPTED</code>（空響應正文）-響應表明請求已被接受進行處理，但操作可能會在幾分鐘內完成</td>
        </tr>
      </tbody>
    </table>
    
    <aside class="bcls-aside bcls-aside--warning">請注意，取消共享和重新共享視頻將導致共享視頻在聯屬網絡營銷帳戶中具有不同的視頻 ID。</aside>
    <!-- table 18 --><!-- <h4 id="Unshare_video">Unsharing a video for all Affiliates</h4>
          <table class="bcls-table">
          <caption class="bcls-caption--table">Unshare Video</caption>
          <tbody class="bcls-table__body">
              <tr>
                  <th>Method</th>
                  <td>DELETE</td>
              </tr>
              <tr>
                  <th>Endpoint</th>
                  <td>/accounts/<span class="bcls-input">master_account_id</span>/videos/<span class="bcls-input">video_id</span>/shares</td>
              </tr>
              <tr>
                  <th>Request body</th>
                  <td>
                  </td>
              </tr>
              <tr>
                  <th>Sample response</th>
                  <td>202 ACCEPTED (empty response body) - the response indicates that the request has been accepted for processing, but the operation may not be completed for a couple of minutes</td>
              </tr>
          </tbody>
      </table>
      <aside class="bcls-aside bcls-aside--warning">Note that un-sharing and re-sharing a video will result in the shared video having a different video id in the Affiliate account.</aside> -->
    
    <h3>會員運營</h3>
    
    <h4 id="Accept_share">接受分享的視頻</h4>
    
    <p>要接受共享視頻，附屬公司更新共享視頻，設置其<code translate="No">state</code>到<code translate="No">ACTIVE</code> .（設置<code translate="No">state</code>至<code translate="No">INACTIVE</code>拒絕分享。）</p>
    <!-- table 19 -->
    
    <table class="bcls-table">
      <caption class="bcls-caption--table">接受共享視頻</caption>
      <tbody class="bcls-table__body">
        <tr>
          <th>方法</th>
          <td><code translate="No">PATCH</code></td>
        </tr>
        <tr>
          <th>終點</th>
          <td><code translate="No">/accounts/ <span class="bcls-input">affiliate_account_id</span>/videos/ <span class="bcls-input">affiliate_video_id</span> </code></td>
        </tr>
        <tr>
          <th>要求正文</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">
        {
          "state": "ACTIVE"
        }
      </code></pre>
          </td>
        </tr>
        <tr>
          <th>樣本響應</th>
          <td>
          <pre class="line-numbers">
      <code class="language-json" translate="No">{
        "id": "5557656136001",
        "account_id": "1485884786001",
        "ad_keys": null,
        "clip_source_video_id": null,
        "complete": true,
        "created_at": "2017-08-30T13:35:51.796Z",
        "cue_points": [
        ],
        "custom_fields": {
        },
        "delivery_type": "dynamic_origin",
        "description": null,
        "digital_master_id": "4728546275001",
        "duration": 11111,
        "economics": "AD_SUPPORTED",
        "folder_id": null,
        "geo": null,
        "has_digital_master": true,
        "images": {
          "thumbnail": {
            "asset_id": "5473683978001",
            "remote": false,
            "src": "http://brightcove.vo.llnwd.net/e1/pd/57838016001/57838016001_5473683978001_4728519374001-th.jpg?pubId=1485884786001&amp;videoId=5557656136001",
            "sources": [
              {
                "src": "http://brightcove.vo.llnwd.net/e1/pd/57838016001/57838016001_5473683978001_4728519374001-th.jpg?pubId=1485884786001&amp;videoId=5557656136001",
                "height": 90,
                "width": 160
              },
              {
                "src": "https://brightcove.hs.llnwd.net/e1/pd/57838016001/57838016001_5473683978001_4728519374001-th.jpg?pubId=1485884786001&amp;videoId=5557656136001",
                "height": 90,
                "width": 160
              }
            ]
          },
          "poster": {
            "asset_id": "5473684427001",
            "remote": false,
            "src": "http://brightcove.vo.llnwd.net/e1/pd/57838016001/57838016001_5473684427001_4728519374001-vs.jpg?pubId=1485884786001&amp;videoId=5557656136001",
            "sources": [
              {
                "src": "http://brightcove.vo.llnwd.net/e1/pd/57838016001/57838016001_5473684427001_4728519374001-vs.jpg?pubId=1485884786001&amp;videoId=5557656136001",
                "height": 720,
                "width": 1280
              },
              {
                "src": "https://brightcove.hs.llnwd.net/e1/pd/57838016001/57838016001_5473684427001_4728519374001-vs.jpg?pubId=1485884786001&amp;videoId=5557656136001",
                "height": 720,
                "width": 1280
              }
            ]
          }
        },
        "link": null,
        "long_description": null,
        "name": "oystercatcher.mp4",
        "original_filename": "57838016001_4728546275001_4728519374001.mp4",
        "projection": null,
        "published_at": "2017-08-30T13:41:13.974Z",
        "reference_id": "2016-01-29T21:41:33.225Z-screencast-1280",
        "schedule": null,
        "sharing": {
          "by_external_acct": true,
          "by_id": "57838016001",
          "source_id": "4728519374001",
          "to_external_acct": false,
          "by_reference": true
        },
        "state": "ACTIVE",
        "tags": [
          "newtag",
          "foo"
        ],
        "text_tracks": [
        ],
        "updated_at": "2017-08-30T13:41:14.075Z"
      }</code></pre>
          </td>
        </tr>
      </tbody>
    </table>
    
    <p>設置<code translate="No">state</code>到<code translate="No">INACTIVE</code>拒絕分享。</p>
    
    <p>請注意，沒有特殊通知指示已將視頻共享到您的帳戶。但是，如果你<a href="/cms/searching/cms-and-playback-apis-video-search-v2.html">搜尋影片</a>為了<code translate="No">state:pending</code>，它將找到任何不可接受的份額。另外，您可以使用Studio Media模塊中的“待處理的共享"列表來查看和接受/拒絕待處理的共享：</p>
    
    <figure class="bcls-figure"><img class="bcls-image" alt="Pending Shares" src="/assets/images/cms/managing-videos/pending-share.png" />
    <figcaption class="bcls-caption--image">待定股份</figcaption>
    </figure>
    </section>
    
    <section class="bcls-section">
    <h2 id="Errors">失誤</h2>
    
    <p>媒體共享錯誤不會作為對API請求的單獨錯誤響應返回，而是在<code translate="No">error_message</code>正常響應中的字段：</p>
    
    <pre class="line-numbers">
      <code class="language-json" translate="No">[
        {
          "video_id" : "1239817239128",
          "affiliate_id" : "32871239",
          "affiliate_video_id" : "30308254055202",
          "status" : "COMPLETE",
          "shared_at" : "2017-12-11T17:57:45.530Z",
          "updated_at" : "2017-12-11T18:03:32.789Z",
          "error_message" : <span class="bcls-highlight">"[{"error_code":"MISSING_CUSTOM_FIELDS","error_message":"Affiliate account is missing custom fields: [whisky]"}]"</span>
        }
      ]</code></pre>
    
    <p>看<a href="/cms/references/cms-api-error-message-reference.html#Media_sharing_errors">這<span translate="No">內容管理系統 API</span>錯誤參考</a>更多細節。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Limitations">局限性</h2>
    
    <p>當前，媒體共享具有以下限制：</p>
    
    <ul>
      <li>DRM：通過媒體共享<span translate="No">內容管理系統 API</span>目前不支持啟用 DRM 的帳戶。支持從未啟用 DRM 的帳戶向啟用 DRM 的帳戶共享視頻，但共享的視頻將<strong>不是</strong>為 DRM 打包。</li>
      <li>
      <p>如果主帳戶定義的渠道已設置<code translate="No">enforce_custom_fields</code>至<code translate="No">true</code>，然後共享具有自定義字段且其關聯會員帳戶不允許使用的值的視頻，則共享嘗試將失敗。共享狀態將更新為錯誤消息，如下所示：</p>
    
      <pre class="line-numbers">
      <code class="language-json" translate="No">[{"error_code": "ILLEGAL_CUSTOM_FIELD_VALUE", "error_message": "Illegal value for custom fields: [topic]"}]
      </code></pre>
    
      <p>如果主帳戶定義的渠道已設置<code translate="No">enforce_custom_fields</code>至<code translate="No">false</code>，然後共享具有自定義字段且其會員帳戶所不允許的值的視頻，則共享嘗試將起作用，但是具有錯誤值的字段將不會包含在該視頻的會員副本中。</p>
      </li>
      <li>
        使用 SSAI 播放共享視頻時，SSAI 宏替換將使用父視頻中的元數據而不是子視頻。如果父視頻被標記為<code translate="No">Advertising='Free'</code>，即使子視頻被標記為<code translate="No">Ad Supported</code> .
      </li>
    </ul>
    </section>
    </article>
 