---
title: '概述：政策API'
description: '在本主題中，您將了解 Policy API 的用途以及如何使用它。Policy API 用於創建或獲取策略密鑰。'
parent: Getting Started 
grandparent: Policy API
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
    <div class="training-video-player-ipx" data-experience="5a73630f7afd7a00101bc1b5" data-video-ids="5853357211001">&nbsp;</div>
    <script src="https://players.brightcove.net/20318290001/experience_5a73630f7afd7a00101bc1b5/live.js"></script>
    
    <section class="bcls-section">
    <h2 id="Introduction">介紹</h2>
    
    <p>這<a href="/policy/getting-started/policy-keys.html">策略鍵</a>用於從您的 Video Cloud 庫中檢索視頻和播放列表內容，使用<a href="/playback/getting-started/overview-playback-api.html">播放接口</a> .</p>
    
    <p>另請參閱<a href="/policy/references/reference.html">API參考</a>。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Do_you_need_one">需要一個嗎？</h2>
    
    <p>只有在特殊情況下您需要生成自己的策略密鑰：</p>
    
    <ul>
      <li>創建策略密鑰時，它們會自動為Brightcove Players生成。如果您希望為播放器獲取帶有地理過濾功能的密鑰，或者在不創建播放器的情況下訪問 Playback API，您只需要直接使用此 API 生成策略密鑰 - 通常這將用於使用<a href="https://sdks.support.brightcove.com/">設備 SDK</a> .看<a href="/policy/getting-started/policy-keys.html">策略密鑰</a>有關如何獲取任何 Brightcove Player 的策略密鑰的說明。</li>
      <li>執行視頻搜索請求：
      <ul>
        <li>你必須使用一個<a href="#Search_videos">啟用搜索的策略密鑰</a> .</li>
        <li>默認情況下，不為新Brightcove播放器生成的策略密鑰處於搜索狀態。您必須使用<a href="#Search_videos">政策API</a> .</li>
        <li>通常，啟用搜索功能的策略密鑰只能存儲在服務器上，而不能存儲在瀏覽器播放器或移動應用程序中，因為它們可用於列出所有可播放的視頻。對於某些帳戶，如果您不介意可以發現所有可播放的視頻，則可能不適用。</li>
        <li>搜索請求只會返回可播放的視頻。有關 API 請求/響應的詳細信息，請參閱<strong>獲取視頻</strong>的部分<a href="/playback/references/reference_v1.html">播放 API 參考</a> .</li>
      </ul>
      </li>
    </ul>
    </section>
    
    <section class="bcls-section">
    <h2 id="FAQ">常問問題</h2>
    
    <p>以下是一些我們通常會收到的有關Policy API的問題。</p>
    
    <dl>
      <dt class="bcls-question">可以為多個帳戶創建策略密鑰，還是僅為一個帳戶創建策略密鑰？</dt>
      <dd class="bcls-answer">使用策略密鑰可以訪問一個帳戶的視頻和播放列表。如果您有多個帳戶，則需要為每個帳戶創建策略密鑰。</dd>
      <dt class="bcls-question">策略密鑰會過期嗎？</dt>
      <dd class="bcls-answer">不，策略密鑰永遠是好的。如果您需要撤消策略密鑰，則必須聯繫<a href="//support.brightcove.com/en/contact">Brightcove支持</a> -在請求中包含您希望撤銷的帳戶ID和策略密鑰。</dd>
      <dt class="bcls-question">策略密鑰是否適用於帳戶中的所有用戶？</dt>
      <dd class="bcls-answer">是的，任何擁有策略密鑰的人都可以使用它。</dd>
      <dt class="bcls-question">可以更新策略密鑰嗎？</dt>
      <dd class="bcls-answer">否，無法更新策略密鑰。你可以<a href="/policy/getting-started/policy-keys.html#Getting_the_policy_key">獲取策略密鑰</a>從 Video Cloud 帳戶中的現有播放器，或者您可以使用 Policy API 創建新的策略密鑰。</dd>
    </dl>
    </section>
    
    <section class="bcls-section">
    <h2 id="Base_URL">基本網址</h2>
    
    <p>策略 API 的基本 URL 是：</p>
    
    <pre>
    <code class="language-http" translate="No">https://policy.api.brightcove.com/v1</code></pre>
    
    <h3>帳戶路徑</h3>
    
    <p>在任何情況下，都將請求特定的視頻雲帳戶。所以，你總是會添加<code translate="No">/accounts/ </code>後跟您的帳戶 ID 到基本 URL：</p>
    
    <pre>
    <code class="language-http" translate="No">https://policy.api.brightcove.com/v1<strong>/accounts/{account_id}</strong></code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Authentication">驗證</h2>
    
    <p>請求通過傳遞給服務器的訪問令牌進行身份驗證<code translate="No">Authorization </code>標頭：</p>
    
    <pre>
    <code class="language-json" translate="No">Authorization: Bearer {access_token}</code></pre>
    
    <p>要獲取訪問令牌，請按照下列步驟操作：</p>
    
    <ol class="bcls-tasklist">
      <li>
      <p>獲取您的客戶憑證（<code translate="No">client_id </code>和<code translate="No">client_secret </code>） 通過<a href="/general/managing-api-authentication-credentials.html">Video Cloud Studio</a>（受到推崇的）。</p>
    
      <p>對於可與策略密鑰創建請求一起使用的訪問令牌，要求您的客戶端憑據在Studio中具有以下權限：<strong>玩家讀和讀/寫</strong></p>
    
      <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Authentication permissions" src="//learning-services-media.brightcove.com/doc-assets/video-cloud-apis/policy-api/overview/authentication-permissions.png" />
      <figcaption class="bcls-caption--image">驗證權限</figcaption>
      </figure>
    
      <p>您還可以直接通過<a href="/oauth/getting-started/overview-oauth-api-v4.html">Brightcove OAuth API</a> .</p>
      </li>
      <li>有了客戶憑證後，您就可以<a href="/oauth/guides/getting-access-tokens.html">從OAuth API獲取臨時訪問令牌</a>。</li>
    </ol>
    </section>
    
    <section class="bcls-section">
    <h2 id="required_headers">必需的標題</h2>
    
    <p>除了<code translate="No">Authorization</code>在上一節中討論的標頭中，請求還必須具有一個<code translate="No">Content-Type</code>標頭：</p>
    
    <pre class="line-numbers">
    <code class="language-bash" translate="No">Content-Type: application/json</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Create_a_policy_key">創建策略密鑰</h2>
    
    <p>要創建新的策略密鑰，請向以下地址發出 POST 請求：</p>
    
    <pre>
    <code class="language-http" translate="No">https://policy.api.brightcove.com/v1/accounts/{account_id}/policy_keys</code></pre>
    
    <h3>要求正文</h3>
    
    <p>在請求正文中，包含策略的JSON：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "{account_id}"
      }
    }</code></pre>
    
    <p>這是最基本的策略，它限制對帳戶的訪問，您必須將其包含在您創建的任何策略中。這裡的賬戶id必須與請求URL中的賬戶id一致，否則會返回錯誤。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Domain_restriction">域限制</h2>
    
    <p>除了限制對該帳戶的訪問權限外，您還可以通過添加以下內容來限制對特定域的訪問權限：<code translate="No">allowed-domains </code>鑰匙：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "123456789001",
        "allowed-domains": [
          "http://www.abc.com",
          "https://www.abc.com",
          "http://www.xyz.com",
          "https://www.xyz.com"
        ]
      }
    }</code></pre>
    
    <aside class="bcls-aside bcls-aside--warning">
    <ul>
      <li>域必須包含協議和域名以及端口，除非它是協議的默認端口（例如，http：//www.abc.com、https：//www.def.com：8888），但是<strong>不是路徑或斜杠（“/"）</strong></li>
      <li>您帳戶的任何密鑰都可以用於通過Playback API訪問帳戶內容，因此，如果您使用域限制，我們強烈建議您對所有播放器進行域限制。</li>
      <li>因為<a href="https://sdks.support.brightcove.com">Brightcove本機播放器SDK</a>不發送原始標頭，則不能使用域受限的策略密鑰。如果您嘗試這樣做，您將獲得一個<code translate="No">403 Forbidden</code>嘗試從Video Cloud庫中獲取內容時的響應。</li>
    </ul>
    </aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="Geo_restriction">地域限制</h2>
    
    <p>Policy API 可用於為玩家實施地理過濾，而不是或除了<a href="/cms/managing-videos/using-cms-api-add-geo-filtering.html">個人視頻。</a></p>
    
    <aside class="bcls-aside bcls-aside--information">
    <ul>
      <li>一項政策可能會根據觀看者所檢測到的國家/地區來限製播放。要使用此策略創建和使用密鑰，必須允許帳戶使用地理過濾功能。如果最終用戶似乎是通過匿名代理或從匿名代理提出請求，則此策略還將拒絕訪問。</li>
      <li>實施了策略密鑰中的地理位置限制<strong>只要</strong>由使用該策略密鑰的玩家決定。</li>
      <li>地理限制也可以<a href="/cms/managing-videos/using-cms-api-add-geo-filtering.html">應用於單個視頻</a>。Video Cloud 同時應用播放器和視頻級別的地理過濾策略，因此如果某個國家/地區被其中之一排除，則該視頻將無法在該國家/地區使用。</li>
    </ul>
    </aside>
    
    <h3>樣本</h3>
    
    <p>以下是一個白名單策略集示例，該策略集僅允許從美國，美國領土和軍事基地進行播放：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{"account-id": "8523232323",
      "geo": {
        "countries": ["us", "usmil", "pr", "gu", "vi", "as", "mp"],
        "exclude_countries": false
      }
    }</code></pre>
    
    <p>要將這些國家/地區列入黑名單，請設置<code translate="No">exclude_countries </code>為真。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Require_SSAI">需要SSAI</h2>
    
    <p>在使用服務器端廣告插入 (SSAI) 時，您可能需要一種在 API 請求中強制執行正確廣告配置的方法。您可以通過配置您的策略密鑰來要求一個<code translate="No">ad_config_id </code>作為 URL 參數附加到所有 Playback API 請求。</p>
    
    <h3>樣本</h3>
    
    <p>這是一個例子：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "1752604059001",
        "require-ad-config": true
      }
    }</code></pre>
    
    <p>有關使用<code translate="No">ad_config_id </code>與您的Playback API請求一起，請參閱<a href="/playback/getting-started/overview-playback-api.html#Video_request_with_SSAI">播放API概述：使用 SSAI 請求視頻</a>文檔。</p>
    </section>
    
    <section class="bcls-section">
    <h2 id="Search_videos">搜索視頻</h2>
    
    <p>執行視頻搜索請求時，您必須使用啟用搜索的策略密鑰。要創建啟用搜索的策略密鑰，調用的請求正文必須包括以下內容：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "57838016001",
        "apis": ["search"]
      }
    }</code></pre>
    
    <aside class="bcls-aside bcls-aside--warning">通常，啟用搜索的策略密鑰應僅存儲在服務器上，而不應存儲在瀏覽器播放器或移動應用程序中，因為它們可用於列出所有可播放的視頻。對於某些帳戶，如果您不關心是否可以發現所有可播放的視頻，這可能不適用。</aside>
    </section>
    
    <section class="bcls-section">
    <h2 id="API_Response">API響應</h2>
    
    <p>對策略創建請求的響應將是包含加密的 JSON <code translate="No">key-string </code>您可以使用它來驗證對 Playback API 的請求，以及與密鑰關聯的策略：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "57838016001"
      },
      "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U"
    }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Policy_requests">政策要求</h2>
    
    <p>檢索與一個關聯的策略對象<code translate="No">key-string </code> , 發出 GET 請求：</p>
    
    <pre>
    <code class="language-json" translate="No">/accounts/v1/{account_id}/policy_keys/{key_string}</code></pre>
    
    <p>響應將是密鑰字符串和策略的 JSON 表示：</p>
    
    <pre class="line-numbers">
    <code class="language-json" translate="No">{
      "key-data": {
        "account-id": "57838016001"
      },
      "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U"
    }</code></pre>
    </section>
    
    <section class="bcls-section">
    <h2 id="Revoke_a_policy">撤銷政策</h2>
    
    <p>如果您需要撤銷現有政策，請向<a href="http://support.brightcove.com/en/contact">Brightcove支持</a>。在請求中包含要撤銷的策略的密鑰字符串。</p>
    </section>
    </article>
 